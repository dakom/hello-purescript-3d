!function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=26)}([function(t,n,e){"use strict";e.r(n);var r={};e.r(r),e.d(r,"EPSILON",function(){return h}),e.d(r,"ARRAY_TYPE",function(){return d}),e.d(r,"RANDOM",function(){return y}),e.d(r,"setMatrixArrayType",function(){return m}),e.d(r,"toRadian",function(){return g}),e.d(r,"equals",function(){return v});var o={};e.r(o),e.d(o,"create",function(){return E}),e.d(o,"clone",function(){return T}),e.d(o,"copy",function(){return b}),e.d(o,"identity",function(){return A}),e.d(o,"fromValues",function(){return M}),e.d(o,"set",function(){return R}),e.d(o,"transpose",function(){return S}),e.d(o,"invert",function(){return N}),e.d(o,"adjoint",function(){return O}),e.d(o,"determinant",function(){return I}),e.d(o,"multiply",function(){return F}),e.d(o,"rotate",function(){return L}),e.d(o,"scale",function(){return x}),e.d(o,"fromRotation",function(){return C}),e.d(o,"fromScaling",function(){return P}),e.d(o,"str",function(){return w}),e.d(o,"frob",function(){return U}),e.d(o,"LDU",function(){return B}),e.d(o,"add",function(){return j}),e.d(o,"subtract",function(){return D}),e.d(o,"exactEquals",function(){return k}),e.d(o,"equals",function(){return V}),e.d(o,"multiplyScalar",function(){return G}),e.d(o,"multiplyScalarAndAdd",function(){return H}),e.d(o,"mul",function(){return q}),e.d(o,"sub",function(){return X});var i={};e.r(i),e.d(i,"create",function(){return W}),e.d(i,"clone",function(){return z}),e.d(i,"copy",function(){return $}),e.d(i,"identity",function(){return Y}),e.d(i,"fromValues",function(){return K}),e.d(i,"set",function(){return J}),e.d(i,"invert",function(){return Z}),e.d(i,"determinant",function(){return Q}),e.d(i,"multiply",function(){return tt}),e.d(i,"rotate",function(){return nt}),e.d(i,"scale",function(){return et}),e.d(i,"translate",function(){return rt}),e.d(i,"fromRotation",function(){return ot}),e.d(i,"fromScaling",function(){return it}),e.d(i,"fromTranslation",function(){return ut}),e.d(i,"str",function(){return at}),e.d(i,"frob",function(){return st}),e.d(i,"add",function(){return ct}),e.d(i,"subtract",function(){return ft}),e.d(i,"multiplyScalar",function(){return lt}),e.d(i,"multiplyScalarAndAdd",function(){return pt}),e.d(i,"exactEquals",function(){return ht}),e.d(i,"equals",function(){return dt}),e.d(i,"mul",function(){return yt}),e.d(i,"sub",function(){return mt});var u={};e.r(u),e.d(u,"create",function(){return _t}),e.d(u,"fromMat4",function(){return gt}),e.d(u,"clone",function(){return vt}),e.d(u,"copy",function(){return Et}),e.d(u,"fromValues",function(){return Tt}),e.d(u,"set",function(){return bt}),e.d(u,"identity",function(){return At}),e.d(u,"transpose",function(){return Mt}),e.d(u,"invert",function(){return Rt}),e.d(u,"adjoint",function(){return St}),e.d(u,"determinant",function(){return Nt}),e.d(u,"multiply",function(){return Ot}),e.d(u,"translate",function(){return It}),e.d(u,"rotate",function(){return Ft}),e.d(u,"scale",function(){return Lt}),e.d(u,"fromTranslation",function(){return xt}),e.d(u,"fromRotation",function(){return Ct}),e.d(u,"fromScaling",function(){return Pt}),e.d(u,"fromMat2d",function(){return wt}),e.d(u,"fromQuat",function(){return Ut}),e.d(u,"normalFromMat4",function(){return Bt}),e.d(u,"projection",function(){return jt}),e.d(u,"str",function(){return Dt}),e.d(u,"frob",function(){return kt}),e.d(u,"add",function(){return Vt}),e.d(u,"subtract",function(){return Gt}),e.d(u,"multiplyScalar",function(){return Ht}),e.d(u,"multiplyScalarAndAdd",function(){return qt}),e.d(u,"exactEquals",function(){return Xt}),e.d(u,"equals",function(){return Wt}),e.d(u,"mul",function(){return zt}),e.d(u,"sub",function(){return $t});var a={};e.r(a),e.d(a,"create",function(){return Yt}),e.d(a,"clone",function(){return Kt}),e.d(a,"copy",function(){return Jt}),e.d(a,"fromValues",function(){return Zt}),e.d(a,"set",function(){return Qt}),e.d(a,"identity",function(){return tn}),e.d(a,"transpose",function(){return nn}),e.d(a,"invert",function(){return en}),e.d(a,"adjoint",function(){return rn}),e.d(a,"determinant",function(){return on}),e.d(a,"multiply",function(){return un}),e.d(a,"translate",function(){return an}),e.d(a,"scale",function(){return sn}),e.d(a,"rotate",function(){return cn}),e.d(a,"rotateX",function(){return fn}),e.d(a,"rotateY",function(){return ln}),e.d(a,"rotateZ",function(){return pn}),e.d(a,"fromTranslation",function(){return hn}),e.d(a,"fromScaling",function(){return dn}),e.d(a,"fromRotation",function(){return yn}),e.d(a,"fromXRotation",function(){return mn}),e.d(a,"fromYRotation",function(){return _n}),e.d(a,"fromZRotation",function(){return gn}),e.d(a,"fromRotationTranslation",function(){return vn}),e.d(a,"fromQuat2",function(){return En}),e.d(a,"getTranslation",function(){return Tn}),e.d(a,"getScaling",function(){return bn}),e.d(a,"getRotation",function(){return An}),e.d(a,"fromRotationTranslationScale",function(){return Mn}),e.d(a,"fromRotationTranslationScaleOrigin",function(){return Rn}),e.d(a,"fromQuat",function(){return Sn}),e.d(a,"frustum",function(){return Nn}),e.d(a,"perspective",function(){return On}),e.d(a,"perspectiveFromFieldOfView",function(){return In}),e.d(a,"ortho",function(){return Fn}),e.d(a,"lookAt",function(){return Ln}),e.d(a,"targetTo",function(){return xn}),e.d(a,"str",function(){return Cn}),e.d(a,"frob",function(){return Pn}),e.d(a,"add",function(){return wn}),e.d(a,"subtract",function(){return Un}),e.d(a,"multiplyScalar",function(){return Bn}),e.d(a,"multiplyScalarAndAdd",function(){return jn}),e.d(a,"exactEquals",function(){return Dn}),e.d(a,"equals",function(){return kn}),e.d(a,"mul",function(){return Vn}),e.d(a,"sub",function(){return Gn});var s={};e.r(s),e.d(s,"create",function(){return Hn}),e.d(s,"clone",function(){return qn}),e.d(s,"length",function(){return Xn}),e.d(s,"fromValues",function(){return Wn}),e.d(s,"copy",function(){return zn}),e.d(s,"set",function(){return $n}),e.d(s,"add",function(){return Yn}),e.d(s,"subtract",function(){return Kn}),e.d(s,"multiply",function(){return Jn}),e.d(s,"divide",function(){return Zn}),e.d(s,"ceil",function(){return Qn}),e.d(s,"floor",function(){return te}),e.d(s,"min",function(){return ne}),e.d(s,"max",function(){return ee}),e.d(s,"round",function(){return re}),e.d(s,"scale",function(){return oe}),e.d(s,"scaleAndAdd",function(){return ie}),e.d(s,"distance",function(){return ue}),e.d(s,"squaredDistance",function(){return ae}),e.d(s,"squaredLength",function(){return se}),e.d(s,"negate",function(){return ce}),e.d(s,"inverse",function(){return fe}),e.d(s,"normalize",function(){return le}),e.d(s,"dot",function(){return pe}),e.d(s,"cross",function(){return he}),e.d(s,"lerp",function(){return de}),e.d(s,"hermite",function(){return ye}),e.d(s,"bezier",function(){return me}),e.d(s,"random",function(){return _e}),e.d(s,"transformMat4",function(){return ge}),e.d(s,"transformMat3",function(){return ve}),e.d(s,"transformQuat",function(){return Ee}),e.d(s,"rotateX",function(){return Te}),e.d(s,"rotateY",function(){return be}),e.d(s,"rotateZ",function(){return Ae}),e.d(s,"angle",function(){return Me}),e.d(s,"str",function(){return Re}),e.d(s,"exactEquals",function(){return Se}),e.d(s,"equals",function(){return Ne}),e.d(s,"sub",function(){return Oe}),e.d(s,"mul",function(){return Ie}),e.d(s,"div",function(){return Fe}),e.d(s,"dist",function(){return Le}),e.d(s,"sqrDist",function(){return xe}),e.d(s,"len",function(){return Ce}),e.d(s,"sqrLen",function(){return Pe}),e.d(s,"forEach",function(){return we});var c={};e.r(c),e.d(c,"create",function(){return Ue}),e.d(c,"clone",function(){return Be}),e.d(c,"fromValues",function(){return je}),e.d(c,"copy",function(){return De}),e.d(c,"set",function(){return ke}),e.d(c,"add",function(){return Ve}),e.d(c,"subtract",function(){return Ge}),e.d(c,"multiply",function(){return He}),e.d(c,"divide",function(){return qe}),e.d(c,"ceil",function(){return Xe}),e.d(c,"floor",function(){return We}),e.d(c,"min",function(){return ze}),e.d(c,"max",function(){return $e}),e.d(c,"round",function(){return Ye}),e.d(c,"scale",function(){return Ke}),e.d(c,"scaleAndAdd",function(){return Je}),e.d(c,"distance",function(){return Ze}),e.d(c,"squaredDistance",function(){return Qe}),e.d(c,"length",function(){return tr}),e.d(c,"squaredLength",function(){return nr}),e.d(c,"negate",function(){return er}),e.d(c,"inverse",function(){return rr}),e.d(c,"normalize",function(){return or}),e.d(c,"dot",function(){return ir}),e.d(c,"lerp",function(){return ur}),e.d(c,"random",function(){return ar}),e.d(c,"transformMat4",function(){return sr}),e.d(c,"transformQuat",function(){return cr}),e.d(c,"str",function(){return fr}),e.d(c,"exactEquals",function(){return lr}),e.d(c,"equals",function(){return pr}),e.d(c,"sub",function(){return hr}),e.d(c,"mul",function(){return dr}),e.d(c,"div",function(){return yr}),e.d(c,"dist",function(){return mr}),e.d(c,"sqrDist",function(){return _r}),e.d(c,"len",function(){return gr}),e.d(c,"sqrLen",function(){return vr}),e.d(c,"forEach",function(){return Er});var f={};e.r(f),e.d(f,"create",function(){return Tr}),e.d(f,"identity",function(){return br}),e.d(f,"setAxisAngle",function(){return Ar}),e.d(f,"getAxisAngle",function(){return Mr}),e.d(f,"multiply",function(){return Rr}),e.d(f,"rotateX",function(){return Sr}),e.d(f,"rotateY",function(){return Nr}),e.d(f,"rotateZ",function(){return Or}),e.d(f,"calculateW",function(){return Ir}),e.d(f,"slerp",function(){return Fr}),e.d(f,"random",function(){return Lr}),e.d(f,"invert",function(){return xr}),e.d(f,"conjugate",function(){return Cr}),e.d(f,"fromMat3",function(){return Pr}),e.d(f,"fromEuler",function(){return wr}),e.d(f,"str",function(){return Ur}),e.d(f,"clone",function(){return Br}),e.d(f,"fromValues",function(){return jr}),e.d(f,"copy",function(){return Dr}),e.d(f,"set",function(){return kr}),e.d(f,"add",function(){return Vr}),e.d(f,"mul",function(){return Gr}),e.d(f,"scale",function(){return Hr}),e.d(f,"dot",function(){return qr}),e.d(f,"lerp",function(){return Xr}),e.d(f,"length",function(){return Wr}),e.d(f,"len",function(){return zr}),e.d(f,"squaredLength",function(){return $r}),e.d(f,"sqrLen",function(){return Yr}),e.d(f,"normalize",function(){return Kr}),e.d(f,"exactEquals",function(){return Jr}),e.d(f,"equals",function(){return Zr}),e.d(f,"rotationTo",function(){return Qr}),e.d(f,"sqlerp",function(){return to}),e.d(f,"setAxes",function(){return no});var l={};e.r(l),e.d(l,"create",function(){return eo}),e.d(l,"clone",function(){return ro}),e.d(l,"fromValues",function(){return oo}),e.d(l,"fromRotationTranslationValues",function(){return io}),e.d(l,"fromRotationTranslation",function(){return uo}),e.d(l,"fromTranslation",function(){return ao}),e.d(l,"fromRotation",function(){return so}),e.d(l,"fromMat4",function(){return co}),e.d(l,"copy",function(){return fo}),e.d(l,"identity",function(){return lo}),e.d(l,"set",function(){return po}),e.d(l,"getReal",function(){return ho}),e.d(l,"getDual",function(){return yo}),e.d(l,"setReal",function(){return mo}),e.d(l,"setDual",function(){return _o}),e.d(l,"getTranslation",function(){return go}),e.d(l,"translate",function(){return vo}),e.d(l,"rotateX",function(){return Eo}),e.d(l,"rotateY",function(){return To}),e.d(l,"rotateZ",function(){return bo}),e.d(l,"rotateByQuatAppend",function(){return Ao}),e.d(l,"rotateByQuatPrepend",function(){return Mo}),e.d(l,"rotateAroundAxis",function(){return Ro}),e.d(l,"add",function(){return So}),e.d(l,"multiply",function(){return No}),e.d(l,"mul",function(){return Oo}),e.d(l,"scale",function(){return Io}),e.d(l,"dot",function(){return Fo}),e.d(l,"lerp",function(){return Lo}),e.d(l,"invert",function(){return xo}),e.d(l,"conjugate",function(){return Co}),e.d(l,"length",function(){return Po}),e.d(l,"len",function(){return wo}),e.d(l,"squaredLength",function(){return Uo}),e.d(l,"sqrLen",function(){return Bo}),e.d(l,"normalize",function(){return jo}),e.d(l,"str",function(){return Do}),e.d(l,"exactEquals",function(){return ko}),e.d(l,"equals",function(){return Vo});var p={};e.r(p),e.d(p,"create",function(){return Go}),e.d(p,"clone",function(){return Ho}),e.d(p,"fromValues",function(){return qo}),e.d(p,"copy",function(){return Xo}),e.d(p,"set",function(){return Wo}),e.d(p,"add",function(){return zo}),e.d(p,"subtract",function(){return $o}),e.d(p,"multiply",function(){return Yo}),e.d(p,"divide",function(){return Ko}),e.d(p,"ceil",function(){return Jo}),e.d(p,"floor",function(){return Zo}),e.d(p,"min",function(){return Qo}),e.d(p,"max",function(){return ti}),e.d(p,"round",function(){return ni}),e.d(p,"scale",function(){return ei}),e.d(p,"scaleAndAdd",function(){return ri}),e.d(p,"distance",function(){return oi}),e.d(p,"squaredDistance",function(){return ii}),e.d(p,"length",function(){return ui}),e.d(p,"squaredLength",function(){return ai}),e.d(p,"negate",function(){return si}),e.d(p,"inverse",function(){return ci}),e.d(p,"normalize",function(){return fi}),e.d(p,"dot",function(){return li}),e.d(p,"cross",function(){return pi}),e.d(p,"lerp",function(){return hi}),e.d(p,"random",function(){return di}),e.d(p,"transformMat2",function(){return yi}),e.d(p,"transformMat2d",function(){return mi}),e.d(p,"transformMat3",function(){return _i}),e.d(p,"transformMat4",function(){return gi}),e.d(p,"rotate",function(){return vi}),e.d(p,"angle",function(){return Ei}),e.d(p,"str",function(){return Ti}),e.d(p,"exactEquals",function(){return bi}),e.d(p,"equals",function(){return Ai}),e.d(p,"len",function(){return Mi}),e.d(p,"sub",function(){return Ri}),e.d(p,"mul",function(){return Si}),e.d(p,"div",function(){return Ni}),e.d(p,"dist",function(){return Oi}),e.d(p,"sqrDist",function(){return Ii}),e.d(p,"sqrLen",function(){return Fi}),e.d(p,"forEach",function(){return Li});const h=1e-6;let d="undefined"!=typeof Float32Array?Float32Array:Array;const y=Math.random;function m(t){d=t}const _=Math.PI/180;function g(t){return t*_}function v(t,n){return Math.abs(t-n)<=h*Math.max(1,Math.abs(t),Math.abs(n))}function E(){let t=new d(4);return d!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function T(t){let n=new d(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}function b(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function A(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function M(t,n,e,r){let o=new d(4);return o[0]=t,o[1]=n,o[2]=e,o[3]=r,o}function R(t,n,e,r,o){return t[0]=n,t[1]=e,t[2]=r,t[3]=o,t}function S(t,n){if(t===n){let e=n[1];t[1]=n[2],t[2]=e}else t[0]=n[0],t[1]=n[2],t[2]=n[1],t[3]=n[3];return t}function N(t,n){let e=n[0],r=n[1],o=n[2],i=n[3],u=e*i-o*r;return u?(u=1/u,t[0]=i*u,t[1]=-r*u,t[2]=-o*u,t[3]=e*u,t):null}function O(t,n){let e=n[0];return t[0]=n[3],t[1]=-n[1],t[2]=-n[2],t[3]=e,t}function I(t){return t[0]*t[3]-t[2]*t[1]}function F(t,n,e){let r=n[0],o=n[1],i=n[2],u=n[3],a=e[0],s=e[1],c=e[2],f=e[3];return t[0]=r*a+i*s,t[1]=o*a+u*s,t[2]=r*c+i*f,t[3]=o*c+u*f,t}function L(t,n,e){let r=n[0],o=n[1],i=n[2],u=n[3],a=Math.sin(e),s=Math.cos(e);return t[0]=r*s+i*a,t[1]=o*s+u*a,t[2]=r*-a+i*s,t[3]=o*-a+u*s,t}function x(t,n,e){let r=n[0],o=n[1],i=n[2],u=n[3],a=e[0],s=e[1];return t[0]=r*a,t[1]=o*a,t[2]=i*s,t[3]=u*s,t}function C(t,n){let e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=-e,t[3]=r,t}function P(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t}function w(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function U(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))}function B(t,n,e,r){return t[2]=r[2]/r[0],e[0]=r[0],e[1]=r[1],e[3]=r[3]-t[2]*e[1],[t,n,e]}function j(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t}function D(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t}function k(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]}function V(t,n){let e=t[0],r=t[1],o=t[2],i=t[3],u=n[0],a=n[1],s=n[2],c=n[3];return Math.abs(e-u)<=h*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(r-a)<=h*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(o-s)<=h*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-c)<=h*Math.max(1,Math.abs(i),Math.abs(c))}function G(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t}function H(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t}const q=F,X=D;function W(){let t=new d(6);return d!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function z(t){let n=new d(6);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n}function $(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t}function Y(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function K(t,n,e,r,o,i){let u=new d(6);return u[0]=t,u[1]=n,u[2]=e,u[3]=r,u[4]=o,u[5]=i,u}function J(t,n,e,r,o,i,u){return t[0]=n,t[1]=e,t[2]=r,t[3]=o,t[4]=i,t[5]=u,t}function Z(t,n){let e=n[0],r=n[1],o=n[2],i=n[3],u=n[4],a=n[5],s=e*i-r*o;return s?(s=1/s,t[0]=i*s,t[1]=-r*s,t[2]=-o*s,t[3]=e*s,t[4]=(o*a-i*u)*s,t[5]=(r*u-e*a)*s,t):null}function Q(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,n,e){let r=n[0],o=n[1],i=n[2],u=n[3],a=n[4],s=n[5],c=e[0],f=e[1],l=e[2],p=e[3],h=e[4],d=e[5];return t[0]=r*c+i*f,t[1]=o*c+u*f,t[2]=r*l+i*p,t[3]=o*l+u*p,t[4]=r*h+i*d+a,t[5]=o*h+u*d+s,t}function nt(t,n,e){let r=n[0],o=n[1],i=n[2],u=n[3],a=n[4],s=n[5],c=Math.sin(e),f=Math.cos(e);return t[0]=r*f+i*c,t[1]=o*f+u*c,t[2]=r*-c+i*f,t[3]=o*-c+u*f,t[4]=a,t[5]=s,t}function et(t,n,e){let r=n[0],o=n[1],i=n[2],u=n[3],a=n[4],s=n[5],c=e[0],f=e[1];return t[0]=r*c,t[1]=o*c,t[2]=i*f,t[3]=u*f,t[4]=a,t[5]=s,t}function rt(t,n,e){let r=n[0],o=n[1],i=n[2],u=n[3],a=n[4],s=n[5],c=e[0],f=e[1];return t[0]=r,t[1]=o,t[2]=i,t[3]=u,t[4]=r*c+i*f+a,t[5]=o*c+u*f+s,t}function ot(t,n){let e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=-e,t[3]=r,t[4]=0,t[5]=0,t}function it(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t[4]=0,t[5]=0,t}function ut(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=n[0],t[5]=n[1],t}function at(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function st(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)}function ct(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t}function ft(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t}function lt(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t}function pt(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t}function ht(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]}function dt(t,n){let e=t[0],r=t[1],o=t[2],i=t[3],u=t[4],a=t[5],s=n[0],c=n[1],f=n[2],l=n[3],p=n[4],d=n[5];return Math.abs(e-s)<=h*Math.max(1,Math.abs(e),Math.abs(s))&&Math.abs(r-c)<=h*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(o-f)<=h*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(i-l)<=h*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(u-p)<=h*Math.max(1,Math.abs(u),Math.abs(p))&&Math.abs(a-d)<=h*Math.max(1,Math.abs(a),Math.abs(d))}const yt=tt,mt=ft;function _t(){let t=new d(9);return d!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function gt(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],t}function vt(t){let n=new d(9);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n}function Et(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t}function Tt(t,n,e,r,o,i,u,a,s){let c=new d(9);return c[0]=t,c[1]=n,c[2]=e,c[3]=r,c[4]=o,c[5]=i,c[6]=u,c[7]=a,c[8]=s,c}function bt(t,n,e,r,o,i,u,a,s,c){return t[0]=n,t[1]=e,t[2]=r,t[3]=o,t[4]=i,t[5]=u,t[6]=a,t[7]=s,t[8]=c,t}function At(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Mt(t,n){if(t===n){let e=n[1],r=n[2],o=n[5];t[1]=n[3],t[2]=n[6],t[3]=e,t[5]=n[7],t[6]=r,t[7]=o}else t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8];return t}function Rt(t,n){let e=n[0],r=n[1],o=n[2],i=n[3],u=n[4],a=n[5],s=n[6],c=n[7],f=n[8],l=f*u-a*c,p=-f*i+a*s,h=c*i-u*s,d=e*l+r*p+o*h;return d?(d=1/d,t[0]=l*d,t[1]=(-f*r+o*c)*d,t[2]=(a*r-o*u)*d,t[3]=p*d,t[4]=(f*e-o*s)*d,t[5]=(-a*e+o*i)*d,t[6]=h*d,t[7]=(-c*e+r*s)*d,t[8]=(u*e-r*i)*d,t):null}function St(t,n){let e=n[0],r=n[1],o=n[2],i=n[3],u=n[4],a=n[5],s=n[6],c=n[7],f=n[8];return t[0]=u*f-a*c,t[1]=o*c-r*f,t[2]=r*a-o*u,t[3]=a*s-i*f,t[4]=e*f-o*s,t[5]=o*i-e*a,t[6]=i*c-u*s,t[7]=r*s-e*c,t[8]=e*u-r*i,t}function Nt(t){let n=t[0],e=t[1],r=t[2],o=t[3],i=t[4],u=t[5],a=t[6],s=t[7],c=t[8];return n*(c*i-u*s)+e*(-c*o+u*a)+r*(s*o-i*a)}function Ot(t,n,e){let r=n[0],o=n[1],i=n[2],u=n[3],a=n[4],s=n[5],c=n[6],f=n[7],l=n[8],p=e[0],h=e[1],d=e[2],y=e[3],m=e[4],_=e[5],g=e[6],v=e[7],E=e[8];return t[0]=p*r+h*u+d*c,t[1]=p*o+h*a+d*f,t[2]=p*i+h*s+d*l,t[3]=y*r+m*u+_*c,t[4]=y*o+m*a+_*f,t[5]=y*i+m*s+_*l,t[6]=g*r+v*u+E*c,t[7]=g*o+v*a+E*f,t[8]=g*i+v*s+E*l,t}function It(t,n,e){let r=n[0],o=n[1],i=n[2],u=n[3],a=n[4],s=n[5],c=n[6],f=n[7],l=n[8],p=e[0],h=e[1];return t[0]=r,t[1]=o,t[2]=i,t[3]=u,t[4]=a,t[5]=s,t[6]=p*r+h*u+c,t[7]=p*o+h*a+f,t[8]=p*i+h*s+l,t}function Ft(t,n,e){let r=n[0],o=n[1],i=n[2],u=n[3],a=n[4],s=n[5],c=n[6],f=n[7],l=n[8],p=Math.sin(e),h=Math.cos(e);return t[0]=h*r+p*u,t[1]=h*o+p*a,t[2]=h*i+p*s,t[3]=h*u-p*r,t[4]=h*a-p*o,t[5]=h*s-p*i,t[6]=c,t[7]=f,t[8]=l,t}function Lt(t,n,e){let r=e[0],o=e[1];return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=o*n[3],t[4]=o*n[4],t[5]=o*n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t}function xt(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=n[0],t[7]=n[1],t[8]=1,t}function Ct(t,n){let e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=-e,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Pt(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=n[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function wt(t,n){return t[0]=n[0],t[1]=n[1],t[2]=0,t[3]=n[2],t[4]=n[3],t[5]=0,t[6]=n[4],t[7]=n[5],t[8]=1,t}function Ut(t,n){let e=n[0],r=n[1],o=n[2],i=n[3],u=e+e,a=r+r,s=o+o,c=e*u,f=r*u,l=r*a,p=o*u,h=o*a,d=o*s,y=i*u,m=i*a,_=i*s;return t[0]=1-l-d,t[3]=f-_,t[6]=p+m,t[1]=f+_,t[4]=1-c-d,t[7]=h-y,t[2]=p-m,t[5]=h+y,t[8]=1-c-l,t}function Bt(t,n){let e=n[0],r=n[1],o=n[2],i=n[3],u=n[4],a=n[5],s=n[6],c=n[7],f=n[8],l=n[9],p=n[10],h=n[11],d=n[12],y=n[13],m=n[14],_=n[15],g=e*a-r*u,v=e*s-o*u,E=e*c-i*u,T=r*s-o*a,b=r*c-i*a,A=o*c-i*s,M=f*y-l*d,R=f*m-p*d,S=f*_-h*d,N=l*m-p*y,O=l*_-h*y,I=p*_-h*m,F=g*I-v*O+E*N+T*S-b*R+A*M;return F?(F=1/F,t[0]=(a*I-s*O+c*N)*F,t[1]=(s*S-u*I-c*R)*F,t[2]=(u*O-a*S+c*M)*F,t[3]=(o*O-r*I-i*N)*F,t[4]=(e*I-o*S+i*R)*F,t[5]=(r*S-e*O-i*M)*F,t[6]=(y*A-m*b+_*T)*F,t[7]=(m*E-d*A-_*v)*F,t[8]=(d*b-y*E+_*g)*F,t):null}function jt(t,n,e){return t[0]=2/n,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/e,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Dt(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function kt(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))}function Vt(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t[8]=n[8]+e[8],t}function Gt(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t[6]=n[6]-e[6],t[7]=n[7]-e[7],t[8]=n[8]-e[8],t}function Ht(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*e,t}function qt(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t[6]=n[6]+e[6]*r,t[7]=n[7]+e[7]*r,t[8]=n[8]+e[8]*r,t}function Xt(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]}function Wt(t,n){let e=t[0],r=t[1],o=t[2],i=t[3],u=t[4],a=t[5],s=t[6],c=t[7],f=t[8],l=n[0],p=n[1],d=n[2],y=n[3],m=n[4],_=n[5],g=n[6],v=n[7],E=n[8];return Math.abs(e-l)<=h*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(r-p)<=h*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(o-d)<=h*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(i-y)<=h*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(u-m)<=h*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(a-_)<=h*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(s-g)<=h*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(c-v)<=h*Math.max(1,Math.abs(c),Math.abs(v))&&Math.abs(f-E)<=h*Math.max(1,Math.abs(f),Math.abs(E))}const zt=Ot,$t=Gt;function Yt(){let t=new d(16);return d!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Kt(t){let n=new d(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function Jt(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function Zt(t,n,e,r,o,i,u,a,s,c,f,l,p,h,y,m){let _=new d(16);return _[0]=t,_[1]=n,_[2]=e,_[3]=r,_[4]=o,_[5]=i,_[6]=u,_[7]=a,_[8]=s,_[9]=c,_[10]=f,_[11]=l,_[12]=p,_[13]=h,_[14]=y,_[15]=m,_}function Qt(t,n,e,r,o,i,u,a,s,c,f,l,p,h,d,y,m){return t[0]=n,t[1]=e,t[2]=r,t[3]=o,t[4]=i,t[5]=u,t[6]=a,t[7]=s,t[8]=c,t[9]=f,t[10]=l,t[11]=p,t[12]=h,t[13]=d,t[14]=y,t[15]=m,t}function tn(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function nn(t,n){if(t===n){let e=n[1],r=n[2],o=n[3],i=n[6],u=n[7],a=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=e,t[6]=n[9],t[7]=n[13],t[8]=r,t[9]=i,t[11]=n[14],t[12]=o,t[13]=u,t[14]=a}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t}function en(t,n){let e=n[0],r=n[1],o=n[2],i=n[3],u=n[4],a=n[5],s=n[6],c=n[7],f=n[8],l=n[9],p=n[10],h=n[11],d=n[12],y=n[13],m=n[14],_=n[15],g=e*a-r*u,v=e*s-o*u,E=e*c-i*u,T=r*s-o*a,b=r*c-i*a,A=o*c-i*s,M=f*y-l*d,R=f*m-p*d,S=f*_-h*d,N=l*m-p*y,O=l*_-h*y,I=p*_-h*m,F=g*I-v*O+E*N+T*S-b*R+A*M;return F?(F=1/F,t[0]=(a*I-s*O+c*N)*F,t[1]=(o*O-r*I-i*N)*F,t[2]=(y*A-m*b+_*T)*F,t[3]=(p*b-l*A-h*T)*F,t[4]=(s*S-u*I-c*R)*F,t[5]=(e*I-o*S+i*R)*F,t[6]=(m*E-d*A-_*v)*F,t[7]=(f*A-p*E+h*v)*F,t[8]=(u*O-a*S+c*M)*F,t[9]=(r*S-e*O-i*M)*F,t[10]=(d*b-y*E+_*g)*F,t[11]=(l*E-f*b-h*g)*F,t[12]=(a*R-u*N-s*M)*F,t[13]=(e*N-r*R+o*M)*F,t[14]=(y*v-d*T-m*g)*F,t[15]=(f*T-l*v+p*g)*F,t):null}function rn(t,n){let e=n[0],r=n[1],o=n[2],i=n[3],u=n[4],a=n[5],s=n[6],c=n[7],f=n[8],l=n[9],p=n[10],h=n[11],d=n[12],y=n[13],m=n[14],_=n[15];return t[0]=a*(p*_-h*m)-l*(s*_-c*m)+y*(s*h-c*p),t[1]=-(r*(p*_-h*m)-l*(o*_-i*m)+y*(o*h-i*p)),t[2]=r*(s*_-c*m)-a*(o*_-i*m)+y*(o*c-i*s),t[3]=-(r*(s*h-c*p)-a*(o*h-i*p)+l*(o*c-i*s)),t[4]=-(u*(p*_-h*m)-f*(s*_-c*m)+d*(s*h-c*p)),t[5]=e*(p*_-h*m)-f*(o*_-i*m)+d*(o*h-i*p),t[6]=-(e*(s*_-c*m)-u*(o*_-i*m)+d*(o*c-i*s)),t[7]=e*(s*h-c*p)-u*(o*h-i*p)+f*(o*c-i*s),t[8]=u*(l*_-h*y)-f*(a*_-c*y)+d*(a*h-c*l),t[9]=-(e*(l*_-h*y)-f*(r*_-i*y)+d*(r*h-i*l)),t[10]=e*(a*_-c*y)-u*(r*_-i*y)+d*(r*c-i*a),t[11]=-(e*(a*h-c*l)-u*(r*h-i*l)+f*(r*c-i*a)),t[12]=-(u*(l*m-p*y)-f*(a*m-s*y)+d*(a*p-s*l)),t[13]=e*(l*m-p*y)-f*(r*m-o*y)+d*(r*p-o*l),t[14]=-(e*(a*m-s*y)-u*(r*m-o*y)+d*(r*s-o*a)),t[15]=e*(a*p-s*l)-u*(r*p-o*l)+f*(r*s-o*a),t}function on(t){let n=t[0],e=t[1],r=t[2],o=t[3],i=t[4],u=t[5],a=t[6],s=t[7],c=t[8],f=t[9],l=t[10],p=t[11],h=t[12],d=t[13],y=t[14],m=t[15];return(n*u-e*i)*(l*m-p*y)-(n*a-r*i)*(f*m-p*d)+(n*s-o*i)*(f*y-l*d)+(e*a-r*u)*(c*m-p*h)-(e*s-o*u)*(c*y-l*h)+(r*s-o*a)*(c*d-f*h)}function un(t,n,e){let r=n[0],o=n[1],i=n[2],u=n[3],a=n[4],s=n[5],c=n[6],f=n[7],l=n[8],p=n[9],h=n[10],d=n[11],y=n[12],m=n[13],_=n[14],g=n[15],v=e[0],E=e[1],T=e[2],b=e[3];return t[0]=v*r+E*a+T*l+b*y,t[1]=v*o+E*s+T*p+b*m,t[2]=v*i+E*c+T*h+b*_,t[3]=v*u+E*f+T*d+b*g,v=e[4],E=e[5],T=e[6],b=e[7],t[4]=v*r+E*a+T*l+b*y,t[5]=v*o+E*s+T*p+b*m,t[6]=v*i+E*c+T*h+b*_,t[7]=v*u+E*f+T*d+b*g,v=e[8],E=e[9],T=e[10],b=e[11],t[8]=v*r+E*a+T*l+b*y,t[9]=v*o+E*s+T*p+b*m,t[10]=v*i+E*c+T*h+b*_,t[11]=v*u+E*f+T*d+b*g,v=e[12],E=e[13],T=e[14],b=e[15],t[12]=v*r+E*a+T*l+b*y,t[13]=v*o+E*s+T*p+b*m,t[14]=v*i+E*c+T*h+b*_,t[15]=v*u+E*f+T*d+b*g,t}function an(t,n,e){let r,o,i,u,a,s,c,f,l,p,h,d,y=e[0],m=e[1],_=e[2];return n===t?(t[12]=n[0]*y+n[4]*m+n[8]*_+n[12],t[13]=n[1]*y+n[5]*m+n[9]*_+n[13],t[14]=n[2]*y+n[6]*m+n[10]*_+n[14],t[15]=n[3]*y+n[7]*m+n[11]*_+n[15]):(r=n[0],o=n[1],i=n[2],u=n[3],a=n[4],s=n[5],c=n[6],f=n[7],l=n[8],p=n[9],h=n[10],d=n[11],t[0]=r,t[1]=o,t[2]=i,t[3]=u,t[4]=a,t[5]=s,t[6]=c,t[7]=f,t[8]=l,t[9]=p,t[10]=h,t[11]=d,t[12]=r*y+a*m+l*_+n[12],t[13]=o*y+s*m+p*_+n[13],t[14]=i*y+c*m+h*_+n[14],t[15]=u*y+f*m+d*_+n[15]),t}function sn(t,n,e){let r=e[0],o=e[1],i=e[2];return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*o,t[5]=n[5]*o,t[6]=n[6]*o,t[7]=n[7]*o,t[8]=n[8]*i,t[9]=n[9]*i,t[10]=n[10]*i,t[11]=n[11]*i,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function cn(t,n,e,r){let o,i,u,a,s,c,f,l,p,d,y,m,_,g,v,E,T,b,A,M,R,S,N,O,I=r[0],F=r[1],L=r[2],x=Math.sqrt(I*I+F*F+L*L);return x<h?null:(I*=x=1/x,F*=x,L*=x,o=Math.sin(e),u=1-(i=Math.cos(e)),a=n[0],s=n[1],c=n[2],f=n[3],l=n[4],p=n[5],d=n[6],y=n[7],m=n[8],_=n[9],g=n[10],v=n[11],E=I*I*u+i,T=F*I*u+L*o,b=L*I*u-F*o,A=I*F*u-L*o,M=F*F*u+i,R=L*F*u+I*o,S=I*L*u+F*o,N=F*L*u-I*o,O=L*L*u+i,t[0]=a*E+l*T+m*b,t[1]=s*E+p*T+_*b,t[2]=c*E+d*T+g*b,t[3]=f*E+y*T+v*b,t[4]=a*A+l*M+m*R,t[5]=s*A+p*M+_*R,t[6]=c*A+d*M+g*R,t[7]=f*A+y*M+v*R,t[8]=a*S+l*N+m*O,t[9]=s*S+p*N+_*O,t[10]=c*S+d*N+g*O,t[11]=f*S+y*N+v*O,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)}function fn(t,n,e){let r=Math.sin(e),o=Math.cos(e),i=n[4],u=n[5],a=n[6],s=n[7],c=n[8],f=n[9],l=n[10],p=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=i*o+c*r,t[5]=u*o+f*r,t[6]=a*o+l*r,t[7]=s*o+p*r,t[8]=c*o-i*r,t[9]=f*o-u*r,t[10]=l*o-a*r,t[11]=p*o-s*r,t}function ln(t,n,e){let r=Math.sin(e),o=Math.cos(e),i=n[0],u=n[1],a=n[2],s=n[3],c=n[8],f=n[9],l=n[10],p=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=i*o-c*r,t[1]=u*o-f*r,t[2]=a*o-l*r,t[3]=s*o-p*r,t[8]=i*r+c*o,t[9]=u*r+f*o,t[10]=a*r+l*o,t[11]=s*r+p*o,t}function pn(t,n,e){let r=Math.sin(e),o=Math.cos(e),i=n[0],u=n[1],a=n[2],s=n[3],c=n[4],f=n[5],l=n[6],p=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=i*o+c*r,t[1]=u*o+f*r,t[2]=a*o+l*r,t[3]=s*o+p*r,t[4]=c*o-i*r,t[5]=f*o-u*r,t[6]=l*o-a*r,t[7]=p*o-s*r,t}function hn(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function dn(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function yn(t,n,e){let r,o,i,u=e[0],a=e[1],s=e[2],c=Math.sqrt(u*u+a*a+s*s);return c<h?null:(u*=c=1/c,a*=c,s*=c,r=Math.sin(n),i=1-(o=Math.cos(n)),t[0]=u*u*i+o,t[1]=a*u*i+s*r,t[2]=s*u*i-a*r,t[3]=0,t[4]=u*a*i-s*r,t[5]=a*a*i+o,t[6]=s*a*i+u*r,t[7]=0,t[8]=u*s*i+a*r,t[9]=a*s*i-u*r,t[10]=s*s*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function mn(t,n){let e=Math.sin(n),r=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _n(t,n){let e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function gn(t,n){let e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function vn(t,n,e){let r=n[0],o=n[1],i=n[2],u=n[3],a=r+r,s=o+o,c=i+i,f=r*a,l=r*s,p=r*c,h=o*s,d=o*c,y=i*c,m=u*a,_=u*s,g=u*c;return t[0]=1-(h+y),t[1]=l+g,t[2]=p-_,t[3]=0,t[4]=l-g,t[5]=1-(f+y),t[6]=d+m,t[7]=0,t[8]=p+_,t[9]=d-m,t[10]=1-(f+h),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function En(t,n){let e=new d(3),r=-n[0],o=-n[1],i=-n[2],u=n[3],a=n[4],s=n[5],c=n[6],f=n[7],l=r*r+o*o+i*i+u*u;return l>0?(e[0]=2*(a*u+f*r+s*i-c*o)/l,e[1]=2*(s*u+f*o+c*r-a*i)/l,e[2]=2*(c*u+f*i+a*o-s*r)/l):(e[0]=2*(a*u+f*r+s*i-c*o),e[1]=2*(s*u+f*o+c*r-a*i),e[2]=2*(c*u+f*i+a*o-s*r)),vn(t,n,e),t}function Tn(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function bn(t,n){let e=n[0],r=n[1],o=n[2],i=n[4],u=n[5],a=n[6],s=n[8],c=n[9],f=n[10];return t[0]=Math.sqrt(e*e+r*r+o*o),t[1]=Math.sqrt(i*i+u*u+a*a),t[2]=Math.sqrt(s*s+c*c+f*f),t}function An(t,n){let e=n[0]+n[5]+n[10],r=0;return e>0?(r=2*Math.sqrt(e+1),t[3]=.25*r,t[0]=(n[6]-n[9])/r,t[1]=(n[8]-n[2])/r,t[2]=(n[1]-n[4])/r):n[0]>n[5]&&n[0]>n[10]?(r=2*Math.sqrt(1+n[0]-n[5]-n[10]),t[3]=(n[6]-n[9])/r,t[0]=.25*r,t[1]=(n[1]+n[4])/r,t[2]=(n[8]+n[2])/r):n[5]>n[10]?(r=2*Math.sqrt(1+n[5]-n[0]-n[10]),t[3]=(n[8]-n[2])/r,t[0]=(n[1]+n[4])/r,t[1]=.25*r,t[2]=(n[6]+n[9])/r):(r=2*Math.sqrt(1+n[10]-n[0]-n[5]),t[3]=(n[1]-n[4])/r,t[0]=(n[8]+n[2])/r,t[1]=(n[6]+n[9])/r,t[2]=.25*r),t}function Mn(t,n,e,r){let o=n[0],i=n[1],u=n[2],a=n[3],s=o+o,c=i+i,f=u+u,l=o*s,p=o*c,h=o*f,d=i*c,y=i*f,m=u*f,_=a*s,g=a*c,v=a*f,E=r[0],T=r[1],b=r[2];return t[0]=(1-(d+m))*E,t[1]=(p+v)*E,t[2]=(h-g)*E,t[3]=0,t[4]=(p-v)*T,t[5]=(1-(l+m))*T,t[6]=(y+_)*T,t[7]=0,t[8]=(h+g)*b,t[9]=(y-_)*b,t[10]=(1-(l+d))*b,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function Rn(t,n,e,r,o){let i=n[0],u=n[1],a=n[2],s=n[3],c=i+i,f=u+u,l=a+a,p=i*c,h=i*f,d=i*l,y=u*f,m=u*l,_=a*l,g=s*c,v=s*f,E=s*l,T=r[0],b=r[1],A=r[2],M=o[0],R=o[1],S=o[2],N=(1-(y+_))*T,O=(h+E)*T,I=(d-v)*T,F=(h-E)*b,L=(1-(p+_))*b,x=(m+g)*b,C=(d+v)*A,P=(m-g)*A,w=(1-(p+y))*A;return t[0]=N,t[1]=O,t[2]=I,t[3]=0,t[4]=F,t[5]=L,t[6]=x,t[7]=0,t[8]=C,t[9]=P,t[10]=w,t[11]=0,t[12]=e[0]+M-(N*M+F*R+C*S),t[13]=e[1]+R-(O*M+L*R+P*S),t[14]=e[2]+S-(I*M+x*R+w*S),t[15]=1,t}function Sn(t,n){let e=n[0],r=n[1],o=n[2],i=n[3],u=e+e,a=r+r,s=o+o,c=e*u,f=r*u,l=r*a,p=o*u,h=o*a,d=o*s,y=i*u,m=i*a,_=i*s;return t[0]=1-l-d,t[1]=f+_,t[2]=p-m,t[3]=0,t[4]=f-_,t[5]=1-c-d,t[6]=h+y,t[7]=0,t[8]=p+m,t[9]=h-y,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Nn(t,n,e,r,o,i,u){let a=1/(e-n),s=1/(o-r),c=1/(i-u);return t[0]=2*i*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*s,t[6]=0,t[7]=0,t[8]=(e+n)*a,t[9]=(o+r)*s,t[10]=(u+i)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=u*i*2*c,t[15]=0,t}function On(t,n,e,r,o){let i,u=1/Math.tan(n/2);return t[0]=u/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(i=1/(r-o),t[10]=(o+r)*i,t[14]=2*o*r*i):(t[10]=-1,t[14]=-2*r),t}function In(t,n,e,r){let o=Math.tan(n.upDegrees*Math.PI/180),i=Math.tan(n.downDegrees*Math.PI/180),u=Math.tan(n.leftDegrees*Math.PI/180),a=Math.tan(n.rightDegrees*Math.PI/180),s=2/(u+a),c=2/(o+i);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(u-a)*s*.5,t[9]=(o-i)*c*.5,t[10]=r/(e-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*e/(e-r),t[15]=0,t}function Fn(t,n,e,r,o,i,u){let a=1/(n-e),s=1/(r-o),c=1/(i-u);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(n+e)*a,t[13]=(o+r)*s,t[14]=(u+i)*c,t[15]=1,t}function Ln(t,n,e,r){let o,i,u,a,s,c,f,l,p,d,y=n[0],m=n[1],_=n[2],g=r[0],v=r[1],E=r[2],T=e[0],b=e[1],A=e[2];return Math.abs(y-T)<h&&Math.abs(m-b)<h&&Math.abs(_-A)<h?tn(t):(f=y-T,l=m-b,p=_-A,o=v*(p*=d=1/Math.sqrt(f*f+l*l+p*p))-E*(l*=d),i=E*(f*=d)-g*p,u=g*l-v*f,(d=Math.sqrt(o*o+i*i+u*u))?(o*=d=1/d,i*=d,u*=d):(o=0,i=0,u=0),a=l*u-p*i,s=p*o-f*u,c=f*i-l*o,(d=Math.sqrt(a*a+s*s+c*c))?(a*=d=1/d,s*=d,c*=d):(a=0,s=0,c=0),t[0]=o,t[1]=a,t[2]=f,t[3]=0,t[4]=i,t[5]=s,t[6]=l,t[7]=0,t[8]=u,t[9]=c,t[10]=p,t[11]=0,t[12]=-(o*y+i*m+u*_),t[13]=-(a*y+s*m+c*_),t[14]=-(f*y+l*m+p*_),t[15]=1,t)}function xn(t,n,e,r){let o=n[0],i=n[1],u=n[2],a=r[0],s=r[1],c=r[2],f=o-e[0],l=i-e[1],p=u-e[2],h=f*f+l*l+p*p;h>0&&(f*=h=1/Math.sqrt(h),l*=h,p*=h);let d=s*p-c*l,y=c*f-a*p,m=a*l-s*f;return(h=d*d+y*y+m*m)>0&&(d*=h=1/Math.sqrt(h),y*=h,m*=h),t[0]=d,t[1]=y,t[2]=m,t[3]=0,t[4]=l*m-p*y,t[5]=p*d-f*m,t[6]=f*y-l*d,t[7]=0,t[8]=f,t[9]=l,t[10]=p,t[11]=0,t[12]=o,t[13]=i,t[14]=u,t[15]=1,t}function Cn(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Pn(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function wn(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t[8]=n[8]+e[8],t[9]=n[9]+e[9],t[10]=n[10]+e[10],t[11]=n[11]+e[11],t[12]=n[12]+e[12],t[13]=n[13]+e[13],t[14]=n[14]+e[14],t[15]=n[15]+e[15],t}function Un(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t[6]=n[6]-e[6],t[7]=n[7]-e[7],t[8]=n[8]-e[8],t[9]=n[9]-e[9],t[10]=n[10]-e[10],t[11]=n[11]-e[11],t[12]=n[12]-e[12],t[13]=n[13]-e[13],t[14]=n[14]-e[14],t[15]=n[15]-e[15],t}function Bn(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*e,t[9]=n[9]*e,t[10]=n[10]*e,t[11]=n[11]*e,t[12]=n[12]*e,t[13]=n[13]*e,t[14]=n[14]*e,t[15]=n[15]*e,t}function jn(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t[6]=n[6]+e[6]*r,t[7]=n[7]+e[7]*r,t[8]=n[8]+e[8]*r,t[9]=n[9]+e[9]*r,t[10]=n[10]+e[10]*r,t[11]=n[11]+e[11]*r,t[12]=n[12]+e[12]*r,t[13]=n[13]+e[13]*r,t[14]=n[14]+e[14]*r,t[15]=n[15]+e[15]*r,t}function Dn(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]}function kn(t,n){let e=t[0],r=t[1],o=t[2],i=t[3],u=t[4],a=t[5],s=t[6],c=t[7],f=t[8],l=t[9],p=t[10],d=t[11],y=t[12],m=t[13],_=t[14],g=t[15],v=n[0],E=n[1],T=n[2],b=n[3],A=n[4],M=n[5],R=n[6],S=n[7],N=n[8],O=n[9],I=n[10],F=n[11],L=n[12],x=n[13],C=n[14],P=n[15];return Math.abs(e-v)<=h*Math.max(1,Math.abs(e),Math.abs(v))&&Math.abs(r-E)<=h*Math.max(1,Math.abs(r),Math.abs(E))&&Math.abs(o-T)<=h*Math.max(1,Math.abs(o),Math.abs(T))&&Math.abs(i-b)<=h*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(u-A)<=h*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(a-M)<=h*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(s-R)<=h*Math.max(1,Math.abs(s),Math.abs(R))&&Math.abs(c-S)<=h*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(f-N)<=h*Math.max(1,Math.abs(f),Math.abs(N))&&Math.abs(l-O)<=h*Math.max(1,Math.abs(l),Math.abs(O))&&Math.abs(p-I)<=h*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(d-F)<=h*Math.max(1,Math.abs(d),Math.abs(F))&&Math.abs(y-L)<=h*Math.max(1,Math.abs(y),Math.abs(L))&&Math.abs(m-x)<=h*Math.max(1,Math.abs(m),Math.abs(x))&&Math.abs(_-C)<=h*Math.max(1,Math.abs(_),Math.abs(C))&&Math.abs(g-P)<=h*Math.max(1,Math.abs(g),Math.abs(P))}const Vn=un,Gn=Un;function Hn(){let t=new d(3);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function qn(t){var n=new d(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n}function Xn(t){let n=t[0],e=t[1],r=t[2];return Math.sqrt(n*n+e*e+r*r)}function Wn(t,n,e){let r=new d(3);return r[0]=t,r[1]=n,r[2]=e,r}function zn(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function $n(t,n,e,r){return t[0]=n,t[1]=e,t[2]=r,t}function Yn(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t}function Kn(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t}function Jn(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t}function Zn(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t}function Qn(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t}function te(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t}function ne(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t}function ee(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t}function re(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t}function oe(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t}function ie(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t}function ue(t,n){let e=n[0]-t[0],r=n[1]-t[1],o=n[2]-t[2];return Math.sqrt(e*e+r*r+o*o)}function ae(t,n){let e=n[0]-t[0],r=n[1]-t[1],o=n[2]-t[2];return e*e+r*r+o*o}function se(t){let n=t[0],e=t[1],r=t[2];return n*n+e*e+r*r}function ce(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t}function fe(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t}function le(t,n){let e=n[0],r=n[1],o=n[2],i=e*e+r*r+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i),t}function pe(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function he(t,n,e){let r=n[0],o=n[1],i=n[2],u=e[0],a=e[1],s=e[2];return t[0]=o*s-i*a,t[1]=i*u-r*s,t[2]=r*a-o*u,t}function de(t,n,e,r){let o=n[0],i=n[1],u=n[2];return t[0]=o+r*(e[0]-o),t[1]=i+r*(e[1]-i),t[2]=u+r*(e[2]-u),t}function ye(t,n,e,r,o,i){let u=i*i,a=u*(2*i-3)+1,s=u*(i-2)+i,c=u*(i-1),f=u*(3-2*i);return t[0]=n[0]*a+e[0]*s+r[0]*c+o[0]*f,t[1]=n[1]*a+e[1]*s+r[1]*c+o[1]*f,t[2]=n[2]*a+e[2]*s+r[2]*c+o[2]*f,t}function me(t,n,e,r,o,i){let u=1-i,a=u*u,s=i*i,c=a*u,f=3*i*a,l=3*s*u,p=s*i;return t[0]=n[0]*c+e[0]*f+r[0]*l+o[0]*p,t[1]=n[1]*c+e[1]*f+r[1]*l+o[1]*p,t[2]=n[2]*c+e[2]*f+r[2]*l+o[2]*p,t}function _e(t,n){n=n||1;let e=2*y()*Math.PI,r=2*y()-1,o=Math.sqrt(1-r*r)*n;return t[0]=Math.cos(e)*o,t[1]=Math.sin(e)*o,t[2]=r*n,t}function ge(t,n,e){let r=n[0],o=n[1],i=n[2],u=e[3]*r+e[7]*o+e[11]*i+e[15];return u=u||1,t[0]=(e[0]*r+e[4]*o+e[8]*i+e[12])/u,t[1]=(e[1]*r+e[5]*o+e[9]*i+e[13])/u,t[2]=(e[2]*r+e[6]*o+e[10]*i+e[14])/u,t}function ve(t,n,e){let r=n[0],o=n[1],i=n[2];return t[0]=r*e[0]+o*e[3]+i*e[6],t[1]=r*e[1]+o*e[4]+i*e[7],t[2]=r*e[2]+o*e[5]+i*e[8],t}function Ee(t,n,e){let r=e[0],o=e[1],i=e[2],u=e[3],a=n[0],s=n[1],c=n[2],f=o*c-i*s,l=i*a-r*c,p=r*s-o*a,h=o*p-i*l,d=i*f-r*p,y=r*l-o*f,m=2*u;return f*=m,l*=m,p*=m,h*=2,d*=2,y*=2,t[0]=a+f+h,t[1]=s+l+d,t[2]=c+p+y,t}function Te(t,n,e,r){let o=[],i=[];return o[0]=n[0]-e[0],o[1]=n[1]-e[1],o[2]=n[2]-e[2],i[0]=o[0],i[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),i[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),t[0]=i[0]+e[0],t[1]=i[1]+e[1],t[2]=i[2]+e[2],t}function be(t,n,e,r){let o=[],i=[];return o[0]=n[0]-e[0],o[1]=n[1]-e[1],o[2]=n[2]-e[2],i[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),i[1]=o[1],i[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),t[0]=i[0]+e[0],t[1]=i[1]+e[1],t[2]=i[2]+e[2],t}function Ae(t,n,e,r){let o=[],i=[];return o[0]=n[0]-e[0],o[1]=n[1]-e[1],o[2]=n[2]-e[2],i[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),i[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),i[2]=o[2],t[0]=i[0]+e[0],t[1]=i[1]+e[1],t[2]=i[2]+e[2],t}function Me(t,n){let e=Wn(t[0],t[1],t[2]),r=Wn(n[0],n[1],n[2]);le(e,e),le(r,r);let o=pe(e,r);return o>1?0:o<-1?Math.PI:Math.acos(o)}function Re(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Se(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]}function Ne(t,n){let e=t[0],r=t[1],o=t[2],i=n[0],u=n[1],a=n[2];return Math.abs(e-i)<=h*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(r-u)<=h*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(o-a)<=h*Math.max(1,Math.abs(o),Math.abs(a))}const Oe=Kn,Ie=Jn,Fe=Zn,Le=ue,xe=ae,Ce=Xn,Pe=se,we=function(){let t=Hn();return function(n,e,r,o,i,u){let a,s;for(e||(e=3),r||(r=0),s=o?Math.min(o*e+r,n.length):n.length,a=r;a<s;a+=e)t[0]=n[a],t[1]=n[a+1],t[2]=n[a+2],i(t,t,u),n[a]=t[0],n[a+1]=t[1],n[a+2]=t[2];return n}}();function Ue(){let t=new d(4);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Be(t){let n=new d(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}function je(t,n,e,r){let o=new d(4);return o[0]=t,o[1]=n,o[2]=e,o[3]=r,o}function De(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function ke(t,n,e,r,o){return t[0]=n,t[1]=e,t[2]=r,t[3]=o,t}function Ve(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t}function Ge(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t}function He(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t[3]=n[3]*e[3],t}function qe(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t[3]=n[3]/e[3],t}function Xe(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t[3]=Math.ceil(n[3]),t}function We(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t[3]=Math.floor(n[3]),t}function ze(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t[3]=Math.min(n[3],e[3]),t}function $e(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t[3]=Math.max(n[3],e[3]),t}function Ye(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t[3]=Math.round(n[3]),t}function Ke(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t}function Je(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t}function Ze(t,n){let e=n[0]-t[0],r=n[1]-t[1],o=n[2]-t[2],i=n[3]-t[3];return Math.sqrt(e*e+r*r+o*o+i*i)}function Qe(t,n){let e=n[0]-t[0],r=n[1]-t[1],o=n[2]-t[2],i=n[3]-t[3];return e*e+r*r+o*o+i*i}function tr(t){let n=t[0],e=t[1],r=t[2],o=t[3];return Math.sqrt(n*n+e*e+r*r+o*o)}function nr(t){let n=t[0],e=t[1],r=t[2],o=t[3];return n*n+e*e+r*r+o*o}function er(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t}function rr(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t[3]=1/n[3],t}function or(t,n){let e=n[0],r=n[1],o=n[2],i=n[3],u=e*e+r*r+o*o+i*i;return u>0&&(u=1/Math.sqrt(u),t[0]=e*u,t[1]=r*u,t[2]=o*u,t[3]=i*u),t}function ir(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}function ur(t,n,e,r){let o=n[0],i=n[1],u=n[2],a=n[3];return t[0]=o+r*(e[0]-o),t[1]=i+r*(e[1]-i),t[2]=u+r*(e[2]-u),t[3]=a+r*(e[3]-a),t}function ar(t,n){var e,r,o,i,u,a;n=n||1;do{u=(e=2*y()-1)*e+(r=2*y()-1)*r}while(u>=1);do{a=(o=2*y()-1)*o+(i=2*y()-1)*i}while(a>=1);var s=Math.sqrt((1-u)/a);return t[0]=n*e,t[1]=n*r,t[2]=n*o*s,t[3]=n*i*s,t}function sr(t,n,e){let r=n[0],o=n[1],i=n[2],u=n[3];return t[0]=e[0]*r+e[4]*o+e[8]*i+e[12]*u,t[1]=e[1]*r+e[5]*o+e[9]*i+e[13]*u,t[2]=e[2]*r+e[6]*o+e[10]*i+e[14]*u,t[3]=e[3]*r+e[7]*o+e[11]*i+e[15]*u,t}function cr(t,n,e){let r=n[0],o=n[1],i=n[2],u=e[0],a=e[1],s=e[2],c=e[3],f=c*r+a*i-s*o,l=c*o+s*r-u*i,p=c*i+u*o-a*r,h=-u*r-a*o-s*i;return t[0]=f*c+h*-u+l*-s-p*-a,t[1]=l*c+h*-a+p*-u-f*-s,t[2]=p*c+h*-s+f*-a-l*-u,t[3]=n[3],t}function fr(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function lr(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]}function pr(t,n){let e=t[0],r=t[1],o=t[2],i=t[3],u=n[0],a=n[1],s=n[2],c=n[3];return Math.abs(e-u)<=h*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(r-a)<=h*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(o-s)<=h*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-c)<=h*Math.max(1,Math.abs(i),Math.abs(c))}const hr=Ge,dr=He,yr=qe,mr=Ze,_r=Qe,gr=tr,vr=nr,Er=function(){let t=Ue();return function(n,e,r,o,i,u){let a,s;for(e||(e=4),r||(r=0),s=o?Math.min(o*e+r,n.length):n.length,a=r;a<s;a+=e)t[0]=n[a],t[1]=n[a+1],t[2]=n[a+2],t[3]=n[a+3],i(t,t,u),n[a]=t[0],n[a+1]=t[1],n[a+2]=t[2],n[a+3]=t[3];return n}}();function Tr(){let t=new d(4);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function br(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Ar(t,n,e){e*=.5;let r=Math.sin(e);return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=Math.cos(e),t}function Mr(t,n){let e=2*Math.acos(n[3]),r=Math.sin(e/2);return r>h?(t[0]=n[0]/r,t[1]=n[1]/r,t[2]=n[2]/r):(t[0]=1,t[1]=0,t[2]=0),e}function Rr(t,n,e){let r=n[0],o=n[1],i=n[2],u=n[3],a=e[0],s=e[1],c=e[2],f=e[3];return t[0]=r*f+u*a+o*c-i*s,t[1]=o*f+u*s+i*a-r*c,t[2]=i*f+u*c+r*s-o*a,t[3]=u*f-r*a-o*s-i*c,t}function Sr(t,n,e){e*=.5;let r=n[0],o=n[1],i=n[2],u=n[3],a=Math.sin(e),s=Math.cos(e);return t[0]=r*s+u*a,t[1]=o*s+i*a,t[2]=i*s-o*a,t[3]=u*s-r*a,t}function Nr(t,n,e){e*=.5;let r=n[0],o=n[1],i=n[2],u=n[3],a=Math.sin(e),s=Math.cos(e);return t[0]=r*s-i*a,t[1]=o*s+u*a,t[2]=i*s+r*a,t[3]=u*s-o*a,t}function Or(t,n,e){e*=.5;let r=n[0],o=n[1],i=n[2],u=n[3],a=Math.sin(e),s=Math.cos(e);return t[0]=r*s+o*a,t[1]=o*s-r*a,t[2]=i*s+u*a,t[3]=u*s-i*a,t}function Ir(t,n){let e=n[0],r=n[1],o=n[2];return t[0]=e,t[1]=r,t[2]=o,t[3]=Math.sqrt(Math.abs(1-e*e-r*r-o*o)),t}function Fr(t,n,e,r){let o,i,u,a,s,c=n[0],f=n[1],l=n[2],p=n[3],d=e[0],y=e[1],m=e[2],_=e[3];return(i=c*d+f*y+l*m+p*_)<0&&(i=-i,d=-d,y=-y,m=-m,_=-_),1-i>h?(o=Math.acos(i),u=Math.sin(o),a=Math.sin((1-r)*o)/u,s=Math.sin(r*o)/u):(a=1-r,s=r),t[0]=a*c+s*d,t[1]=a*f+s*y,t[2]=a*l+s*m,t[3]=a*p+s*_,t}function Lr(t){let n=y(),e=y(),r=y(),o=Math.sqrt(1-n),i=Math.sqrt(n);return t[0]=o*Math.sin(2*Math.PI*e),t[1]=o*Math.cos(2*Math.PI*e),t[2]=i*Math.sin(2*Math.PI*r),t[3]=i*Math.cos(2*Math.PI*r),t}function xr(t,n){let e=n[0],r=n[1],o=n[2],i=n[3],u=e*e+r*r+o*o+i*i,a=u?1/u:0;return t[0]=-e*a,t[1]=-r*a,t[2]=-o*a,t[3]=i*a,t}function Cr(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t}function Pr(t,n){let e,r=n[0]+n[4]+n[8];if(r>0)e=Math.sqrt(r+1),t[3]=.5*e,e=.5/e,t[0]=(n[5]-n[7])*e,t[1]=(n[6]-n[2])*e,t[2]=(n[1]-n[3])*e;else{let r=0;n[4]>n[0]&&(r=1),n[8]>n[3*r+r]&&(r=2);let o=(r+1)%3,i=(r+2)%3;e=Math.sqrt(n[3*r+r]-n[3*o+o]-n[3*i+i]+1),t[r]=.5*e,e=.5/e,t[3]=(n[3*o+i]-n[3*i+o])*e,t[o]=(n[3*o+r]+n[3*r+o])*e,t[i]=(n[3*i+r]+n[3*r+i])*e}return t}function wr(t,n,e,r){let o=.5*Math.PI/180;n*=o,e*=o,r*=o;let i=Math.sin(n),u=Math.cos(n),a=Math.sin(e),s=Math.cos(e),c=Math.sin(r),f=Math.cos(r);return t[0]=i*s*f-u*a*c,t[1]=u*a*f+i*s*c,t[2]=u*s*c-i*a*f,t[3]=u*s*f+i*a*c,t}function Ur(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}const Br=Be,jr=je,Dr=De,kr=ke,Vr=Ve,Gr=Rr,Hr=Ke,qr=ir,Xr=ur,Wr=tr,zr=Wr,$r=nr,Yr=$r,Kr=or,Jr=lr,Zr=pr,Qr=function(){let t=Hn(),n=Wn(1,0,0),e=Wn(0,1,0);return function(r,o,i){let u=pe(o,i);return u<-.999999?(he(t,n,o),Ce(t)<1e-6&&he(t,e,o),le(t,t),Ar(r,t,Math.PI),r):u>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(he(t,o,i),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+u,Kr(r,r))}}(),to=function(){let t=Tr(),n=Tr();return function(e,r,o,i,u,a){return Fr(t,r,u,a),Fr(n,o,i,a),Fr(e,t,n,2*a*(1-a)),e}}(),no=function(){let t=_t();return function(n,e,r,o){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=o[0],t[4]=o[1],t[7]=o[2],t[2]=-e[0],t[5]=-e[1],t[8]=-e[2],Kr(n,Pr(n,t))}}();function eo(){let t=new d(8);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function ro(t){let n=new d(8);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n}function oo(t,n,e,r,o,i,u,a){let s=new d(8);return s[0]=t,s[1]=n,s[2]=e,s[3]=r,s[4]=o,s[5]=i,s[6]=u,s[7]=a,s}function io(t,n,e,r,o,i,u){let a=new d(8);a[0]=t,a[1]=n,a[2]=e,a[3]=r;let s=.5*o,c=.5*i,f=.5*u;return a[4]=s*r+c*e-f*n,a[5]=c*r+f*t-s*e,a[6]=f*r+s*n-c*t,a[7]=-s*t-c*n-f*e,a}function uo(t,n,e){let r=.5*e[0],o=.5*e[1],i=.5*e[2],u=n[0],a=n[1],s=n[2],c=n[3];return t[0]=u,t[1]=a,t[2]=s,t[3]=c,t[4]=r*c+o*s-i*a,t[5]=o*c+i*u-r*s,t[6]=i*c+r*a-o*u,t[7]=-r*u-o*a-i*s,t}function ao(t,n){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*n[0],t[5]=.5*n[1],t[6]=.5*n[2],t[7]=0,t}function so(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function co(t,n){let e=Tr();An(e,n);let r=new d(3);return Tn(r,n),uo(t,e,r),t}function fo(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t}function lo(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function po(t,n,e,r,o,i,u,a,s){return t[0]=n,t[1]=e,t[2]=r,t[3]=o,t[4]=i,t[5]=u,t[6]=a,t[7]=s,t}const ho=Dr;function yo(t,n){return t[0]=n[4],t[1]=n[5],t[2]=n[6],t[3]=n[7],t}const mo=Dr;function _o(t,n){return t[4]=n[0],t[5]=n[1],t[6]=n[2],t[7]=n[3],t}function go(t,n){let e=n[4],r=n[5],o=n[6],i=n[7],u=-n[0],a=-n[1],s=-n[2],c=n[3];return t[0]=2*(e*c+i*u+r*s-o*a),t[1]=2*(r*c+i*a+o*u-e*s),t[2]=2*(o*c+i*s+e*a-r*u),t}function vo(t,n,e){let r=n[0],o=n[1],i=n[2],u=n[3],a=.5*e[0],s=.5*e[1],c=.5*e[2],f=n[4],l=n[5],p=n[6],h=n[7];return t[0]=r,t[1]=o,t[2]=i,t[3]=u,t[4]=u*a+o*c-i*s+f,t[5]=u*s+i*a-r*c+l,t[6]=u*c+r*s-o*a+p,t[7]=-r*a-o*s-i*c+h,t}function Eo(t,n,e){let r=-n[0],o=-n[1],i=-n[2],u=n[3],a=n[4],s=n[5],c=n[6],f=n[7],l=a*u+f*r+s*i-c*o,p=s*u+f*o+c*r-a*i,h=c*u+f*i+a*o-s*r,d=f*u-a*r-s*o-c*i;return Sr(t,n,e),r=t[0],o=t[1],i=t[2],u=t[3],t[4]=l*u+d*r+p*i-h*o,t[5]=p*u+d*o+h*r-l*i,t[6]=h*u+d*i+l*o-p*r,t[7]=d*u-l*r-p*o-h*i,t}function To(t,n,e){let r=-n[0],o=-n[1],i=-n[2],u=n[3],a=n[4],s=n[5],c=n[6],f=n[7],l=a*u+f*r+s*i-c*o,p=s*u+f*o+c*r-a*i,h=c*u+f*i+a*o-s*r,d=f*u-a*r-s*o-c*i;return Nr(t,n,e),r=t[0],o=t[1],i=t[2],u=t[3],t[4]=l*u+d*r+p*i-h*o,t[5]=p*u+d*o+h*r-l*i,t[6]=h*u+d*i+l*o-p*r,t[7]=d*u-l*r-p*o-h*i,t}function bo(t,n,e){let r=-n[0],o=-n[1],i=-n[2],u=n[3],a=n[4],s=n[5],c=n[6],f=n[7],l=a*u+f*r+s*i-c*o,p=s*u+f*o+c*r-a*i,h=c*u+f*i+a*o-s*r,d=f*u-a*r-s*o-c*i;return Or(t,n,e),r=t[0],o=t[1],i=t[2],u=t[3],t[4]=l*u+d*r+p*i-h*o,t[5]=p*u+d*o+h*r-l*i,t[6]=h*u+d*i+l*o-p*r,t[7]=d*u-l*r-p*o-h*i,t}function Ao(t,n,e){let r=e[0],o=e[1],i=e[2],u=e[3],a=n[0],s=n[1],c=n[2],f=n[3];return t[0]=a*u+f*r+s*i-c*o,t[1]=s*u+f*o+c*r-a*i,t[2]=c*u+f*i+a*o-s*r,t[3]=f*u-a*r-s*o-c*i,a=n[4],s=n[5],c=n[6],f=n[7],t[4]=a*u+f*r+s*i-c*o,t[5]=s*u+f*o+c*r-a*i,t[6]=c*u+f*i+a*o-s*r,t[7]=f*u-a*r-s*o-c*i,t}function Mo(t,n,e){let r=n[0],o=n[1],i=n[2],u=n[3],a=e[0],s=e[1],c=e[2],f=e[3];return t[0]=r*f+u*a+o*c-i*s,t[1]=o*f+u*s+i*a-r*c,t[2]=i*f+u*c+r*s-o*a,t[3]=u*f-r*a-o*s-i*c,a=e[4],s=e[5],c=e[6],f=e[7],t[4]=r*f+u*a+o*c-i*s,t[5]=o*f+u*s+i*a-r*c,t[6]=i*f+u*c+r*s-o*a,t[7]=u*f-r*a-o*s-i*c,t}function Ro(t,n,e,r){if(Math.abs(r)<h)return fo(t,n);let o=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);r*=.5;let i=Math.sin(r),u=i*e[0]/o,a=i*e[1]/o,s=i*e[2]/o,c=Math.cos(r),f=n[0],l=n[1],p=n[2],d=n[3];t[0]=f*c+d*u+l*s-p*a,t[1]=l*c+d*a+p*u-f*s,t[2]=p*c+d*s+f*a-l*u,t[3]=d*c-f*u-l*a-p*s;let y=n[4],m=n[5],_=n[6],g=n[7];return t[4]=y*c+g*u+m*s-_*a,t[5]=m*c+g*a+_*u-y*s,t[6]=_*c+g*s+y*a-m*u,t[7]=g*c-y*u-m*a-_*s,t}function So(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t}function No(t,n,e){let r=n[0],o=n[1],i=n[2],u=n[3],a=e[4],s=e[5],c=e[6],f=e[7],l=n[4],p=n[5],h=n[6],d=n[7],y=e[0],m=e[1],_=e[2],g=e[3];return t[0]=r*g+u*y+o*_-i*m,t[1]=o*g+u*m+i*y-r*_,t[2]=i*g+u*_+r*m-o*y,t[3]=u*g-r*y-o*m-i*_,t[4]=r*f+u*a+o*c-i*s+l*g+d*y+p*_-h*m,t[5]=o*f+u*s+i*a-r*c+p*g+d*m+h*y-l*_,t[6]=i*f+u*c+r*s-o*a+h*g+d*_+l*m-p*y,t[7]=u*f-r*a-o*s-i*c+d*g-l*y-p*m-h*_,t}const Oo=No;function Io(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t}const Fo=qr;function Lo(t,n,e,r){let o=1-r;return Fo(n,e)<0&&(r=-r),t[0]=n[0]*o+e[0]*r,t[1]=n[1]*o+e[1]*r,t[2]=n[2]*o+e[2]*r,t[3]=n[3]*o+e[3]*r,t[4]=n[4]*o+e[4]*r,t[5]=n[5]*o+e[5]*r,t[6]=n[6]*o+e[6]*r,t[7]=n[7]*o+e[7]*r,t}function xo(t,n){let e=Uo(n);return t[0]=-n[0]/e,t[1]=-n[1]/e,t[2]=-n[2]/e,t[3]=n[3]/e,t[4]=-n[4]/e,t[5]=-n[5]/e,t[6]=-n[6]/e,t[7]=n[7]/e,t}function Co(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t[4]=-n[4],t[5]=-n[5],t[6]=-n[6],t[7]=n[7],t}const Po=Wr,wo=Po,Uo=$r,Bo=Uo;function jo(t,n){let e=Uo(n);if(e>0){e=Math.sqrt(e);let r=n[0]/e,o=n[1]/e,i=n[2]/e,u=n[3]/e,a=n[4],s=n[5],c=n[6],f=n[7],l=r*a+o*s+i*c+u*f;t[0]=r,t[1]=o,t[2]=i,t[3]=u,t[4]=(a-r*l)/e,t[5]=(s-o*l)/e,t[6]=(c-i*l)/e,t[7]=(f-u*l)/e}return t}function Do(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function ko(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]}function Vo(t,n){let e=t[0],r=t[1],o=t[2],i=t[3],u=t[4],a=t[5],s=t[6],c=t[7],f=n[0],l=n[1],p=n[2],d=n[3],y=n[4],m=n[5],_=n[6],g=n[7];return Math.abs(e-f)<=h*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(r-l)<=h*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(o-p)<=h*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(i-d)<=h*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(u-y)<=h*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(a-m)<=h*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(s-_)<=h*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(c-g)<=h*Math.max(1,Math.abs(c),Math.abs(g))}function Go(){let t=new d(2);return d!=Float32Array&&(t[0]=0,t[1]=0),t}function Ho(t){let n=new d(2);return n[0]=t[0],n[1]=t[1],n}function qo(t,n){let e=new d(2);return e[0]=t,e[1]=n,e}function Xo(t,n){return t[0]=n[0],t[1]=n[1],t}function Wo(t,n,e){return t[0]=n,t[1]=e,t}function zo(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t}function $o(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t}function Yo(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t}function Ko(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t}function Jo(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t}function Zo(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t}function Qo(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t}function ti(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t}function ni(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t}function ei(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t}function ri(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t}function oi(t,n){var e=n[0]-t[0],r=n[1]-t[1];return Math.sqrt(e*e+r*r)}function ii(t,n){var e=n[0]-t[0],r=n[1]-t[1];return e*e+r*r}function ui(t){var n=t[0],e=t[1];return Math.sqrt(n*n+e*e)}function ai(t){var n=t[0],e=t[1];return n*n+e*e}function si(t,n){return t[0]=-n[0],t[1]=-n[1],t}function ci(t,n){return t[0]=1/n[0],t[1]=1/n[1],t}function fi(t,n){var e=n[0],r=n[1],o=e*e+r*r;return o>0&&(o=1/Math.sqrt(o),t[0]=n[0]*o,t[1]=n[1]*o),t}function li(t,n){return t[0]*n[0]+t[1]*n[1]}function pi(t,n,e){var r=n[0]*e[1]-n[1]*e[0];return t[0]=t[1]=0,t[2]=r,t}function hi(t,n,e,r){var o=n[0],i=n[1];return t[0]=o+r*(e[0]-o),t[1]=i+r*(e[1]-i),t}function di(t,n){n=n||1;var e=2*y()*Math.PI;return t[0]=Math.cos(e)*n,t[1]=Math.sin(e)*n,t}function yi(t,n,e){var r=n[0],o=n[1];return t[0]=e[0]*r+e[2]*o,t[1]=e[1]*r+e[3]*o,t}function mi(t,n,e){var r=n[0],o=n[1];return t[0]=e[0]*r+e[2]*o+e[4],t[1]=e[1]*r+e[3]*o+e[5],t}function _i(t,n,e){var r=n[0],o=n[1];return t[0]=e[0]*r+e[3]*o+e[6],t[1]=e[1]*r+e[4]*o+e[7],t}function gi(t,n,e){let r=n[0],o=n[1];return t[0]=e[0]*r+e[4]*o+e[12],t[1]=e[1]*r+e[5]*o+e[13],t}function vi(t,n,e,r){let o=n[0]-e[0],i=n[1]-e[1],u=Math.sin(r),a=Math.cos(r);return t[0]=o*a-i*u+e[0],t[1]=o*u+i*a+e[1],t}function Ei(t,n){let e=t[0],r=t[1],o=n[0],i=n[1],u=e*e+r*r;u>0&&(u=1/Math.sqrt(u));let a=o*o+i*i;a>0&&(a=1/Math.sqrt(a));let s=(e*o+r*i)*u*a;return s>1?0:s<-1?Math.PI:Math.acos(s)}function Ti(t){return"vec2("+t[0]+", "+t[1]+")"}function bi(t,n){return t[0]===n[0]&&t[1]===n[1]}function Ai(t,n){let e=t[0],r=t[1],o=n[0],i=n[1];return Math.abs(e-o)<=h*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(r-i)<=h*Math.max(1,Math.abs(r),Math.abs(i))}const Mi=ui,Ri=$o,Si=Yo,Ni=Ko,Oi=oi,Ii=ii,Fi=ai,Li=function(){let t=Go();return function(n,e,r,o,i,u){let a,s;for(e||(e=2),r||(r=0),s=o?Math.min(o*e+r,n.length):n.length,a=r;a<s;a+=e)t[0]=n[a],t[1]=n[a+1],i(t,t,u),n[a]=t[0],n[a+1]=t[1];return n}}();e.d(n,"glMatrix",function(){return r}),e.d(n,"mat2",function(){return o}),e.d(n,"mat2d",function(){return i}),e.d(n,"mat3",function(){return u}),e.d(n,"mat4",function(){return a}),e.d(n,"quat",function(){return f}),e.d(n,"quat2",function(){return l}),e.d(n,"vec2",function(){return p}),e.d(n,"vec3",function(){return s}),e.d(n,"vec4",function(){return c})},function(t,n){(function(n){t.exports=n}).call(this,{})},function(t,n,e){t.exports=function(t,n,e,r,o){"use strict";function i(){}function u(){return this}function a(n){return function(t,n){return n.replace(/^/gm,"  ").replace("  ","")}(0,t(n))}function s(t,n){return function(e,r,o){switch(arguments.length){case 1:return t(n,e);case 2:return t(n,e,r);default:return t(n,e,r,o)}}}function c(t,n,e){return function(r,o){return 1===arguments.length?t(n,e,r):t(n,e,r,o)}}function f(t,n,e,r){return function(o){return t(n,e,r,o)}}function l(t){throw t}function p(t){return"  "+t}t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n,e=e&&e.hasOwnProperty("default")?e.default:e,r=r&&r.hasOwnProperty("default")?r.default:r,o=o&&o.hasOwnProperty("default")?o.default:o;var h="fantasy-land/map",d="fantasy-land/bimap",y="fantasy-land/chain",m="fantasy-land/chainRec",_="fantasy-land/ap",g="fantasy-land/of",v="fantasy-land/zero",E=["first","second","third","fourth","fifth"],T="fluture",b="Future",A=4,M=T+"/"+b+"@"+A;function R(t){return new Error(t)}function S(t){return new TypeError(t)}function N(n,e,r,o){return S(n+" expects its "+E[e]+" argument to "+r+"\n  Actual: "+t(o))}function O(e,r,o,i){var u=n.parse(n(o)),a=u.name===b?"\n"+(u.namespace!==T?function(t,n){return"The Future was not created by "+T+". Make sure you transform other Futures to "+T+" Futures. Got "+(n?"a Future from "+n:"an unscoped Future")+".\n  See: https://github.com/fluture-js/Fluture#casting-futures"}(0,u.namespace):u.version!==A?"The Future was created by "+(u.version<A?"an older":"a newer")+" version of "+T+". This means that one of the sources which creates Futures is outdated. Update this source, or transform its created Futures to be compatible.\n  See: https://github.com/fluture-js/Fluture#casting-futures":"Nothing seems wrong. Contact the Fluture maintainers."):"";return S(e+" expects "+(E[r]?"its "+E[r]+" argument to be a valid Future":r)+"."+a+"\n  Actual: "+t(o)+" :: "+u.name+(i||""))}function I(t,n,e,r){throw N(t,n,e,r)}function F(n,e){throw function(n,e){return S(n+" was invoked outside the context of a Future. You might want to use a dispatcher instead\n  Called on: "+t(e))}(n,e)}function L(t,n,e,r){throw O(t,n,e,r)}function x(t){return"function"==typeof t}function C(t){return t instanceof Promise||Boolean(t)&&x(t.then)}function P(t){return t===1/0||function(t){return"number"==typeof t}(t)&&t>0&&t%1==0}function w(t){return null!==t&&"object"==typeof t}var U={head:null};function B(t,n){return{head:t,tail:n}}function j(t,n,r,o){var u,a,s,c,f=new e,l=i,p=U,h=!0;function d(t){p=B(t,p)}function y(){var t=p.head;return p=p.tail,t}function m(t){if(s=!0,(u=t)._spawn){for(var n=u._actions;n!==U;)f.unshift(n.head),n=n.tail;u=u._spawn}h&&function(){for(h=!1;;){if(s=!1,a=f.shift())l=u._interpret(T,_,g),s||b();else{if(!(a=y()))break;l=u._interpret(T,_,g)}if(!s)return void(h=!0)}l=u._interpret(T,r,o)}()}function _(t){m(a.rejected(t))}function g(t){m(a.resolved(t))}function v(t,n){if(l(),f.clear(),h&&a!==n)for(a.cancel();(c=y())&&c!==n;)c.cancel();m(t)}function E(){for(l(),a&&a.cancel();c=y();)c.cancel()}function T(t){E(),n(t)}function b(){for(;c=f.pop();){if(c=c.run(v),s)return;d(c)}a=a.run(v)}return m(t),E}function D(n){l(R("Future#value was called on a rejected Future\n  Actual: Future.reject("+t(n)+")"))}function k(n){l(function(n){var e,r;try{n&&"string"==typeof n.name&&"string"==typeof n.message?(e=n.name,r=n.message):(e="Non-Error",r=t(n))}catch(t){e="Something",r="<The value which was thrown could not be converted to string>"}return R(e+" occurred while running a computation for a Future:\n\n"+r.split("\n").map(p).join("\n"))}(n))}function V(t){return x(t)||I("Future",0,"be a Function",t),new q(t)}function G(t){return t instanceof V||n(t)===M}U.tail=U,V["@@type"]=M,V.prototype["@@show"]=function(){return this.toString()},V.prototype[_]=function(t){return t._ap(this)},V.prototype[h]=function(t){return this._map(t)},V.prototype[d]=function(t,n){return this._bimap(t,n)},V.prototype[y]=function(t){return this._chain(t)},V.prototype.ap=function(t){return G(this)||F("Future#ap",this),G(t)||L("Future#ap",0,t),this._ap(t)},V.prototype.map=function(t){return G(this)||F("Future#map",this),x(t)||I("Future#map",0,"to be a Function",t),this._map(t)},V.prototype.bimap=function(t,n){return G(this)||F("Future#bimap",this),x(t)||I("Future#bimap",0,"to be a Function",t),x(n)||I("Future#bimap",1,"to be a Function",n),this._bimap(t,n)},V.prototype.chain=function(t){return G(this)||F("Future#chain",this),x(t)||I("Future#chain",0,"to be a Function",t),this._chain(t)},V.prototype.mapRej=function(t){return G(this)||F("Future#mapRej",this),x(t)||I("Future#mapRej",0,"to be a Function",t),this._mapRej(t)},V.prototype.chainRej=function(t){return G(this)||F("Future#chainRej",this),x(t)||I("Future#chainRej",0,"to be a Function",t),this._chainRej(t)},V.prototype.race=function(t){return G(this)||F("Future#race",this),G(t)||L("Future#race",0,t),this._race(t)},V.prototype.both=function(t){return G(this)||F("Future#both",this),G(t)||L("Future#both",0,t),this._both(t)},V.prototype.and=function(t){return G(this)||F("Future#and",this),G(t)||L("Future#and",0,t),this._and(t)},V.prototype.or=function(t){return G(this)||F("Future#or",this),G(t)||L("Future#or",0,t),this._or(t)},V.prototype.swap=function(){return G(this)||F("Future#ap",this),this._swap()},V.prototype.fold=function(t,n){return G(this)||F("Future#ap",this),x(t)||I("Future#fold",0,"to be a Function",t),x(n)||I("Future#fold",1,"to be a Function",n),this._fold(t,n)},V.prototype.finally=function(t){return G(this)||F("Future#finally",this),G(t)||L("Future#finally",0,t),this._finally(t)},V.prototype.lastly=function(t){return G(this)||F("Future#lastly",this),G(t)||L("Future#lastly",0,t),this._finally(t)},V.prototype.fork=function(t,n){return G(this)||F("Future#fork",this),x(t)||I("Future#fork",0,"to be a Function",t),x(n)||I("Future#fork",1,"to be a Function",n),this._interpret(k,t,n)},V.prototype.forkCatch=function(t,n,e){return G(this)||F("Future#fork",this),x(t)||I("Future#fork",0,"to be a Function",t),x(n)||I("Future#fork",1,"to be a Function",n),x(e)||I("Future#fork",2,"to be a Function",e),this._interpret(t,n,e)},V.prototype.value=function(t){return G(this)||F("Future#value",this),x(t)||I("Future#value",0,"to be a Function",t),this._interpret(k,D,t)},V.prototype.done=function(t){return G(this)||F("Future#done",this),x(t)||I("Future#done",0,"to be a Function",t),this._interpret(k,function(n){t(n)},function(n){t(null,n)})},V.prototype.promise=function(){var t=this;return new Promise(function(n,e){t._interpret(k,e,n)})},V.prototype.isRejected=function(){return!1},V.prototype.isResolved=function(){return!1},V.prototype.isSettled=function(){return this.isRejected()||this.isResolved()},V.prototype.extractLeft=function(){return[]},V.prototype.extractRight=function(){return[]};var H=Object.create(V.prototype);function q(t){this._computation=t}function X(t){this._value=t}function W(t){return new X(t)}function z(t){this._value=t}function $(t){return new z(t)}function Y(){this._isNever=!0}H._ap=function(t){return new gt(this)._ap(t)},H._parallelAp=function(t){return new gt(this)._parallelAp(t)},H._map=function(t){return new gt(this)._map(t)},H._bimap=function(t,n){return new gt(this)._bimap(t,n)},H._chain=function(t){return new gt(this)._chain(t)},H._mapRej=function(t){return new gt(this)._mapRej(t)},H._chainRej=function(t){return new gt(this)._chainRej(t)},H._race=function(t){return new gt(this)._race(t)},H._both=function(t){return new gt(this)._both(t)},H._and=function(t){return new gt(this)._and(t)},H._or=function(t){return new gt(this)._or(t)},H._swap=function(){return new gt(this)._swap()},H._fold=function(t,n){return new gt(this)._fold(t,n)},H._finally=function(t){return new gt(this)._finally(t)},q.prototype=Object.create(H),q.prototype._interpret=function(n,e,r){var o=!1,u=i,a=function(){o=!0};try{u=this._computation(function(t){a=function(){o=!1,e(t)},o&&a()},function(t){a=function(){o=!1,r(t)},o&&a()})||i}catch(t){return o=!1,n(t),i}return x(u)&&0===u.length||n(S("The computation was expected to return a nullary function or void\n  Actual: "+t(u))),a(),function(){o&&(o=!1,u&&u())}},q.prototype.toString=function(){return"Future("+a(this._computation)+")"},X.prototype=Object.create(H),X.prototype._ap=u,X.prototype._parallelAp=u,X.prototype._map=u,X.prototype._chain=u,X.prototype._race=u,X.prototype._both=u,X.prototype._and=u,X.prototype._or=function(t){return t},X.prototype._finally=function(t){return t._and(this)},X.prototype._swap=function(){return new z(this._value)},X.prototype._interpret=function(t,n){return n(this._value),i},X.prototype.isRejected=function(){return!0},X.prototype.extractLeft=function(){return[this._value]},X.prototype.toString=function(){return"Future.reject("+t(this._value)+")"},z.prototype=Object.create(H),z.prototype._race=u,z.prototype._mapRej=u,z.prototype._or=u,z.prototype._and=function(t){return t},z.prototype._both=function(t){var n=this._value;return t._map(function(t){return[n,t]})},z.prototype._swap=function(){return new X(this._value)},z.prototype._finally=function(t){var n=this._value;return t._map(function(){return n})},z.prototype._interpret=function(t,n,e){return e(this._value),i},z.prototype.isResolved=function(){return!0},z.prototype.extractRight=function(){return[this._value]},z.prototype.toString=function(){return"Future.of("+t(this._value)+")"},Y.prototype=Object.create(V.prototype),Y.prototype._ap=u,Y.prototype._parallelAp=u,Y.prototype._map=u,Y.prototype._bimap=u,Y.prototype._chain=u,Y.prototype._mapRej=u,Y.prototype._chainRej=u,Y.prototype._both=u,Y.prototype._or=u,Y.prototype._swap=u,Y.prototype._fold=u,Y.prototype._finally=u,Y.prototype._race=function(t){return t},Y.prototype._interpret=function(){return i},Y.prototype.toString=function(){return"Future.never"};var K=new Y;function J(t){return G(t)&&!0===t._isNever}function Z(t){this._error=t}function Q(t){var n=this;n.rec=i,n.rej=i,n.res=i,n.crashed=!1,n.rejected=!1,n.resolved=!1,n.value=null,n.cancel=t._interpret(function(t){n.value=t,n.crashed=!0,n.cancel=i,n.rec(t)},function(t){n.value=t,n.rejected=!0,n.cancel=i,n.rej(t)},function(t){n.value=t,n.resolved=!0,n.cancel=i,n.res(t)})}Z.prototype=Object.create(V.prototype),Z.prototype._ap=u,Z.prototype._parallelAp=u,Z.prototype._map=u,Z.prototype._bimap=u,Z.prototype._chain=u,Z.prototype._mapRej=u,Z.prototype._chainRej=u,Z.prototype._both=u,Z.prototype._or=u,Z.prototype._swap=u,Z.prototype._fold=u,Z.prototype._finally=u,Z.prototype._race=u,Z.prototype._interpret=function(t){return t(this._error),i},Q.prototype=Object.create(H),Q.prototype._interpret=function(t,n,e){return this.crashed?t(this.value):this.rejected?n(this.value):this.resolved?e(this.value):(this.rec=t,this.rej=n,this.res=e),this.cancel};var tt={rejected:function(t){return this.cancel(),new X(t)},resolved:function(t){return this.cancel(),new z(t)},run:function(){return this},cancel:function(){}};function nt(t){this.other=t}function et(t){this.mapper=t}function rt(t,n){this.lmapper=t,this.rmapper=n}function ot(t){this.mapper=t}function it(t){this.mapper=t}function ut(t){this.mapper=t}function at(){}function st(t,n){this.lmapper=t,this.rmapper=n}function ct(t){this.other=t}function ft(t){this.other=t}function lt(t){this.other=t}function pt(t){this.other=t}function ht(t){this.other=t}function dt(t){this.other=t}function yt(t,n){var e=this;e.other=new Q(n),e.cancel=this.other._interpret(function(n){t(new Z(n),e)},function(n){t(new X(n),e)},i)}function mt(t,n){var e=this;e.other=n,e.cancel=n._interpret(function(n){t(new Z(n),e)},function(n){t(new X(n),e)},function(n){t(new z(n),e)})}function _t(t,n){var e=this;e.other=n,e.cancel=n._interpret(function(n){t(new Z(n),e)},function(n){t(new X(n),e)},i)}function gt(t,n){this._spawn=t,this._actions=n||U}function vt(t){return{done:!1,value:t}}function Et(t){return{done:!0,value:t}}function Tt(t){return w(t)&&function(t){return"boolean"==typeof t}(t.done)}nt.prototype=Object.create(tt),nt.prototype.resolved=function(n){return x(n)?this.other._map(function(t){return n(t)}):new Z(S("Future#ap expects its first argument to be a Future of a Function\n  Actual: Future.of("+t(n)+")"))},nt.prototype.toString=function(){return"ap("+this.other.toString()+")"},et.prototype=Object.create(tt),et.prototype.resolved=function(t){var n;try{n=new z(this.mapper(t))}catch(t){n=new Z(t)}return n},et.prototype.toString=function(){return"map("+a(this.mapper)+")"},rt.prototype=Object.create(tt),rt.prototype.rejected=function(t){var n;try{n=new X(this.lmapper(t))}catch(t){n=new Z(t)}return n},rt.prototype.resolved=function(t){var n;try{n=new z(this.rmapper(t))}catch(t){n=new Z(t)}return n},rt.prototype.toString=function(){return"bimap("+a(this.lmapper)+", "+a(this.rmapper)+")"},ot.prototype=Object.create(tt),ot.prototype.resolved=function(n){var e;try{e=this.mapper(n)}catch(t){return new Z(t)}return G(e)?e:new Z(O("Future#chain","the function it's given to return a Future",e,"\n  From calling: "+a(this.mapper)+"\n  With: "+t(n)))},ot.prototype.toString=function(){return"chain("+a(this.mapper)+")"},it.prototype=Object.create(tt),it.prototype.rejected=function(t){var n;try{n=new X(this.mapper(t))}catch(t){n=new Z(t)}return n},it.prototype.toString=function(){return"mapRej("+a(this.mapper)+")"},ut.prototype=Object.create(tt),ut.prototype.rejected=function(n){var e;try{e=this.mapper(n)}catch(t){return new Z(t)}return G(e)?e:new Z(O("Future#chainRej","the function it's given to return a Future",e,"\n  From calling: "+a(this.mapper)+"\n  With: "+t(n)))},ut.prototype.toString=function(){return"chainRej("+a(this.mapper)+")"},at.prototype=Object.create(tt),at.prototype.rejected=function(t){return new z(t)},at.prototype.resolved=function(t){return new X(t)},at.prototype.toString=function(){return"swap()"},st.prototype=Object.create(tt),st.prototype.rejected=function(t){var n;try{n=new z(this.lmapper(t))}catch(t){n=new Z(t)}return n},st.prototype.resolved=function(t){var n;try{n=new z(this.rmapper(t))}catch(t){n=new Z(t)}return n},st.prototype.toString=function(){return"fold("+a(this.lmapper)+", "+a(this.rmapper)+")"},ct.prototype=Object.create(tt),ct.prototype.rejected=function(t){return this.other._and(new X(t))},ct.prototype.resolved=function(t){return this.other._map(function(){return t})},ct.prototype.cancel=function(){this.other._interpret(i,i,i)()},ct.prototype.toString=function(){return"finally("+this.other.toString()+")"},ft.prototype=Object.create(tt),ft.prototype.resolved=function(){return this.other},ft.prototype.toString=function(){return"and("+this.other.toString()+")"},lt.prototype=Object.create(tt),lt.prototype.rejected=function(){return this.other},lt.prototype.toString=function(){return"or("+this.other.toString()+")"},pt.prototype=Object.create(nt.prototype),pt.prototype.run=function(t){return new yt(t,this.other)},pt.prototype.toString=function(){return"_parallelAp("+this.other.toString()+")"},ht.prototype=Object.create(tt),ht.prototype.run=function(t){return new mt(t,new Q(this.other))},ht.prototype.toString=function(){return"race("+this.other.toString()+")"},dt.prototype=Object.create(tt),dt.prototype.resolved=function(t){return this.other._map(function(n){return[t,n]})},dt.prototype.run=function(t){return new _t(t,new Q(this.other))},dt.prototype.toString=function(){return"both("+this.other.toString()+")"},yt.prototype=Object.create(pt.prototype),mt.prototype=Object.create(ht.prototype),_t.prototype=Object.create(dt.prototype),gt.prototype=Object.create(V.prototype),gt.prototype._transform=function(t){return new gt(this._spawn,B(t,this._actions))},gt.prototype._ap=function(t){return this._transform(new nt(t))},gt.prototype._parallelAp=function(t){return this._transform(new pt(t))},gt.prototype._map=function(t){return this._transform(new et(t))},gt.prototype._bimap=function(t,n){return this._transform(new rt(t,n))},gt.prototype._chain=function(t){return this._transform(new ot(t))},gt.prototype._mapRej=function(t){return this._transform(new it(t))},gt.prototype._chainRej=function(t){return this._transform(new ut(t))},gt.prototype._race=function(t){return J(t)?this:this._transform(new ht(t))},gt.prototype._both=function(t){return this._transform(new dt(t))},gt.prototype._and=function(t){return this._transform(new ft(t))},gt.prototype._or=function(t){return this._transform(new lt(t))},gt.prototype._swap=function(){return this._transform(new at)},gt.prototype._fold=function(t,n){return this._transform(new st(t,n))},gt.prototype._finally=function(t){return this._transform(new ct(t))},gt.prototype._interpret=function(t,n,e){return j(this,t,n,e)},gt.prototype.toString=function(){for(var t="",n=this._actions;n!==U;)t="."+n.head.toString()+t,n=n.tail;return this._spawn.toString()+t};var bt=0,At=1,Mt=2;function Rt(t,n){this._step=t,this._init=n}function St(t,n){return r.Apply.test(n)||I("Future.ap",1,"be an Apply",n),r.ap(t,n)}function Nt(t,n){return r.Apply.test(t)||I("Future.ap",0,"be an Apply",t),1===arguments.length?s(St,t):St(t,n)}function Ot(t,n){return r.Alt.test(n)||I("alt",1,"be an Alt",n),r.alt(t,n)}function It(t,n){return r.Alt.test(t)||I("alt",0,"be an Alt",t),1===arguments.length?s(Ot,t):Ot(t,n)}function Ft(t,n){return r.Functor.test(n)||I("Future.map",1,"be a Functor",n),r.map(t,n)}function Lt(t,n){return x(t)||I("Future.map",0,"be a Function",t),1===arguments.length?s(Ft,t):Ft(t,n)}function xt(t,n,e){return r.Bifunctor.test(e)||I("Future.bimap",2,"be a Bifunctor",e),r.bimap(t,n,e)}function Ct(t,n,e){return x(n)||I("Future.bimap",1,"be a Function",n),2===arguments.length?c(xt,t,n):xt(t,n,e)}function Pt(t,n,e){return x(t)||I("Future.bimap",0,"be a Function",t),1===arguments.length?s(Ct,t):2===arguments.length?Ct(t,n):Ct(t,n,e)}function wt(t,n){return r.Chain.test(n)||I("Future.chain",1,"be a Chain",n),r.chain(t,n)}function Ut(t,n){return x(t)||I("Future.chain",0,"be a Function",t),1===arguments.length?s(wt,t):wt(t,n)}function Bt(t,n){return G(n)||L("Future.mapRej",1,n),n.mapRej(t)}function jt(t,n){return G(n)||L("Future.chainRej",1,n),n.chainRej(t)}function Dt(t,n){return G(n)||L("Future.finally",1,n),n.finally(t)}function kt(t,n){return G(t)||L("Future.finally",0,t),1===arguments.length?s(Dt,t):Dt(t,n)}function Vt(t,n){return G(n)||L("Future.and",1,n),t.and(n)}function Gt(t,n){return G(n)||L("Future.both",1,n),t.both(n)}function Ht(t,n){return G(n)||L("Future.or",1,n),t.or(n)}function qt(t,n){return G(n)||L("Future.race",1,n),n.race(t)}function Xt(t,n){return G(t)||L("Future.race",0,t),1===arguments.length?s(qt,t):qt(t,n)}function Wt(t,n,e){return G(e)||L("Future.fold",2,e),e.fold(t,n)}function zt(t,n,e){return x(n)||I("Future.fold",1,"be a function",n),2===arguments.length?c(Wt,t,n):Wt(t,n,e)}function $t(t,n){return G(n)||L("Future.done",1,n),n.done(t)}function Yt(t,n,e){return G(e)||L("Future.fork",2,e),e._interpret(l,t,n)}function Kt(t,n,e){return x(n)||I("Future.fork",1,"be a function",n),2===arguments.length?c(Yt,t,n):Yt(t,n,e)}function Jt(t,n){return G(n)||L("Future.value",1,n),n.value(t)}function Zt(t){return t.isSettled()?t:J(t)?this:"number"==typeof t._time?t._time<this._time?t:this:H._race.call(this,t)}function Qt(t,n){this._time=t,this._value=n}function tn(t,n){this._time=t,this._value=n}function nn(t,n){return t===1/0?K:new Qt(t,n)}function en(t,n){return t===1/0?K:new tn(t,n)}function rn(t){this._fn=t}function on(t){return x(t)||I("Future.try",0,"be a function",t),new rn(t)}Rt.prototype=Object.create(H),Rt.prototype._interpret=function(t,n,e){var r=this._step,o=this._init,u=bt,a=i,s=vt(o);function c(t){s=t,u=u===bt?At:f()}function f(){for(;!s.done;){u=bt;try{var o=r(vt,Et,s.value)}catch(n){return void t(n)}if(a=o._interpret(t,n,c),u!==At)return void(u=Mt)}e(s.value)}return f(),function(){a()}},Rt.prototype.toString=function(){return"Future.chainRec("+a(this._step)+", "+t(this._init)+")"},Qt.prototype=Object.create(H),Qt.prototype._race=Zt,Qt.prototype._swap=function(){return new tn(this._time,this._value)},Qt.prototype._interpret=function(t,n,e){var r=setTimeout(e,this._time,this._value);return function(){clearTimeout(r)}},Qt.prototype.extractRight=function(){return[this._value]},Qt.prototype.toString=function(){return"Future.after("+t(this._time)+", "+t(this._value)+")"},tn.prototype=Object.create(H),tn.prototype._race=Zt,tn.prototype._swap=function(){return new Qt(this._time,this._value)},tn.prototype._interpret=function(t,n){var e=setTimeout(n,this._time,this._value);return function(){clearTimeout(e)}},tn.prototype.extractLeft=function(){return[this._value]},tn.prototype.toString=function(){return"Future.rejectAfter("+t(this._time)+", "+t(this._value)+")"},rn.prototype=Object.create(H),rn.prototype._interpret=function(t,n,e){var r;try{r=this._fn()}catch(t){return n(t),i}return e(r),i},rn.prototype.toString=function(){return"Future.try("+a(this._fn)+")"};var un=ln.Cold=0,an=ln.Pending=1,sn=ln.Crashed=2,cn=ln.Rejected=3,fn=ln.Resolved=4;function ln(t){this._pure=t,this.reset()}function pn(t,n){this._fn=t,this._a=n}function hn(t,n,e){this._fn=t,this._a=n,this._b=e}function dn(t,n,e,r){this._fn=t,this._a=n,this._b=e,this._c=r}function yn(t,n){this._fn=t,this._a=n}function mn(t,n,e){this._fn=t,this._a=n,this._b=e}function _n(t,n,e,r){this._fn=t,this._a=n,this._b=e,this._c=r}function gn(t,n){this._fn=t,this._a=n}function vn(t,n,e){this._fn=t,this._a=n,this._b=e}function En(t,n,e,r){this._fn=t,this._a=n,this._b=e,this._c=r}function Tn(n){return S("The iterator did not return a valid iteration from iterator.next()\n  Actual: "+t(n))}function bn(t){return O("Future.do","the iterator to produce only valid Futures",t,"\n  Tip: If you're using a generator, make sure you always yield a Future")}function An(t){this._generator=t}function Mn(t){return x(t)||I("Future.do",0,"be a Function",t),new An(t)}function Rn(t,n,e){this._acquire=t,this._dispose=n,this._consume=e}function Sn(t,n,e){return x(e)||I("Future.hook",2,"be a Future",e),new Rn(t,n,e)}function Nn(t,n,e){return x(n)||I("Future.hook",1,"be a function",n),2===arguments.length?c(Sn,t,n):Sn(t,n,e)}function On(t){this._fn=t}function In(t,n){this._futures=n,this._length=n.length,this._max=Math.min(this._length,t)}ln.prototype=Object.create(H),ln.prototype.isRejected=function(){return this._state===cn},ln.prototype.isResolved=function(){return this._state===fn},ln.prototype.extractLeft=function(){return this.isRejected()?[this._value]:[]},ln.prototype.extractRight=function(){return this.isResolved()?[this._value]:[]},ln.prototype._addToQueue=function(t,n,e){var r=this;if(r._state>an)return i;var o=r._queue.push(new function(t,n,e){this[sn]=t,this[cn]=n,this[fn]=e}(t,n,e))-1;return r._queued=r._queued+1,function(){r._state>an||(r._queue[o]=void 0,r._queued=r._queued-1,0===r._queued&&r.reset())}},ln.prototype._drainQueue=function(){if(!(this._state<=an)&&0!==this._queued){for(var t=this._queue,n=t.length,e=this._state,r=this._value,o=0;o<n;o++)t[o]&&t[o][e](r),t[o]=void 0;this._queue=void 0,this._queued=0}},ln.prototype.crash=function(t){this._state>an||(this._value=t,this._state=sn,this._drainQueue())},ln.prototype.reject=function(t){this._state>an||(this._value=t,this._state=cn,this._drainQueue())},ln.prototype.resolve=function(t){this._state>an||(this._value=t,this._state=fn,this._drainQueue())},ln.prototype.run=function(){var t=this;t._state>un||(t._state=an,t._cancel=t._pure._interpret(function(n){t.crash(n)},function(n){t.reject(n)},function(n){t.resolve(n)}))},ln.prototype.reset=function(){this._state!==un&&(this._state===an&&this._cancel(),this._cancel=i,this._queue=[],this._queued=0,this._value=void 0,this._state=un)},ln.prototype._interpret=function(t,n,e){var r=i;switch(this._state){case an:r=this._addToQueue(t,n,e);break;case sn:t(this._value);break;case cn:n(this._value);break;case fn:e(this._value);break;default:r=this._addToQueue(t,n,e),this.run()}return r},ln.prototype.toString=function(){return"Future.cache("+this._pure.toString()+")"},pn.prototype=Object.create(H),pn.prototype._interpret=function(t,n,e){var r;try{r=this._fn(this._a)}catch(t){return n(t),i}return e(r),i},pn.prototype.toString=function(){return"Future.encase("+a(this._fn)+", "+t(this._a)+")"},hn.prototype=Object.create(H),hn.prototype._interpret=function(t,n,e){var r;try{r=this._fn(this._a,this._b)}catch(t){return n(t),i}return e(r),i},hn.prototype.toString=function(){return"Future.encase2("+a(this._fn)+", "+t(this._a)+", "+t(this._b)+")"},dn.prototype=Object.create(H),dn.prototype._interpret=function(t,n,e){var r;try{r=this._fn(this._a,this._b,this._c)}catch(t){return n(t),i}return e(r),i},dn.prototype.toString=function(){return"Future.encase3("+a(this._fn)+", "+t(this._a)+", "+t(this._b)+", "+t(this._c)+")"},yn.prototype=Object.create(H),yn.prototype._interpret=function(t,n,e){var r=!1,o=function(){r=!0};try{this._fn(this._a,function(t,i){o=t?function(){r=!1,n(t)}:function(){r=!1,e(i)},r&&o()})}catch(n){return t(n),r=!1,i}return o(),function(){r=!1}},yn.prototype.toString=function(){return"Future.encaseN("+a(this._fn)+", "+t(this._a)+")"},mn.prototype=Object.create(H),mn.prototype._interpret=function(t,n,e){var r=!1,o=function(){r=!0};try{this._fn(this._a,this._b,function(t,i){o=t?function(){r=!1,n(t)}:function(){r=!1,e(i)},r&&o()})}catch(n){return t(n),r=!1,i}return o(),function(){r=!1}},mn.prototype.toString=function(){return"Future.encaseN2("+a(this._fn)+", "+t(this._a)+", "+t(this._b)+")"},_n.prototype=Object.create(H),_n.prototype._interpret=function(t,n,e){var r=!1,o=function(){r=!0};try{this._fn(this._a,this._b,this._c,function(t,i){o=t?function(){r=!1,n(t)}:function(){r=!1,e(i)},r&&o()})}catch(n){return t(n),r=!1,i}return o(),function(){r=!1}},_n.prototype.toString=function(){return"Future.encaseN3("+a(this._fn)+", "+t(this._a)+", "+t(this._b)+", "+t(this._c)+")"},gn.prototype=Object.create(H),gn.prototype._interpret=function(n,e,r){var o,u=!0,s=this._fn,c=this._a;try{o=s(c)}catch(t){return n(t),i}return C(o)?(o.then(function(t){u&&(u=!1,r(t))},function(t){u&&(u=!1,e(t))}),function(){u=!1}):(n(function(n,e,r){return S("Future.encaseP expects the function it's given to return a Promise/Thenable\n  Actual: "+t(o)+"\n  From calling: "+a(e)+"\n  With: "+t(r))}(0,s,c)),i)},gn.prototype.toString=function(){return"Future.encaseP("+a(this._fn)+", "+t(this._a)+")"},vn.prototype=Object.create(H),vn.prototype._interpret=function(n,e,r){var o,u=!0,s=this._fn,c=this._a,f=this._b;try{o=s(c,f)}catch(t){return n(t),i}return C(o)?(o.then(function(t){u&&(u=!1,r(t))},function(t){u&&(u=!1,e(t))}),function(){u=!1}):(n(function(n,e,r,o){return S("Future.encaseP2 expects the function it's given to return a Promise/Thenable\n  Actual: "+t(n)+"\n  From calling: "+a(e)+"\n  With 1: "+t(r)+"\n  With 2: "+t(o))}(o,s,c,f)),i)},vn.prototype.toString=function(){return"Future.encaseP2("+a(this._fn)+", "+t(this._a)+", "+t(this._b)+")"},En.prototype=Object.create(H),En.prototype._interpret=function(n,e,r){var o,u=!0,s=this._fn,c=this._a,f=this._b,l=this._c;try{o=s(c,f,l)}catch(t){return n(t),i}return C(o)?(o.then(function(t){u&&(u=!1,r(t))},function(t){u&&(u=!1,e(t))}),function(){u=!1}):(n(function(n,e,r,o,i){return S("Future.encaseP3 expects the function it's given to return a Promise/Thenable\n  Actual: "+t(n)+"\n  From calling: "+a(e)+"\n  With 1: "+t(r)+"\n  With 2: "+t(o)+"\n  With 3: "+t(i))}(o,s,c,f,l)),i)},En.prototype.toString=function(){return"Future.encaseP3("+a(this._fn)+", "+t(this._a)+", "+t(this._b)+", "+t(this._c)+")"},An.prototype=Object.create(H),An.prototype._interpret=function(t,n,e){var r,o,u,a=bt,s=i;try{u=this._generator()}catch(n){return t(n),i}if(!function(t){return w(t)&&x(t.next)}(u))return t(N("Future.do",0,'return an iterator, maybe you forgot the "*"',u)),i;function c(t){if(o=t,a===Mt)return f();a=At}function f(){for(;;){try{r=u.next(o)}catch(n){return t(n)}if(!Tt(r))return t(Tn(r));if(r.done)break;if(!G(r.value))return t(bn(r.value));if(a=bt,s=r.value._interpret(t,n,c),a===bt)return a=Mt}e(r.value)}return f(),function(){s()}},An.prototype.toString=function(){return"Future.do("+a(this._generator)+")"},Rn.prototype=Object.create(H),Rn.prototype._interpret=function(n,e,r){var o,u,s,c=this._acquire,f=this._dispose,l=this._consume,p=i,h=i;function d(){h(s)}function y(t){e(t)}function m(t){var r=n;h=i,e=i,n=i,_(),r(t)}function _(){var e;try{e=f(u)}catch(t){return n(t)}if(!G(e))return n(function(n,e,r){return O("Future.hook","the first function it's given to return a Future",n,"\n  From calling: "+a(f)+"\n  With: "+t(r))}(e,0,u));e._interpret(n,y,d),o=v}function g(){p(),_(),v()}function v(){h=i,n=i,e=i}function E(t){h=e,s=t,_()}function T(t){h=r,s=t,_()}var b=c._interpret(n,y,function(n){var e;u=n;try{e=l(u)}catch(t){return m(t)}if(!G(e))return m(function(n,e,r){return O("Future.hook","the second function it's given to return a Future",n,"\n  From calling: "+a(l)+"\n  With: "+t(r))}(e,0,u));o=g,p=e._interpret(m,E,T)});return o=o||b,function(){o()}},Rn.prototype.toString=function(){return"Future.hook("+this._acquire.toString()+", "+a(this._dispose)+", "+a(this._consume)+")"},On.prototype=Object.create(H),On.prototype._interpret=function(t,n,e){var r=!1,o=function(){r=!0};try{this._fn(function(t,i){o=t?function(){r=!1,n(t)}:function(){r=!1,e(i)},r&&o()})}catch(n){return t(n),r=!1,i}return o(),function(){r=!1}},On.prototype.toString=function(){return"Future.node("+a(this._fn)+")"},In.prototype=Object.create(H),In.prototype._interpret=function(t,n,e){var r=this._futures,o=this._length,u=this._max,a=new Array(o),s=new Array(o),c=0,f=0,l=!1;function p(){c=o;for(var t=0;t<o;t++)a[t]&&a[t]()}function h(u){f++,a[u]=r[u]._interpret(function(n){a[u]=i,p(),t(n)},function(t){a[u]=i,p(),n(t)},function(t){a[u]=i,s[u]=t,f--,c===o&&0===f?e(s):l&&d()})}function d(){for(l=!1;c<o&&f<u;)h(c++);l=!0}return d(),p},In.prototype.toString=function(){return"Future.parallel("+this._max+", "+t(this._futures)+")"};var Fn=new z([]);function Ln(t,n){G(t)||L("Future.parallel","its second argument to be an array of valid Futures. The value at position "+n+" in the array is not a Future",t)}function xn(t,n){(function(t){return Array.isArray(t)})(n)||I("Future.parallel",1,"be an array",n);for(var e=0;e<n.length;e++)Ln(n[e],e);return 0===n.length?Fn:new In(t,n)}function Cn(t){this._fn=t}Cn.prototype=Object.create(H),Cn.prototype._interpret=function(n,e,r){var o,u=!0,s=this._fn;try{o=s()}catch(t){return n(t),i}return C(o)?(o.then(function(t){u&&(u=!1,r(t))},function(t){u&&(u=!1,e(t))}),function(){u=!1}):(n(function(n,e){return S("Future.tryP expects the function it's given to return a Promise/Thenable\n  Actual: "+t(o)+"\n  From calling: "+a(e))}(0,s)),i)},Cn.prototype.toString=function(){return"Future.tryP("+t(this._fn)+")"},V.of=V[g]=$,V.chainRec=V[m]=function(t,n){return new Rt(t,n)},V.reject=W,V.ap=Nt,V.map=Lt,V.bimap=Pt,V.chain=Ut;var Pn=o(V,K,Xt,function(t,n){return n._parallelAp(t)});function wn(t){return t instanceof Pn||n(t)===Pn["@@type"]}Pn.of=Pn[g],Pn.zero=Pn[v],Pn.map=Lt,Pn.ap=Nt,Pn.alt=It;var Un=Object.freeze({Future:V,default:V,Par:Pn,isParallel:wn,seq:function(t){return wn(t)||I("Future.seq",0,"to be a Par",t),t.sequential},isFuture:G,reject:W,of:$,never:K,isNever:J,after:function(t,n){return P(t)||I("Future.after",0,"be a positive integer",t),1===arguments.length?s(nn,t):nn(t,n)},rejectAfter:function(t,n){return P(t)||I("Future.rejectAfter",0,"be a positive integer",t),1===arguments.length?s(en,t):en(t,n)},attempt:on,try:on,cache:function(t){return G(t)||L("Future.cache",0,t),new ln(t)},encase:function t(n,e){return x(n)||I("Future.encase",0,"be a function",n),1===arguments.length?s(t,n):new pn(n,e)},encase2:function t(n,e,r){switch(x(n)||I("Future.encase2",0,"be a function",n),arguments.length){case 1:return s(t,n);case 2:return c(t,n,e);default:return new hn(n,e,r)}},encase3:function t(n,e,r,o){switch(x(n)||I("Future.encase3",0,"be a function",n),arguments.length){case 1:return s(t,n);case 2:return c(t,n,e);case 3:return f(t,n,e,r);default:return new dn(n,e,r,o)}},encaseN:function t(n,e){return x(n)||I("Future.encaseN",0,"be a function",n),1===arguments.length?s(t,n):new yn(n,e)},encaseN2:function t(n,e,r){switch(x(n)||I("Future.encaseN2",0,"be a function",n),arguments.length){case 1:return s(t,n);case 2:return c(t,n,e);default:return new mn(n,e,r)}},encaseN3:function t(n,e,r,o){switch(x(n)||I("Future.encaseN3",0,"be a function",n),arguments.length){case 1:return s(t,n);case 2:return c(t,n,e);case 3:return f(t,n,e,r);default:return new _n(n,e,r,o)}},encaseP:function t(n,e){return x(n)||I("Future.encaseP",0,"be a function",n),1===arguments.length?s(t,n):new gn(n,e)},encaseP2:function t(n,e,r){switch(x(n)||I("Future.encaseP2",0,"be a function",n),arguments.length){case 1:return s(t,n);case 2:return c(t,n,e);default:return new vn(n,e,r)}},encaseP3:function t(n,e,r,o){switch(x(n)||I("Future.encaseP3",0,"be a function",n),arguments.length){case 1:return s(t,n);case 2:return c(t,n,e);case 3:return f(t,n,e,r);default:return new En(n,e,r,o)}},go:Mn,do:Mn,hook:function(t,n,e){return G(t)||L("Future.hook",0,t),1===arguments.length?s(Nn,t):2===arguments.length?Nn(t,n):Nn(t,n,e)},node:function(t){return x(t)||I("Future.node",0,"be a function",t),new On(t)},parallel:function(t,n){return P(t)||I("Future.parallel",0,"be a positive integer",t),1===arguments.length?s(xn,t):xn(t,n)},tryP:function(t){return x(t)||I("Future.tryP",0,"be a function",t),new Cn(t)},ap:Nt,alt:It,map:Lt,bimap:Pt,chain:Ut,mapRej:function(t,n){return x(t)||I("Future.mapRej",0,"be a Function",t),1===arguments.length?s(Bt,t):Bt(t,n)},chainRej:function(t,n){return x(t)||I("Future.chainRej",0,"be a Function",t),1===arguments.length?s(jt,t):jt(t,n)},lastly:kt,finally:kt,and:function(t,n){return G(t)||L("Future.and",0,t),1===arguments.length?s(Vt,t):Vt(t,n)},both:function(t,n){return G(t)||L("Future.both",0,t),1===arguments.length?s(Gt,t):Gt(t,n)},or:function(t,n){return G(t)||L("Future.or",0,t),1===arguments.length?s(Ht,t):Ht(t,n)},race:Xt,swap:function(t){return G(t)||L("Future.swap",0,t),t.swap()},fold:function(t,n,e){return x(t)||I("Future.fold",0,"be a function",t),1===arguments.length?s(zt,t):2===arguments.length?zt(t,n):zt(t,n,e)},done:function(t,n){return x(t)||I("Future.done",0,"be a Function",t),1===arguments.length?s($t,t):$t(t,n)},fork:function(t,n,e){return x(t)||I("Future.fork",0,"be a function",t),1===arguments.length?s(Kt,t):2===arguments.length?Kt(t,n):Kt(t,n,e)},forkCatch:function t(n,e,r,o){return x(n)||I("Future.forkCatch",0,"be a function",n),1===arguments.length?s(t,n):(x(e)||I("Future.forkCatch",1,"be a function",e),2===arguments.length?c(t,n,e):(x(r)||I("Future.forkCatch",2,"be a function",r),3===arguments.length?f(t,n,e,r):(G(o)||L("Future.forkCatch",3,o),o._interpret(n,e,r))))},promise:function(t){return G(t)||L("Future.promise",0,t),t.promise()},value:function(t,n){return x(t)||I("Future.value",0,"be a Function",t),1===arguments.length?s(Jt,t):Jt(t,n)},extractLeft:function(t){return G(t)||L("Future.extractLeft",0,t),t.extractLeft()},extractRight:function(t){return G(t)||L("Future.extractRight",0,t),t.extractRight()}});return Object.assign(V,Un)}(e(3),e(4),e(28),e(10),e(29))},function(t,n,e){var r,o,i;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u():null!=e(1)?(o=[],void 0===(i="function"==typeof(r=u)?r.apply(n,o):r)||(t.exports=i)):self.sanctuaryShow=u()}(function(){"use strict";var t="@@show",n=[];function e(t){return function(n){return r(n)+": "+r(t[n])}}function r(o){if(n.indexOf(o)>=0)return"<Circular>";switch(Object.prototype.toString.call(o)){case"[object Boolean]":return"object"==typeof o?"new Boolean ("+r(o.valueOf())+")":o.toString();case"[object Number]":return"object"==typeof o?"new Number ("+r(o.valueOf())+")":1/o==-1/0?"-0":o.toString(10);case"[object String]":return"object"==typeof o?"new String ("+r(o.valueOf())+")":JSON.stringify(o);case"[object Date]":return"new Date ("+r(isNaN(o.valueOf())?NaN:o.toISOString())+")";case"[object Error]":return"new "+o.name+" ("+r(o.message)+")";case"[object Arguments]":return"function () { return arguments; } ("+Array.prototype.map.call(o,r).join(", ")+")";case"[object Array]":n.push(o);try{return"["+o.map(r).concat(Object.keys(o).sort().filter(function(t){return!/^\d+$/.test(t)}).map(e(o))).join(", ")+"]"}finally{n.pop()}case"[object Object]":n.push(o);try{return t in o&&(null==o.constructor||o.constructor.prototype!==o)?o[t]():"{"+Object.keys(o).sort().map(e(o)).join(", ")+"}"}finally{n.pop()}default:return String(o)}}return r})},function(t,n,e){var r,o,i;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u():null!=e(1)?(o=[],void 0===(i="function"==typeof(r=u)?r.apply(n,o):r)||(t.exports=i)):self.sanctuaryTypeIdentifiers=u()}(function(){"use strict";var t="@@type",n=new RegExp("^([\\s\\S]+)/([\\s\\S]+?)(?:@([0-9]+))?$");function e(n){return null!=n&&null!=n.constructor&&n.constructor.prototype!==n&&"string"==typeof n.constructor[t]?n.constructor[t]:Object.prototype.toString.call(n).slice("[object ".length,-"]".length)}return e.parse=function(t){var e=n.exec(t);return{namespace:null==e||null==e[1]?null:e[1],name:null==e?t:e[2],version:null==e||null==e[3]?0:Number(e[3])}},e})},function(t,n,e){var r,o,i;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u(e(3),e(13)):null!=e(1)?(o=[e(3),e(13)],void 0===(i="function"==typeof(r=u)?r.apply(n,o):r)||(t.exports=i)):self.sanctuaryEither=u(self.sanctuaryShow,self.sanctuaryTypeClasses)}(function(n,r){"use strict";if("undefined"!=typeof __doctest){var o=__doctest.require("sanctuary-def"),i=__doctest.require("sanctuary-type-identifiers");!function(){var t=__doctest.require("sanctuary"),n=o.BinaryType("sanctuary-either/Either")("")(function(t){return i(t)===u["@@type"]})(function(t){return t.isLeft?[t.value]:[]})(function(t){return t.isLeft?[]:[t.value]}),e=r.concat(t.env,[o.TypeClass,n(o.Unknown)(o.Unknown)]);t.create({checkTypes:!0,env:e})}()}var u={},a={constructor:u,isLeft:!0,isRight:!1,"@@show":y,"fantasy-land/map":function(t){return this},"fantasy-land/bimap":function(t,n){return l(t(this.value))},"fantasy-land/ap":function(t){return t.isLeft?t:this},"fantasy-land/chain":function(t){return this},"fantasy-land/alt":function(t){return t},"fantasy-land/reduce":function(t,n){return n},"fantasy-land/traverse":function(t,n){return r.of(t,this)},"fantasy-land/extend":function(t){return this}},s={constructor:u,isLeft:!1,isRight:!0,"@@show":m,"fantasy-land/map":function(t){return p(t(this.value))},"fantasy-land/bimap":function(t,n){return p(n(this.value))},"fantasy-land/ap":function(t){return t.isLeft?t:p(t.value(this.value))},"fantasy-land/chain":function(t){return t(this.value)},"fantasy-land/alt":function(t){return this},"fantasy-land/reduce":function(t,n){return t(n,this.value)},"fantasy-land/traverse":function(t,n){return r.map(p,n(this.value))},"fantasy-land/extend":function(t){return p(t(this))}},c="object"==typeof t&&"object"==typeof t.exports?e(6):{},f=null!=c.inspect&&"symbol"==typeof c.inspect.custom?c.inspect.custom:"inspect";a[f]=y,s[f]=m;var l=u.Left=function(t){var n=Object.create(a);return r.Setoid.test(t)&&(n["fantasy-land/equals"]=_,r.Ord.test(t)&&(n["fantasy-land/lte"]=v)),r.Semigroup.test(t)&&(n["fantasy-land/concat"]=T),n.value=t,n},p=u.Right=function(t){var n=Object.create(s);return r.Setoid.test(t)&&(n["fantasy-land/equals"]=g,r.Ord.test(t)&&(n["fantasy-land/lte"]=E)),r.Semigroup.test(t)&&(n["fantasy-land/concat"]=b),n.value=t,n};function h(t){return{tag:h,value:t}}function d(t){return{tag:d,value:t}}function y(){return"Left ("+n(this.value)+")"}function m(){return"Right ("+n(this.value)+")"}function _(t){return t.isLeft&&r.equals(this.value,t.value)}function g(t){return t.isRight&&r.equals(this.value,t.value)}function v(t){return t.isRight||r.lte(this.value,t.value)}function E(t){return t.isRight&&r.lte(this.value,t.value)}function T(t){return t.isLeft?l(r.concat(this.value,t.value)):t}function b(t){return t.isRight?p(r.concat(this.value,t.value)):this}return u["@@type"]="sanctuary-either/Either@1",u["fantasy-land/of"]=p,u["fantasy-land/chainRec"]=function(t,n){for(var e=h(n);e.tag===h;){var r=t(h,d,e.value);if(r.isLeft)return r;e=r.value}return p(e.value)},u})},function(t,n,e){(function(t,r){var o=/%[sdj%]/g;n.format=function(t){if(!_(t)){for(var n=[],e=0;e<arguments.length;e++)n.push(a(arguments[e]));return n.join(" ")}e=1;for(var r=arguments,i=r.length,u=String(t).replace(o,function(t){if("%%"===t)return"%";if(e>=i)return t;switch(t){case"%s":return String(r[e++]);case"%d":return Number(r[e++]);case"%j":try{return JSON.stringify(r[e++])}catch(t){return"[Circular]"}default:return t}}),s=r[e];e<i;s=r[++e])y(s)||!E(s)?u+=" "+s:u+=" "+a(s);return u},n.deprecate=function(e,o){if(g(t.process))return function(){return n.deprecate(e,o).apply(this,arguments)};if(!0===r.noDeprecation)return e;var i=!1;return function(){if(!i){if(r.throwDeprecation)throw new Error(o);r.traceDeprecation?console.trace(o):console.error(o),i=!0}return e.apply(this,arguments)}};var i,u={};function a(t,e){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(e)?r.showHidden=e:e&&n._extend(r,e),g(r.showHidden)&&(r.showHidden=!1),g(r.depth)&&(r.depth=2),g(r.colors)&&(r.colors=!1),g(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),f(r,t,r.depth)}function s(t,n){var e=a.styles[n];return e?"["+a.colors[e][0]+"m"+t+"["+a.colors[e][1]+"m":t}function c(t,n){return t}function f(t,e,r){if(t.customInspect&&e&&A(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var o=e.inspect(r,t);return _(o)||(o=f(t,o,r)),o}var i=function(t,n){if(g(n))return t.stylize("undefined","undefined");if(_(n)){var e="'"+JSON.stringify(n).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(e,"string")}return m(n)?t.stylize(""+n,"number"):d(n)?t.stylize(""+n,"boolean"):y(n)?t.stylize("null","null"):void 0}(t,e);if(i)return i;var u=Object.keys(e),a=function(t){var n={};return u.forEach(function(t,e){n[t]=!0}),n}();if(t.showHidden&&(u=Object.getOwnPropertyNames(e)),b(e)&&(u.indexOf("message")>=0||u.indexOf("description")>=0))return l(e);if(0===u.length){if(A(e)){var s=e.name?": "+e.name:"";return t.stylize("[Function"+s+"]","special")}if(v(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(T(e))return t.stylize(Date.prototype.toString.call(e),"date");if(b(e))return l(e)}var c,E="",M=!1,R=["{","}"];return h(e)&&(M=!0,R=["[","]"]),A(e)&&(E=" [Function"+(e.name?": "+e.name:"")+"]"),v(e)&&(E=" "+RegExp.prototype.toString.call(e)),T(e)&&(E=" "+Date.prototype.toUTCString.call(e)),b(e)&&(E=" "+l(e)),0!==u.length||M&&0!=e.length?r<0?v(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),c=M?function(t,n,e,r,o){for(var i=[],u=0,a=n.length;u<a;++u)N(n,String(u))?i.push(p(t,n,e,r,String(u),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(p(t,n,e,r,o,!0))}),i}(t,e,r,a,u):u.map(function(n){return p(t,e,r,a,n,M)}),t.seen.pop(),function(t,n,e){return t.reduce(function(t,n){return n.indexOf("\n"),t+n.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?e[0]+(""===n?"":n+"\n ")+" "+t.join(",\n  ")+" "+e[1]:e[0]+n+" "+t.join(", ")+" "+e[1]}(c,E,R)):R[0]+E+R[1]}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,n,e,r,o,i){var u,a,s;if((s=Object.getOwnPropertyDescriptor(n,o)||{value:n[o]}).get?a=s.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):s.set&&(a=t.stylize("[Setter]","special")),N(r,o)||(u="["+o+"]"),a||(t.seen.indexOf(s.value)<0?(a=y(e)?f(t,s.value,null):f(t,s.value,e-1)).indexOf("\n")>-1&&(a=i?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n")):a=t.stylize("[Circular]","special")),g(u)){if(i&&o.match(/^\d+$/))return a;(u=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),u=t.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),u=t.stylize(u,"string"))}return u+": "+a}function h(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function y(t){return null===t}function m(t){return"number"==typeof t}function _(t){return"string"==typeof t}function g(t){return void 0===t}function v(t){return E(t)&&"[object RegExp]"===M(t)}function E(t){return"object"==typeof t&&null!==t}function T(t){return E(t)&&"[object Date]"===M(t)}function b(t){return E(t)&&("[object Error]"===M(t)||t instanceof Error)}function A(t){return"function"==typeof t}function M(t){return Object.prototype.toString.call(t)}function R(t){return t<10?"0"+t.toString(10):t.toString(10)}n.debuglog=function(t){if(g(i)&&(i=Object({NODE_ENV:"production",BROADCAST:void 0,BUILD_VERSION:"0.0.1-alpha"}).NODE_DEBUG||""),t=t.toUpperCase(),!u[t])if(new RegExp("\\b"+t+"\\b","i").test(i)){var e=r.pid;u[t]=function(){var r=n.format.apply(n,arguments);console.error("%s %d: %s",t,e,r)}}else u[t]=function(){};return u[t]},n.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=h,n.isBoolean=d,n.isNull=y,n.isNullOrUndefined=function(t){return null==t},n.isNumber=m,n.isString=_,n.isSymbol=function(t){return"symbol"==typeof t},n.isUndefined=g,n.isRegExp=v,n.isObject=E,n.isDate=T,n.isError=b,n.isFunction=A,n.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},n.isBuffer=e(31);var S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function N(t,n){return Object.prototype.hasOwnProperty.call(t,n)}n.log=function(){console.log("%s - %s",function(){var t=new Date,n=[R(t.getHours()),R(t.getMinutes()),R(t.getSeconds())].join(":");return[t.getDate(),S[t.getMonth()],n].join(" ")}(),n.format.apply(n,arguments))},n.inherits=e(32),n._extend=function(t,n){if(!n||!E(n))return t;for(var e=Object.keys(n),r=e.length;r--;)t[e[r]]=n[e[r]];return t}}).call(this,e(30),e(9))},function(t,n,e){"use strict";e.r(n);var r,o,i,u,a,s=e(0),c=e(2),f=e(8),l=Object(f.create)({checkTypes:!1,env:f.env}),p=function(t){return void 0==t||null==t},h=function(t){return function(t){var n=t.url,e=t.crossOrigin;return Object(c.Future)(function(t,r){var o=new Image;o.addEventListener("load",function(){return r(o)}),o.addEventListener("error",t),l.map(function(t){return o.crossOrigin=t})(e),o.src=n})}({url:t,crossOrigin:function(t){return-1===t.indexOf("http://")&&-1===t.indexOf("https://")||function(t){return new(window.URL||window.webkitURL||window)(t)}(t).origin===window.location.origin}(t)?l.Nothing:l.Just("anonymous")})},d=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},y=function(t){return function(n){return function(t){return function(n){return Object(c.Future)(function(e,r){var o=d({method:"GET"},n),i=void 0!==o.xhr?o.xhr:new XMLHttpRequest;i.onreadystatechange=function(){if(i.readyState===i.DONE){if(!i.status)return;200!==i.status?e(i):r(i)}};var u="form"!==o.requestType&&"query"!==o.requestType||null===o.data?"":function(t){var n="";if(!p(t))for(var e in t)t.hasOwnProperty(e)&&!p(t[e])&&(""!==n&&(n+="&"),n+=e+"="+encodeURIComponent(t[e]));return n}(o.data),a="query"===o.requestType&&""!==u?t+"?"+u:t;return i.open(o.method,a),i.responseType=o.responseType,void 0!==o.withCredentials&&(i.withCredentials=o.withCredentials),void 0!==o.headers&&o.headers.forEach(function(t){var n=t[0],e=t[1];i.setRequestHeader(n,e)}),"form"===o.requestType&&""!==u?(i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send(u)):p(o.data)?i.send():i.send(o.data),function(){return i.abort()}})}}(t)(n).map(function(t){return t.response})}},m=function(t){return function(n){return function(e){return y(n)(d({},e,{responseType:t}))}}},_=function(t){return function(n){return y(n)({responseType:t})}},g=(m("arraybuffer"),m("text"),m("blob"),m("document"),_("arraybuffer")),v=_("json"),E=(_("text"),_("blob"),_("document"),function(t){return function(n){return Object(c.Future)(function(e,r){var o=new FileReader;return o.onload=function(){return r(o.result)},o.onerror=function(t){return e(t)},t([o,n]),function(){return o.abort()}})}});E(function(t){var n=t[0],e=t[1];return n.readAsArrayBuffer(e)}),E(function(t){var n=t[0],e=t[1];return n.readAsDataURL(e)}),E(function(t){var n=t[0],e=t[1];return n.readAsText(e)}),e.d(n,"GltfAnimationTargetPath",function(){return r}),e.d(n,"GltfAnimationInterpolation",function(){return o}),e.d(n,"GltfMaterialAlphaMode",function(){return i}),e.d(n,"GltfNodeKind",function(){return u}),e.d(n,"GltfPrimitiveDrawKind",function(){return a}),e.d(n,"GltfIblExtensionName",function(){return T}),e.d(n,"GltfLightsExtensionName",function(){return b}),e.d(n,"GltfLights_MAX",function(){return A}),e.d(n,"GltfUnlitExtensionName",function(){return M}),e.d(n,"CameraKind",function(){return R}),e.d(n,"NodeKind",function(){return S}),e.d(n,"LightKind",function(){return N}),e.d(n,"WebGlConstants",function(){return O}),e.d(n,"createVec2",function(){return I}),e.d(n,"createVec4",function(){return F}),e.d(n,"createVec3",function(){return L}),e.d(n,"createMat4",function(){return x}),e.d(n,"createQuat",function(){return C}),e.d(n,"createFill",function(){return P}),e.d(n,"createIdentityTransform",function(){return w}),e.d(n,"createTransform",function(){return U}),e.d(n,"getTrsFromMatrix",function(){return B}),e.d(n,"getMatrixFromTrs",function(){return j}),e.d(n,"getModelMatrix",function(){return D}),e.d(n,"getNormalMatrix",function(){return k}),e.d(n,"getViewMatrices",function(){return V}),e.d(n,"updateTransform",function(){return G}),e.d(n,"rotateVectorByMatrix",function(){return H}),e.d(n,"getOrthographicProjection",function(){return q}),e.d(n,"getPerspectiveProjection",function(){return X}),e.d(n,"getCameraProjection",function(){return W}),e.d(n,"getCameraView",function(){return z}),e.d(n,"getCameraPosition",function(){return $}),e.d(n,"setCameraViewFromTransform",function(){return Y}),e.d(n,"setCameraPositionFromTransform",function(){return K}),e.d(n,"setCameraProjectionFromSettings",function(){return J}),e.d(n,"filterNodeDeep",function(){return Q}),e.d(n,"filterNodesDeep",function(){return tt}),e.d(n,"forEachNodes",function(){return nt}),e.d(n,"forEachNode",function(){return et}),e.d(n,"someNodes",function(){return rt}),e.d(n,"someNode",function(){return ot}),e.d(n,"countNodes",function(){return it}),e.d(n,"findNode",function(){return ut}),e.d(n,"mapNode",function(){return at}),e.d(n,"mapNodeWithParent",function(){return st}),e.d(n,"mapNodesWithParent",function(){return ct}),e.d(n,"mapNodes",function(){return ft}),e.d(n,"updateNodeTransforms",function(){return lt}),e.d(n,"updateNodeListTransforms",function(){return pt}),e.d(n,"getLightDirectionFromMatrix",function(){return Z}),e.d(n,"gltf_setAnimationTime",function(){return Mt}),e.d(n,"gltf_createAnimator",function(){return Rt}),e.d(n,"gltf_load",function(){return _n}),e.d(n,"gltf_updateNodeTransforms",function(){return gn}),e.d(n,"gltf_findNodeByOriginalId",function(){return vn}),e.d(n,"gltf_setJointTransforms",function(){return En}),e.d(n,"gltf_updateScene",function(){return bn}),e.d(n,"gltf_updateShaderConfigs",function(){return mn}),e.d(n,"createAttributes",function(){return An}),e.d(n,"createWebGlBuffers",function(){return Mn}),e.d(n,"makeFramebufferPicker",function(){return Rn}),e.d(n,"createWebGlRenderer",function(){return Fn}),e.d(n,"activateShader",function(){return nn}),e.d(n,"createShader",function(){return en}),e.d(n,"createTextureSwitcher",function(){return It}),e.d(n,"createTextureFromTarget",function(){return Ft}),e.d(n,"createCubeTextureFromTarget",function(){return Lt}),e.d(n,"textureSetterSimple",function(){return xt}),e.d(n,"createSimpleTextureFromTarget",function(){return Ct}),e.d(n,"createUniforms",function(){return Jt}),e.d(n,"getVersionString",function(){return Nn}),e.d(n,"getMajorVersion",function(){return In}),e.d(n,"createVertexArrays",function(){return Sn}),function(t){t[t.TRANSLATION=1]="TRANSLATION",t[t.ROTATION=2]="ROTATION",t[t.SCALE=3]="SCALE",t[t.WEIGHTS=4]="WEIGHTS"}(r||(r={})),function(t){t[t.LINEAR=1]="LINEAR",t[t.STEP=2]="STEP",t[t.CUBICSPLINE=3]="CUBICSPLINE"}(o||(o={})),function(t){t[t.OPAQUE=1]="OPAQUE",t[t.MASK=2]="MASK",t[t.BLEND=3]="BLEND"}(i||(i={})),function(t){t[t.MESH=3]="MESH",t[t.SKIN=4]="SKIN"}(u||(u={})),function(t){t[t.ELEMENTS=1]="ELEMENTS",t[t.ARRAY=2]="ARRAY"}(a||(a={}));const T="PURE3D_IBL",b="KHR_lights_punctual",A=10,M="KHR_Unlit";var R,S,N,O;!function(t){t[t.PERSPECTIVE=0]="PERSPECTIVE",t[t.ORTHOGRAPHIC=1]="ORTHOGRAPHIC"}(R||(R={})),function(t){t[t.CAMERA=1]="CAMERA",t[t.LIGHT=2]="LIGHT"}(S||(S={})),function(t){t[t.Directional=1]="Directional",t[t.Point=2]="Point",t[t.Spot=3]="Spot"}(N||(N={})),function(t){t[t.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",t[t.ACTIVE_ATTRIBUTE_MAX_LENGTH=35722]="ACTIVE_ATTRIBUTE_MAX_LENGTH",t[t.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",t[t.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",t[t.ACTIVE_UNIFORM_MAX_LENGTH=35719]="ACTIVE_UNIFORM_MAX_LENGTH",t[t.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",t[t.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",t[t.ALPHA=6406]="ALPHA",t[t.ALPHA_BITS=3413]="ALPHA_BITS",t[t.ALWAYS=519]="ALWAYS",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",t[t.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",t[t.BACK=1029]="BACK",t[t.BLEND=3042]="BLEND",t[t.BLEND_COLOR=32773]="BLEND_COLOR",t[t.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",t[t.BLEND_DST_RGB=32968]="BLEND_DST_RGB",t[t.BLEND_EQUATION=32777]="BLEND_EQUATION",t[t.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",t[t.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",t[t.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",t[t.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",t[t.BLUE_BITS=3412]="BLUE_BITS",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",t[t.BUFFER_SIZE=34660]="BUFFER_SIZE",t[t.BUFFER_USAGE=34661]="BUFFER_USAGE",t[t.BYTE=5120]="BYTE",t[t.CCW=2305]="CCW",t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",t[t.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",t[t.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",t[t.COMPILE_STATUS=35713]="COMPILE_STATUS",t[t.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",t[t.CULL_FACE=2884]="CULL_FACE",t[t.CULL_FACE_MODE=2885]="CULL_FACE_MODE",t[t.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",t[t.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",t[t.CW=2304]="CW",t[t.DECR=7683]="DECR",t[t.DECR_WRAP=34056]="DECR_WRAP",t[t.DELETE_STATUS=35712]="DELETE_STATUS",t[t.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",t[t.DEPTH_BITS=3414]="DEPTH_BITS",t[t.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",t[t.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.DEPTH_FUNC=2932]="DEPTH_FUNC",t[t.DEPTH_RANGE=2928]="DEPTH_RANGE",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",t[t.DEPTH_TEST=2929]="DEPTH_TEST",t[t.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",t[t.DITHER=3024]="DITHER",t[t.DONT_CARE=4352]="DONT_CARE",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",t[t.EQUAL=514]="EQUAL",t[t.FASTEST=4353]="FASTEST",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",t[t.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",t[t.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",t[t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",t[t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",t[t.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",t[t.FRONT=1028]="FRONT",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK",t[t.FRONT_FACE=2886]="FRONT_FACE",t[t.FUNC_ADD=32774]="FUNC_ADD",t[t.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",t[t.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",t[t.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",t[t.GEQUAL=518]="GEQUAL",t[t.GREATER=516]="GREATER",t[t.GREEN_BITS=3411]="GREEN_BITS",t[t.HIGH_FLOAT=36338]="HIGH_FLOAT",t[t.HIGH_INT=36341]="HIGH_INT",t[t.INCR=7682]="INCR",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.INFO_LOG_LENGTH=35716]="INFO_LOG_LENGTH",t[t.INT=5124]="INT",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVERT=5386]="INVERT",t[t.KEEP=7680]="KEEP",t[t.LEQUAL=515]="LEQUAL",t[t.LESS=513]="LESS",t[t.LINEAR=9729]="LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.LINE_WIDTH=2849]="LINE_WIDTH",t[t.LINK_STATUS=35714]="LINK_STATUS",t[t.LOW_FLOAT=36336]="LOW_FLOAT",t[t.LOW_INT=36339]="LOW_INT",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",t[t.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",t[t.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",t[t.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",t[t.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",t[t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",t[t.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",t[t.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",t[t.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",t[t.MEDIUM_INT=36340]="MEDIUM_INT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t[t.NEAREST=9728]="NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.NEVER=512]="NEVER",t[t.NICEST=4354]="NICEST",t[t.NONE=0]="NONE",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.NO_ERROR=0]="NO_ERROR",t[t.NUM_COMPRESSED_TEXTURE_FORMATS=34466]="NUM_COMPRESSED_TEXTURE_FORMATS",t[t.ONE=1]="ONE",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",t[t.POINTS=0]="POINTS",t[t.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",t[t.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",t[t.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",t[t.RED_BITS=3410]="RED_BITS",t[t.RENDERBUFFER=36161]="RENDERBUFFER",t[t.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",t[t.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",t[t.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",t[t.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",t[t.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",t[t.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",t[t.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",t[t.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",t[t.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",t[t.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",t[t.RENDERER=7937]="RENDERER",t[t.REPEAT=10497]="REPEAT",t[t.REPLACE=7681]="REPLACE",t[t.RGB=6407]="RGB",t[t.RGB5_A1=32855]="RGB5_A1",t[t.RGB565=36194]="RGB565",t[t.RGBA=6408]="RGBA",t[t.RGBA4=32854]="RGBA4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.SAMPLES=32937]="SAMPLES",t[t.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",t[t.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",t[t.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",t[t.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",t[t.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",t[t.SCISSOR_BOX=3088]="SCISSOR_BOX",t[t.SCISSOR_TEST=3089]="SCISSOR_TEST",t[t.SHADER_COMPILER=36346]="SHADER_COMPILER",t[t.SHADER_SOURCE_LENGTH=35720]="SHADER_SOURCE_LENGTH",t[t.SHADER_TYPE=35663]="SHADER_TYPE",t[t.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",t[t.SHORT=5122]="SHORT",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",t[t.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",t[t.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",t[t.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",t[t.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",t[t.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",t[t.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",t[t.STENCIL_BITS=3415]="STENCIL_BITS",t[t.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",t[t.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",t[t.STENCIL_FAIL=2964]="STENCIL_FAIL",t[t.STENCIL_FUNC=2962]="STENCIL_FUNC",t[t.STENCIL_INDEX=6401]="STENCIL_INDEX",t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8",t[t.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",t[t.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",t[t.STENCIL_REF=2967]="STENCIL_REF",t[t.STENCIL_TEST=2960]="STENCIL_TEST",t[t.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",t[t.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",t[t.TEXTURE=5890]="TEXTURE",t[t.TEXTURE0=33984]="TEXTURE0",t[t.TEXTURE1=33985]="TEXTURE1",t[t.TEXTURE2=33986]="TEXTURE2",t[t.TEXTURE3=33987]="TEXTURE3",t[t.TEXTURE4=33988]="TEXTURE4",t[t.TEXTURE5=33989]="TEXTURE5",t[t.TEXTURE6=33990]="TEXTURE6",t[t.TEXTURE7=33991]="TEXTURE7",t[t.TEXTURE8=33992]="TEXTURE8",t[t.TEXTURE9=33993]="TEXTURE9",t[t.TEXTURE10=33994]="TEXTURE10",t[t.TEXTURE11=33995]="TEXTURE11",t[t.TEXTURE12=33996]="TEXTURE12",t[t.TEXTURE13=33997]="TEXTURE13",t[t.TEXTURE14=33998]="TEXTURE14",t[t.TEXTURE15=33999]="TEXTURE15",t[t.TEXTURE16=34e3]="TEXTURE16",t[t.TEXTURE17=34001]="TEXTURE17",t[t.TEXTURE18=34002]="TEXTURE18",t[t.TEXTURE19=34003]="TEXTURE19",t[t.TEXTURE20=34004]="TEXTURE20",t[t.TEXTURE21=34005]="TEXTURE21",t[t.TEXTURE22=34006]="TEXTURE22",t[t.TEXTURE23=34007]="TEXTURE23",t[t.TEXTURE24=34008]="TEXTURE24",t[t.TEXTURE25=34009]="TEXTURE25",t[t.TEXTURE26=34010]="TEXTURE26",t[t.TEXTURE27=34011]="TEXTURE27",t[t.TEXTURE28=34012]="TEXTURE28",t[t.TEXTURE29=34013]="TEXTURE29",t[t.TEXTURE30=34014]="TEXTURE30",t[t.TEXTURE31=34015]="TEXTURE31",t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",t[t.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",t[t.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",t[t.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",t[t.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",t[t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",t[t.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",t[t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.VALIDATE_STATUS=35715]="VALIDATE_STATUS",t[t.VENDOR=7936]="VENDOR",t[t.VERSION=7938]="VERSION",t[t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",t[t.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",t[t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",t[t.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",t[t.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",t[t.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER",t[t.VIEWPORT=2978]="VIEWPORT",t[t.ZERO=0]="ZERO"}(O||(O={}));const I=()=>new Float64Array(2),F=()=>new Float64Array(4),L=()=>new Float64Array(3),x=()=>{const t=new Float64Array(16);return s.mat4.identity(t),t},C=()=>{const t=new Float64Array(4);return s.quat.identity(t),t},P=t=>n=>{const e=new Float64Array(t);return e.fill(n),e},w=t=>{const n={translation:L(),rotation:C(),scale:P(3)(1)},e=j(n);return{trs:n,localMatrix:e,modelMatrix:D(t)(e)}},U=t=>n=>{const e={};e.translation=n.translation?n.translation:L(),e.rotation=n.rotation?n.rotation:C(),e.scale=n.scale?n.scale:P(3)(1);const r=j(e);return{trs:e,localMatrix:r,modelMatrix:D(t)(r)}},B=t=>{const n=s.mat4.getScaling(L(),t),e=s.mat4.scale(x(),t,[1/n[0],1/n[1],1/n[2]]);return{translation:s.mat4.getTranslation(L(),t),rotation:s.mat4.getRotation(F(),e),scale:n}},j=t=>s.mat4.fromRotationTranslationScale(x(),t.rotation,t.translation,t.scale),D=t=>n=>t?s.mat4.multiply(x(),t,n):n.slice(),k=t=>s.mat4.transpose(s.mat4.create(),s.mat4.invert(s.mat4.create(),t)),V=t=>n=>{const e=s.mat4.multiply(s.mat4.create(),t.view,n);return{modelViewMatrix:e,modelViewProjectionMatrix:s.mat4.multiply(s.mat4.create(),t.projection,e)}},G=t=>n=>e=>{const r=t.updateLocal?j(e.trs):e.localMatrix,o=t.updateModel?D(n)(r):e.modelMatrix,i=t.updateModel&&e.normalMatrix?k(o):void 0,{modelViewMatrix:u,modelViewProjectionMatrix:a}=t.updateView?V(t.camera)(o):e;return Object.assign({},e,{localMatrix:r,modelMatrix:o,normalMatrix:i,modelViewMatrix:u,modelViewProjectionMatrix:a})},H=t=>n=>{const e=s.mat4.getRotation(C(),n);return s.vec3.transformQuat(L(),t,e)},q=t=>{const n=x(),e=t.xmag,r=t.ymag,o=t.znear,i=t.zfar;return n[0]=1/e,n[5]=1/r,n[10]=2/(o-i),n[14]=(i+o)/(o-i),n[15]=1,n},X=t=>{const n=x(),e=void 0===t.aspectRatio&&void 0!==t.canvas?t.canvas.clientWidth/t.canvas.clientHeight:t.aspectRatio,r=t.yfov,o=t.znear,i=t.zfar;return n[0]=1/(e*Math.tan(.5*r)),n[5]=1/Math.tan(.5*r),n[10]=void 0===i?-1:(i+o)/(o-i),n[11]=-1,n[14]=void 0===i?-2*o:2*i*o/(o-i),n},W=t=>t.kind==R.ORTHOGRAPHIC?q(t):X(t),z=t=>s.mat4.invert(x(),t),$=t=>s.mat4.getTranslation(L(),t),Y=t=>n=>Object.assign({},n,{view:z(t.modelMatrix)}),K=t=>n=>Object.assign({},n,{position:$(t.modelMatrix)}),J=t=>n=>Object.assign({},n,{projection:W(t)}),Z=t=>{const n=H([0,0,-1])(t);return s.vec3.normalize(n,n),n},Q=t=>n=>{if(void 0!==n&&t(n))return n.children?Object.assign({},n,{children:n.children.map(Q(t)).filter(t=>t)}):n},tt=t=>n=>n.map(Q(t)).filter(t=>t),nt=t=>n=>n.forEach(et(t)),et=t=>n=>{t(n),n.children&&n.children.forEach(et(t))},rt=t=>n=>n.some(ot(t)),ot=t=>n=>!!t(n)||!!n.children&&n.children.some(ot(t)),it=t=>{let n=0;return nt(()=>n++)(t),n},ut=t=>n=>{let e;const r=n=>{if(t(n))return e=n,!0};return Array.isArray(n)?rt(r)(n):ot(r)(n),e},at=t=>n=>{const e=t(n);return e.children?Object.assign(e,{children:e.children.map(at(t))}):e},st=t=>n=>e=>{const r=t(n)(e);return r.children?Object.assign(r,{children:r.children.map(st(t)(r))}):r},ct=t=>n=>e=>e.map(st(t)(n)),ft=t=>n=>n.map(at(t)),lt=t=>n=>e=>st(n=>e=>{const r=n?n.transform.modelMatrix:void 0,o=e.transform.modelMatrix,i=G(t)(r)(e.transform),u=i.modelMatrix,a=Object.assign({},e,{transform:i});if(t.updateLightDirection&&a.kind===S.LIGHT){const t=a.light.kind;t!==N.Directional&&t!==N.Spot||void 0!==a.light.direction&&s.mat4.equals(o,u)||(a.light.direction=Z(i.modelMatrix))}return a})(n)(e),pt=t=>n=>e=>ct(lt(t))(n)(e),ht=({v0:t,v1:n,t:e})=>{if("number"==typeof t&&"number"==typeof n)return t*(1-e)+n*e;const r=t,o=n;if(r.length!==o.length)throw new Error("different length of animation values");switch(r.length){case 1:return ht({v0:r[0],v1:o[0],t:e});case 2:return s.vec2.lerp(s.vec2.create(),r,o,e);case 3:return s.vec3.lerp(s.vec3.create(),r,o,e);case 4:return s.vec4.lerp(s.vec4.create(),r,o,e)}},dt=(t=>n=>e=>{const r=n.length-1,o=([r,o])=>{if(r===o)return!1;if(r<0||o<1)return!1;const i=t(n[r]),u=t(n[o]);return e>i&&e<u},i=([r,u])=>{if(u>=r){const a=0|r+(u-r)/2,s=t(n[a]);return s==e?a:o([a-1,a])?[a-1,a]:o([a,a+1])?[a,a+1]:i(s>e?[r,a-1]:[a+1,u])}return-1};return i([0,r])})(t=>t.timing),yt={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},mt={[O.BYTE]:1,[O.UNSIGNED_BYTE]:1,[O.SHORT]:2,[O.UNSIGNED_SHORT]:2,[O.UNSIGNED_INT]:4,[O.FLOAT]:4},_t=({buffer:t,componentType:n})=>{switch(n){case O.BYTE:return new Int8Array(t);case O.UNSIGNED_BYTE:return new Uint8Array(t);case O.SHORT:return new Int16Array(t);case O.UNSIGNED_SHORT:return new Uint16Array(t);case O.UNSIGNED_INT:return new Uint32Array(t);case O.FLOAT:return new Float32Array(t);default:throw new Error("unknown accessor component type!")}},gt=({info:t,buffers:n})=>void 0===t.bufferViewIndex?_t({buffer:new ArrayBuffer(t.bufferLength),componentType:t.componentType}):_t({buffer:n[t.bufferIndex].slice(t.byteOffset,t.byteOffset+t.bufferLength),componentType:t.componentType}),vt=({gltf:t,info:n,buffers:e})=>{const r=gt({info:n,buffers:e});if(n.sparse){const t=yt[n.accessorType],o=gt({info:n.sparse.indices,buffers:e}),i=gt({info:n.sparse.values,buffers:e});o.map(n=>n*t).forEach((n,e)=>{for(let o=0;o<t;o++)r[n+o]=i[o+e*t]})}return r},Et=({gltf:t,accessorId:n})=>{const e=t.accessors[n],r=(({gltf:t,accessor:n})=>{const e=n.count*yt[n.type]*mt[n.componentType];if(void 0===n.bufferView){if(void 0===n.sparse)throw new Error("accessor must either be sparse or have a buffer view");return{bufferLength:e,componentType:n.componentType,accessorType:n.type}}const r=t.bufferViews[n.bufferView],o=(void 0===r.byteOffset?0:r.byteOffset)+(void 0===n.byteOffset?0:n.byteOffset);return{bufferLength:(r.byteStride?r.byteStride:0)*yt[n.type]*mt[n.componentType]+e,componentType:n.componentType,bufferViewIndex:n.bufferView,bufferIndex:r.buffer,byteOffset:o,accessorType:n.type}})({gltf:t,accessor:e});return e.sparse&&(r.sparse={indices:(({gltf:t,accessor:n})=>{const e=n.sparse.indices,r=n.sparse.count*mt[e.componentType],o=t.bufferViews[e.bufferView],i=(void 0===o.byteOffset?0:o.byteOffset)+(void 0===e.byteOffset?0:e.byteOffset);return{bufferLength:r,componentType:e.componentType,bufferViewIndex:n.bufferView,bufferIndex:o.buffer,byteOffset:i,accessorType:n.type}})({gltf:t,accessor:e}),values:(({gltf:t,accessor:n})=>{const e=n.sparse.values,r=n.sparse.count*yt[n.type]*mt[n.componentType],o=t.bufferViews[e.bufferView],i=(void 0===o.byteOffset?0:o.byteOffset)+(void 0===e.byteOffset?0:e.byteOffset);return{bufferLength:r,componentType:n.componentType,bufferViewIndex:n.bufferView,bufferIndex:o.buffer,byteOffset:i,accessorType:n.type}})({gltf:t,accessor:e})}),r},Tt={[r.WEIGHTS]:"weights",[r.TRANSLATION]:"translation",[r.ROTATION]:"rotation",[r.SCALE]:"scale"},bt={weights:r.WEIGHTS,translation:r.TRANSLATION,rotation:r.ROTATION,scale:r.SCALE},At={linear:o.LINEAR,step:o.STEP,cubicspline:o.CUBICSPLINE},Mt=t=>n=>e=>{const i=dt(t.keyframes)(n);if(-1===i)return;const u=Array.isArray(i)?(({k0:t,k1:n,time:e,interpolation:i,targetPath:u})=>{const a=t.values,c=n.values,f=(e-t.timing)/(n.timing-t.timing);switch(i){case o.LINEAR:return u===r.ROTATION?s.quat.slerp(s.quat.create(),a,c,f):ht({v0:a,v1:c,t:f});case o.STEP:return a;case o.CUBICSPLINE:throw new Error("cubicspline is not supported yet!");default:throw new Error("unsupported interpolation ")}})({k0:t.keyframes[i[0]],k1:t.keyframes[i[1]],interpolation:t.interpolation,targetPath:t.targetPath,time:n}):t.keyframes[i].values;return Object.assign({},e,t.targetPath===r.WEIGHTS?{morphWeights:u}:{transform:Object.assign({},e.transform,{trs:Object.assign({},e.transform.trs,{[Tt[t.targetPath]]:u})})})},Rt=t=>({loop:n})=>{const e=new Map;let r;return t.forEach((t,n)=>e.set(n,0)),o=>i=>{const u=void 0===r?0:(o-r)/1e3;return r=o,t.forEach((t,r)=>{let o=e.get(r)+u;if(!0===n)for(;o>t.timeMax;)o-=t.timeMax;o>=t.timeMin&&o<=t.timeMax&&(i=ft(n=>n.animationIds&&-1!==n.animationIds.indexOf(r)?Mt(t)(o)(n):n)(i)),e.set(r,o)}),i}},St=["a_Position","a_Normal","a_Tangent","a_UV","a_Color","a_Morph_0","a_Morph_1","a_Morph_2","a_Morph_3","a_Morph_4","a_Morph_5","a_Morph_6","a_Morph_7","a_Skin_Joint","a_Skin_Weight"],Nt=Symbol(),Ot=t=>{if(!0!==t.extras[Nt]){if(t.version>1)throw new Error("GLTF Renderering only supports WebGL 1.0 for now");St.forEach(n=>{t.attributes.globalLocations.add(n)}),t.getExtension("OES_standard_derivatives"),t.getExtension("EXT_shader_texture_lod"),t.getExtension("EXT_SRGB"),t.getExtension("OES_element_index_uint"),t.extras[Nt]=!0}},It=t=>{const n=new Map,e=e=>r=>o=>(n.has(r)&&(()=>{const t=n.get(r);return t.target===e&&t.texture===o})()||(t.activeTexture(t.TEXTURE0+r),t.bindTexture(e,o),n.set(r,{target:e,texture:o})),o);return{switchTexture:e(O.TEXTURE_2D),switchCubeTexture:e(O.TEXTURE_CUBE_MAP)}},Ft=t=>n=>{const{gl:e}=t,r=e.createTexture(),o=O.TEXTURE_2D,i=t.dataSize||e.UNSIGNED_BYTE;return e.bindTexture(o,r),t.setParameters(t),(Array.isArray(n)?n:[n]).forEach((n,r)=>{n instanceof Element?e.texImage2D(o,r,t.format,t.format,i,n):e.texImage2D(o,r,t.format,t.width,t.height,0,t.format,i,n)}),r},Lt=t=>n=>{const{gl:e}=t,r=e.createTexture(),o=O.TEXTURE_CUBE_MAP,i=t.dataSize||e.UNSIGNED_BYTE;return e.bindTexture(o,r),t.setParameters(t),(Array.isArray(n)?n:[n]).forEach((n,r)=>{Object.keys(n).forEach(o=>{const u=(t=>{switch(o){case"posX":return O.TEXTURE_CUBE_MAP_POSITIVE_X;case"negX":return O.TEXTURE_CUBE_MAP_NEGATIVE_X;case"posY":return O.TEXTURE_CUBE_MAP_POSITIVE_Y;case"negY":return O.TEXTURE_CUBE_MAP_NEGATIVE_Y;case"posZ":return O.TEXTURE_CUBE_MAP_POSITIVE_Z;case"negZ":return O.TEXTURE_CUBE_MAP_NEGATIVE_Z}})(),a=n[o];a instanceof Element?e.texImage2D(u,r,t.format,t.format,i,a):e.texImage2D(u,r,t.format,t.width,t.height,0,t.format,i,a)})}),r},xt=t=>n=>{const{gl:e,width:r,height:o}=n,i=t=>0==(t&t-1);t.flipY?e.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,!0):e.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,!1),i(r)&&i(o)&&!0===t.useMips?e.generateMipmap(O.TEXTURE_2D):(e.texParameteri(O.TEXTURE_2D,O.TEXTURE_WRAP_S,t.wrapS?t.wrapS:O.CLAMP_TO_EDGE),e.texParameteri(O.TEXTURE_2D,O.TEXTURE_WRAP_T,t.wrapT?t.wrapT:O.CLAMP_TO_EDGE),e.texParameteri(O.TEXTURE_2D,O.TEXTURE_MIN_FILTER,t.filterMin?t.filterMin:O.LINEAR),e.texParameteri(O.TEXTURE_2D,O.TEXTURE_MAG_FILTER,t.filterMag?t.filterMag:O.LINEAR))},Ct=t=>n=>Ft({gl:t.gl,format:t.alpha?O.RGBA:O.RGB,setParameters:xt(t)})(n),Pt=t=>{--t;for(var n=1;n<32;n<<=1)t|=t>>n;return t+1},wt={filterMin:O.LINEAR,filterMag:O.LINEAR,wrapS:O.REPEAT,wrapT:O.REPEAT},Ut=t=>{const n=t.lastIndexOf("/")+1,e=t.lastIndexOf("\\")+1;return n||e?t.substr(0,n>e?n:e):t},Bt=[{loadAssets:({gltf:t,coreData:n})=>{const e=(t=>t.extensionsUsed&&-1!==t.extensionsUsed.indexOf(T)?t.extensions[T]:null)(t),r=e?e.path:"";return""===r?c.Future.of(n):v(r).chain(t=>{const n=Ut(r),e=Array();e.push(t.brdf.url),Object.keys(t.cubeMaps).forEach(n=>{t.cubeMaps[n].urls.forEach(t=>{t.forEach(t=>{e.push(n+"/"+t)})})});const o=e.map(t=>h(n+t).map(n=>({url:t,img:n})));return Object(c.parallel)(1/0,o).map(t=>{const n=new Map;return t.forEach(t=>{n.set(t.url,t.img)}),n}).map(n=>({jsonData:t,imageMap:n}))}).map(t=>Object.assign({},n,{extensions:Object.assign({},n.extensions,{ibl:t})}))},createData:({gltf:t,assets:n,renderer:e})=>t=>{if(!n.extensions.ibl)return t;Ot(e);const r=e.gl,{jsonData:o,imageMap:i}=n.extensions.ibl,u={brdf:Ft({gl:r,format:o.brdf.colorSpace,setParameters:()=>{r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),r.texParameteri(O.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(O.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(O.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(O.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR)}})(i.get(o.brdf.url)),cubeMaps:{},useLod:!1};return Object.keys(o.cubeMaps).forEach(t=>{o.cubeMaps[t].urls.length>1&&(u.useLod=!0),u.cubeMaps[t]=(t=>n=>({colorSpace:e,urls:o})=>{const i=["posX","negX","posY","negY","posZ","negZ"];let u=[];return o.forEach(e=>{const r={};e.forEach((e,o)=>{const u=t.get(n+"/"+e);r[i[o]]=u}),u.push(r)}),Lt({gl:r,format:e,setParameters:t=>{r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),o.length>1?(r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_LINEAR),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MAG_FILTER,r.LINEAR)):(r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MAG_FILTER,r.LINEAR))}})(u)})(i)(t)(o.cubeMaps[t])}),Object.assign({},t,{extensions:Object.assign({},t.extensions,{ibl:u})})},createScene:t=>t=>t=>t,createNode:t=>t=>t=>t,initialShaderConfig_Primitive:t=>t=>t=>t=>t,runtimeShaderConfig_Primitive:t=>t=>t=>t,initialShaderConfig_Scene:t=>n=>n=>t.extensions.ibl?Object.assign({},n,{ibl:{useLod:t.extensions.ibl.useLod}}):n,runtimeShaderConfig_Scene:t=>t=>t,getShaderSource:t=>n=>n=>n=>{if(t.extensions.ibl){const e=[];e.push("USE_IBL"),t.extensions.ibl.useLod&&e.push("USE_TEX_LOD");const r=e.map(t=>`#define ${t} 1\n`).join("");return Object.assign({},n,{vertex:r+n.vertex,fragment:r+n.fragment})}return n}},{loadAssets:({gltf:t,coreData:n})=>c.Future.of(n),createData:({gltf:t,assets:n,renderer:e})=>t=>t,createScene:t=>t=>t=>t,createNode:t=>n=>e=>{const r=(t=>t.extensionsUsed&&-1!==t.extensionsUsed.indexOf(b)?t.extensions[b].lights:null)(t),o=n.extensions&&n.extensions.hasOwnProperty(b)?n.extensions[b]:void 0;if(!r||!o)return e;const i=(t=>{const n={kind:{directional:N.Directional,point:N.Point,spot:N.Spot}[t.type],color:t.color?Float64Array.from(t.color):Float64Array.from([1,1,1]),intensity:void 0!==t.intensity?t.intensity:1};if(n.kind===N.Spot){const e=t.spot&&void 0!==t.spot.innerConeAngle?t.spot.innerConeAngle:0,r=t.spot&&void 0!==t.spot.outerConeAngle?t.spot.outerConeAngle:Math.PI/4;n.angleScale=1/Math.max(.001,Math.cos(e)-Math.cos(r)),n.angleOffset=-Math.cos(r)*n.angleScale}return n})(r[o.light]);if(e.kind)throw new Error("node cannot be both a light and some other kind...");return Object.assign({},e,{kind:S.LIGHT,light:i})},initialShaderConfig_Primitive:t=>t=>t=>t=>t,runtimeShaderConfig_Primitive:t=>t=>t=>t,initialShaderConfig_Scene:t=>t=>t=>t,runtimeShaderConfig_Scene:t=>n=>{let e=0,r=0,o=0;nt(t=>{if(t.kind===S.LIGHT)switch(t.light.kind){case N.Directional:r++;break;case N.Point:e++;break;case N.Spot:o++}})(t.nodes);const i={nPointLights:e,nDirectionalLights:r,nSpotLights:o};return Object.assign({},n,{lights:i})},getShaderSource:t=>t=>n=>e=>{if(t.lights){const r=[],{nPointLights:o,nDirectionalLights:i,nSpotLights:u}=t.lights;if((o>A||i>A||u>A)&&console.warn(`Only ${A} lights of each kind are supported`),!o&&!i&&!u)return e;r.push("USE_PUNCTUAL_LIGHTS");const a=r.map(t=>`#define ${t} 1\n`).join("");return Object.assign({},e,{vertex:a+e.vertex,fragment:(t=>n=>n=>{let e="",r="";const o=t.lights.nDirectionalLights,i=t.lights.nPointLights,u=t.lights.nSpotLights;if(o){e+=`uniform vec3 u_Light_Directional_Direction[${o}];\n`,e+=`uniform vec3 u_Light_Directional_Color[${o}];\n`,e+=`uniform float u_Light_Directional_Intensity[${o}];\n`;for(let t=0;t<o;t++)r+=`light = getDirectionalLight(\n                fragment,\n                u_Light_Directional_Direction[${t}],\n                u_Light_Directional_Color[${t}],\n                u_Light_Directional_Intensity[${t}]\n            );\n`,r+="color += getColor(pbr, fragment, light);\n"}if(i){e+=`uniform vec3 u_Light_Point_Position[${i}];\n`,e+=`uniform vec3 u_Light_Point_Color[${i}];\n`,e+=`uniform float u_Light_Point_Intensity[${i}];\n`;for(let t=0;t<i;t++)r+=`light = getPointLight(\n                fragment,\n                u_Light_Point_Position[${t}], \n                u_Light_Point_Color[${t}], \n                u_Light_Point_Intensity[${t}]\n            );\n`,r+="color += getColor(pbr, fragment, light);\n"}if(u){e+=`uniform vec3 u_Light_Spot_Position[${u}];\n`,e+=`uniform vec3 u_Light_Spot_Direction[${u}];\n`,e+=`uniform float u_Light_Spot_AngleScale[${u}];\n`,e+=`uniform float u_Light_Spot_AngleOffset[${u}];\n`,e+=`uniform vec3 u_Light_Spot_Color[${u}];\n`,e+=`uniform float u_Light_Spot_Intensity[${u}];\n`;for(let t=0;t<u;t++)r+=`light = getSpotLight(\n                fragment,\n                u_Light_Spot_Position[${t}], \n                u_Light_Spot_Direction[${t}], \n                u_Light_Spot_AngleScale[${t}], \n                u_Light_Spot_AngleOffset[${t}], \n                u_Light_Spot_Color[${t}], \n                u_Light_Spot_Intensity[${t}]\n            );\n`,r+="color += getColor(pbr, fragment, light);\n"}return n.replace("%PUNCTUAL_LIGHTS_VARS%",e).replace("%PUNCTUAL_LIGHTS_FUNCS%",r)})(t)(n)(a+e.fragment)})}return e}}],jt=({basePath:t,gltf:n,glbBuffers:e})=>Bt.map(t=>t.loadAssets).reduce((t,e)=>(t=t.chain(t=>e({gltf:n,coreData:t})),t),(({basePath:t,gltf:n,glbBuffers:e})=>Object(c.parallel)(1/0,n.buffers.map((n,r)=>void 0!==e&&r<e.length?c.Future.of(e[r].slice(0,n.byteLength)):0===n.uri.indexOf("data:")?g(n.uri):g(t+n.uri))))({basePath:t,gltf:n,glbBuffers:e}).chain(e=>(({basePath:t,gltf:n,buffers:e})=>Object(c.parallel)(1/0,n.images&&n.images.length?n.images.map(r=>void 0!==r.bufferView?function(t){var n=t.data,e=t.mimeType;return Object(c.Future)(function(t,r){var o=new Image;o.addEventListener("load",function(){return r(o)}),o.addEventListener("error",t);var i=new Uint8Array(n),u=new Blob([i],{type:e}),a=window.URL||window.webkitURL;o.src=a.createObjectURL(u)})}({data:(t=>{const r=n.bufferViews[t],o=r.buffer,i=void 0===r.byteOffset?0:r.byteOffset;return e[o].slice(i,i+r.byteLength)})(r.bufferView),mimeType:r.mimeType}):0===r.uri.indexOf("data:")?h(r.uri):h(t+r.uri)):[]))({basePath:t,gltf:n,buffers:e}).map(t=>({buffers:e,imageElements:t,extensions:{}})))),Dt=({gltf:t,assets:n,renderer:e,config:o})=>{Ot(e);const{imageElements:i,buffers:u}=n,a=(({renderer:t,gltf:n,imageElements:e})=>{const r=new Map,{gl:o}=t;return n.textures&&n.textures.forEach((i,u)=>{const a=Object.assign({},wt,void 0===i.sampler?void 0:n.samplers[i.sampler]),s=(({renderer:t,gltf:n,textureId:e})=>{const r=O.RGBA;for(let t=0;t<n.materials.length;t++){const r=n.materials[t];if(r.emissiveTexture&&r.emissiveTexture.index===e)return 35906;if(r.normalTexture&&r.normalTexture.index===e)return O.RGBA;if(r.occlusionTexture&&r.occlusionTexture.index===e)return O.RGBA;if(r.pbrMetallicRoughness){if(r.pbrMetallicRoughness.baseColorTexture&&r.pbrMetallicRoughness.baseColorTexture.index===e)return 35906;if(r.pbrMetallicRoughness.metallicRoughnessTexture&&r.pbrMetallicRoughness.metallicRoughnessTexture.index===e)return O.RGBA}}return r})({renderer:t,gltf:n,textureId:u}),c=e[i.source],{wrapS:f,wrapT:l,filterMin:p,filterMag:h}=a,d=(({wrapS:t,wrapT:n,filterMin:e,filterMag:r,sampler:o})=>t===O.REPEAT||t===O.MIRRORED_REPEAT||n===O.REPEAT||n===O.MIRRORED_REPEAT||e===O.NEAREST_MIPMAP_NEAREST||e===O.NEAREST_MIPMAP_LINEAR||e===O.LINEAR_MIPMAP_NEAREST||e===O.LINEAR_MIPMAP_LINEAR)({wrapS:f,wrapT:l,filterMin:p,filterMag:h,sampler:a})&&!(t=>{const n=t=>0==(t&t-1);return n(t.naturalWidth)&&n(t.naturalHeight)})(c)?(t=>{const n=document.createElement("canvas");return n.width=Pt(t.width),n.height=Pt(t.height),n.getContext("2d").drawImage(t,0,0,n.width,n.height),n})(c):c,y=Ft({gl:o,format:s,setParameters:()=>{o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,!1),o.pixelStorei(o.UNPACK_COLORSPACE_CONVERSION_WEBGL,o.NONE),o.texParameteri(O.TEXTURE_2D,o.TEXTURE_WRAP_S,f),o.texParameteri(O.TEXTURE_2D,o.TEXTURE_WRAP_T,l),o.texParameteri(O.TEXTURE_2D,o.TEXTURE_MIN_FILTER,p),o.texParameteri(O.TEXTURE_2D,o.TEXTURE_MAG_FILTER,h)}})(d);r.set(u,y)}),r})({renderer:e,gltf:t,imageElements:i}),s=(({gltf:t,buffers:n,renderer:e})=>{const r=new Map,o=new Map,i=[];t.meshes&&t.meshes.forEach(t=>{t.primitives.forEach(t=>{void 0!==t.indices&&i.push(t.indices)})}),t.accessors.map((t,n)=>({accessor:t,accessorId:n})).filter(({accessorId:n})=>(({gltf:t,accessorId:n})=>!!t.nodes&&t.nodes.some(e=>void 0!==e.mesh&&t.meshes[e.mesh].primitives.some(t=>t.indices===n||Object.keys(t.attributes).some(e=>t.attributes[e]===n)||t.targets&&t.targets.some(t=>Object.keys(t).some(e=>t[e]===n)))))({gltf:t,accessorId:n})).forEach(({accessor:u,accessorId:a})=>{const s=-1!==i.indexOf(a),c=Et({gltf:t,accessorId:a}),f=(({gltf:t,accessor:n,info:e})=>{const r=yt[n.type],o=void 0===n.bufferView?void 0:t.bufferViews[n.bufferView],i=void 0===o||void 0===o.byteStride?0:o.byteStride;return{size:r,type:n.componentType,normalized:void 0!==n.normalized&&n.normalized,stride:i,offset:e.sparse||!n.byteOffset?0:n.byteOffset}})({gltf:t,accessor:u,info:c});let l,p;if(u.sparse)l=Symbol(`accessor ${a}`),p=vt({gltf:t,buffers:n,info:c}).buffer;else{if(!r.has(c.bufferViewIndex)){const e=t.bufferViews[c.bufferViewIndex],o=e.byteOffset?e.byteOffset:0;r.set(c.bufferViewIndex,{rendererBufferId:Symbol(`${c.bufferViewIndex}`),buffer:n[c.bufferIndex].slice(o,o+e.byteLength)})}const e=r.get(c.bufferViewIndex);l=e.rendererBufferId,p=e.buffer}e.buffers.assign(l)({target:s?O.ELEMENT_ARRAY_BUFFER:O.ARRAY_BUFFER,usagePattern:O.STATIC_DRAW,data:p}),o.set(a,{strategy:f,rendererBufferId:l})});const u=new Map;return{accessorLookup:o,vaoIdLookup:u}})({gltf:t,buffers:u,renderer:e}),c=(({gltf:t,buffers:n})=>{const e=new Map;let o=0;return t.animations&&t.animations.forEach(i=>{i.channels.filter(t=>void 0!==t.target.node).forEach(u=>{const a=bt[u.target.path.toLowerCase()],s=i.samplers[u.sampler],c=At[s.interpolation?s.interpolation.toLowerCase():"linear"],f=t.accessors[s.input],l=vt({gltf:t,buffers:n,info:Et({gltf:t,accessorId:s.input})}),p=vt({gltf:t,buffers:n,info:Et({gltf:t,accessorId:s.output})}),h=t.accessors[s.output];let d=new Array(l.length);l.forEach((t,n)=>{const e=a===r.WEIGHTS?p.length/l.length:yt[h.type];d[n]={timing:t,values:1===e?p[n]:p.subarray(n*e,(n+1)*e)}}),e.set(o++,{keyframes:d,interpolation:c,targetPath:a,timeMin:f.min[0],timeMax:f.max[0]})})}),e})({gltf:t,buffers:u}),f=new Map;return Bt.map(t=>t.createData).reduce((r,o)=>(r=o({gltf:t,assets:n,renderer:e})(r),r),{original:t,animations:c,attributes:s,textures:a,shaders:f,initConfig:o,extensions:{}})},kt=function(){var t=new Array(128),n=String.fromCodePoint||String.fromCharCode,e=[];return function(r){var o,i,u=r.length;e.length=0;for(var a=0;a<u;)(i=r[a++])<=127?o=i:i<=223?o=(31&i)<<6|63&r[a++]:i<=239?o=(15&i)<<12|(63&r[a++])<<6|63&r[a++]:String.fromCodePoint?o=(7&i)<<18|(63&r[a++])<<12|(63&r[a++])<<6|63&r[a++]:(o=63,a+=3),e.push(t[o]||(t[o]=n(o)));return e.join("")}}(),Vt=t=>{const n=new Uint8Array(t),e=window.TextDecoder?new TextDecoder("utf-8").decode(n):kt(n);return JSON.parse(e)},Gt=t=>n=>{const e=new DataView(n,t,8),r=e.getUint32(0,!0),o=e.getUint32(4,!0),i=t+8,u=i+r,a=n.slice(i,u),s=[1313821514===o?Vt(a):5130562===o?a:null,u];return null===s[0]&&console.log(`unknown chunk type: ${o}`),s},Ht=t=>(t=>1179937895===(t=>{const n=new DataView(t,0,12);return{magic:n.getUint32(0,!0),version:n.getUint32(4,!0),length:n.getUint32(8,!0)}})(t).magic)(t)?(t=>{const[n,e]=Gt(12)(t),r=new Array;let o=e;for(;o<t.byteLength;){const[n,e]=Gt(o)(t);null!==n&&r.push(n),o+=e}return{gltf:n,glbBuffers:r}})(t):{gltf:Vt(t),glbBuffers:[]};let qt=0;const Xt={POSITION:"a_Position",NORMAL:"a_Normal",TANGENT:"a_Tangent",TEXCOORD_0:"a_UV",COLOR_0:"a_Color",JOINTS_0:"a_Skin_Joint",WEIGHTS_0:"a_Skin_Weight"},Wt=t=>t.sort((t,n)=>{if(t===n)return 0;const e=["POSITION","NORMAL","TANGENT","TEXCOOR_0","COLOR_0","JOINTS_0","WEIGHTS_0"],r=e.indexOf(t),o=e.indexOf(n);return r<o?-1:r>o?1:0}),zt=t=>Wt(Object.keys(t.attributes)),$t=({renderer:t,data:n})=>{const e=n.original,r=new Map;return void 0===e.nodes||null===e.nodes?r:(e.nodes.map((t,n)=>[t,n]).filter(([t,n])=>void 0!==t.mesh&&null!==t.mesh).forEach(([o,u])=>r.set(o.mesh,e.meshes[o.mesh].primitives.map((r,s)=>{e.meshes[o.mesh];const c=Object.assign({vaoId:(({renderer:t,originalPrimitive:n,data:e})=>{const r={data:[]},o=e.attributes.accessorLookup;void 0!==n.indices&&(r.elementBufferId=o.get(n.indices).rendererBufferId),zt(n).forEach(e=>{const i=n.attributes[e],u=Xt[e];if(!o.has(i))throw new Error("bug here!");r.data.push(Object.assign({location:t.attributes.getLocationInRenderer(u),bufferId:o.get(i).rendererBufferId},o.get(i).strategy))});const{targets:i}=n;if(i){let n=0;i.forEach(e=>{Wt(Object.keys(e)).forEach(i=>{const u=e[i],a=`a_Morph_${n++}`;r.data.push(Object.assign({location:t.attributes.getLocationInRenderer(a),bufferId:o.get(u).rendererBufferId},o.get(u).strategy))})})}const u=qt++,a=Symbol();return e.attributes.vaoIdLookup.set(u,a),t.vertexArrays.assign(a)(r),u})({renderer:t,originalPrimitive:r,data:n})},(({originalPrimitive:t,data:n})=>{const e={drawKind:void 0!==t.indices?a.ELEMENTS:a.ARRAY,drawMode:t.mode?t.mode:O.TRIANGLES};if(e.drawKind===a.ELEMENTS)e.elementsId=t.indices;else{const r=zt(t);e.arrayCount=n.original.accessors[t.attributes[r[0]]].count}return e})({originalPrimitive:r,data:n}));return void 0!==r.material&&(c.material=(({gltf:t,materialId:n,data:e})=>{const r=t.materials[n],o={};if(o.metallicRoughnessValues=Float64Array.from([1,1]),o.baseColorFactor=Float64Array.from([1,1,1,1]),r.pbrMetallicRoughness&&(void 0!==r.pbrMetallicRoughness.metallicFactor&&(o.metallicRoughnessValues[0]=r.pbrMetallicRoughness.metallicFactor),void 0!==r.pbrMetallicRoughness.roughnessFactor&&(o.metallicRoughnessValues[1]=r.pbrMetallicRoughness.roughnessFactor),void 0!==r.pbrMetallicRoughness.baseColorFactor&&(o.baseColorFactor=Float64Array.from(r.pbrMetallicRoughness.baseColorFactor)),void 0!==r.pbrMetallicRoughness.baseColorTexture&&(o.baseColorSamplerIndex=r.pbrMetallicRoughness.baseColorTexture.index),void 0!==r.pbrMetallicRoughness.metallicRoughnessTexture&&(o.metallicRoughnessSamplerIndex=r.pbrMetallicRoughness.metallicRoughnessTexture.index)),void 0!==r.normalTexture){const t=void 0!==r.normalTexture.scale?r.normalTexture.scale:1;o.normal={scale:t,samplerIndex:r.normalTexture.index}}if(void 0!==r.occlusionTexture){const t=void 0!==r.occlusionTexture.strength?r.occlusionTexture.strength:1;o.occlusion={strength:t,samplerIndex:r.occlusionTexture.index}}if(void 0!==r.emissiveTexture&&(o.emissiveSamplerIndex=r.emissiveTexture.index),void 0!==r.emissiveFactor&&(o.emissiveFactor=Float64Array.from(r.emissiveFactor)),r.alphaMode)switch(r.alphaMode){case"BLEND":o.alphaMode=i.BLEND;break;case"MASK":o.alphaMode=i.MASK;break;default:o.alphaMode=i.OPAQUE}return o.doubleSided=!!r.doubleSided,o.alphaCutoff=void 0===r.alphaCutoff?.5:r.alphaCutoff,o})({gltf:e,materialId:r.material,data:n})),c.shaderConfig=(t=>n=>e=>Bt.map(t=>t.initialShaderConfig_Primitive).reduce((r,o)=>(r=o(t)(n)(e)(r),r),(t=>n=>e=>{t.original;const r=t.original.nodes[n.nodeId],o=t.original.meshes[n.meshId].primitives[n.primitiveId],u=t=>n=>-1!==Object.keys(t.attributes).indexOf(n),a=e.material;let s=0,c=0,f=0,l=0,p=0;return void 0!==r.skin&&(p=t.original.skins[r.skin].joints.length),o.targets&&o.targets.forEach(t=>{Wt(Object.keys(t)).forEach(t=>{switch(t){case"POSITION":c++;break;case"NORMAL":f++;break;case"TANGENT":l++;break;default:console.warn("unknown...",t)}}),s++}),{nMorphWeights:s,nPositionMorphs:c,nNormalMorphs:f,nTangentMorphs:l,nSkinJoints:p,alphaMode:a&&a.alphaMode?a.alphaMode:i.OPAQUE,hasNormalAttributes:u(o)("NORMAL"),hasTangentAttributes:u(o)("TANGENT"),hasUvAttributes:u(o)("TEXCOORD_0"),hasColorAttributes:u(o)("COLOR_0"),hasBaseColorMap:a&&void 0!==a.baseColorSamplerIndex,hasNormalMap:a&&void 0!==a.normal,hasEmissiveMap:a&&void 0!==a.emissiveSamplerIndex,hasMetalRoughnessMap:a&&void 0!==a.metallicRoughnessSamplerIndex,hasOcclusionMap:a&&void 0!==a.occlusion,manualSRGB:!0===t.initConfig.manualSRGB,fastSRGB:!0===t.initConfig.fastSRGB}})(t)(n)(e)))(n)({nodeId:u,meshId:o.mesh,primitiveId:s})(c),c}))),r)},Yt=({gltf:t,primitives:n,data:e,assets:r})=>{const o=(({gltf:t,buffers:n})=>{const e=new Map;return t.skins&&t.skins.length?(t.skins.forEach((r,o)=>{const i=r.inverseBindMatrices?(t=>{const n=new Array;for(let e=0;e<t.length;)n.push(t.slice(e,e+16)),e+=16;return n})(vt({gltf:t,buffers:n,info:Et({gltf:t,accessorId:r.inverseBindMatrices})})):r.joints.map(x);if(i.length!==r.joints.length)throw new Error("inverse bind matrices mismatch!");let u;const a={joints:r.joints.map((t,n)=>{const e={originalNodeId:t,inverseBindMatrix:i[n]};return void 0!==r.skeleton&&r.skeleton===t&&(u=t),e})};void 0!==u&&(a.skeletonRootId=u),e.set(o,a)}),e):e})({gltf:t,buffers:r.buffers}),i=e=>r=>a=>{const s={originalNodeId:r,kind:void 0!==a.mesh&&n.has(a.mesh)&&n.get(a.mesh).length?u.MESH:void 0!==a.camera?S.CAMERA:void 0},c=a.matrix?B(Float64Array.from(a.matrix)):function(t){const n={translation:Float64Array.from([0,0,0]),rotation:Float64Array.from([0,0,0,1]),scale:Float64Array.from([1,1,1])};return Object.keys(n).forEach(e=>{const r=t[e];r&&(n[e]=r)}),n}(a),f=a.matrix?new Float64Array(a.matrix):j(c),l=D(e)(f);if(s.transform={trs:c,localMatrix:f,modelMatrix:l},s.kind===u.MESH&&t.meshes[a.mesh].primitives.some(t=>(t=>-1!==Object.keys(t.attributes).indexOf("NORMAL"))(t))&&(s.transform.normalMatrix=k(l)),s.kind===u.MESH){if(s.primitives=n.get(a.mesh),void 0!==a.skin){const t=o.get(a.skin);s.skin={skinId:a.skin,joints:t.joints.slice()},void 0!==t.skeletonRootId&&(s.skin.skeletonRootId=t.skeletonRootId)}const e=a.weights?Float64Array.from(a.weights):t.meshes[a.mesh].weights?Float64Array.from(t.meshes[a.mesh].weights):void 0;e&&(s.morphWeights=e)}else s.kind===S.CAMERA&&(s.camera={settings:(t=>"orthographic"===t.type?{kind:R.ORTHOGRAPHIC,xmag:t.orthographic.xmag,ymag:t.orthographic.ymag,znear:t.orthographic.znear,zfar:t.orthographic.zfar}:{kind:R.PERSPECTIVE,aspectRatio:t.perspective.aspectRatio,yfov:t.perspective.yfov,znear:t.perspective.znear,zfar:t.perspective.zfar})(t.cameras[a.camera])},s.cameraIndex=a.camera);const p=Bt.map(t=>t.createNode).reduce((n,e)=>(n=e(t)(a)(n),n),s);return a.children?Object.assign({},p,{children:a.children.map(n=>i(l)(n)(t.nodes[n]))}):p};return(({gltf:t,nodes:n})=>{let e=0;return t.animations&&t.animations.forEach(t=>{t.channels.filter(t=>void 0!==t.target.node).forEach(t=>{ft(n=>(n.originalNodeId===t.target.node&&(n.animationIds&&-1!==n.animationIds.indexOf(e)||(n.animationIds||(n.animationIds=[]),n.animationIds.push(e))),n))(n),e++})}),n})({gltf:t,nodes:t.nodes.map((t,n)=>i(null)(n)(t))})};var Kt;!function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT"}(Kt||(Kt={}));const Jt=({renderer:t,activateShader:n})=>{const{gl:e}=t,r={uniformLocations:new Map,uniformValues:new Map,uniformSingleValues:new Map,uniformMatrixTranspose:new Map},o=t=>{const{program:o}=n();return r.uniformLocations.has(t)||r.uniformLocations.set(t,e.getUniformLocation(o,t)),r.uniformLocations.get(t)},i=t=>null!==t&&void 0!==t&&-1!=t,u=t=>n=>{if(!r.uniformValues.has(t))return!1;const e=r.uniformValues.get(t);if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0},a=t=>n=>e=>{if(!r.uniformValues.has(n)){switch(t){case Kt.FLOAT:r.uniformValues.set(n,new Float32Array(e.length));break;case Kt.INT:r.uniformValues.set(n,new Int32Array(e.length))}return}const o=r.uniformValues.get(n);for(let t=0;t<e.length;t++)o[t]=e[t]},s=t=>n=>e=>{if(!r.uniformSingleValues.has(n)||r.uniformSingleValues.get(n)!==e){r.uniformSingleValues.set(n,e);const u=o(n);i(u)&&t(u)(e)}},c=t=>n=>e=>s=>{if(!u(e)(s)){a(t)(e)(s);const u=o(e);i(u)&&n(u)(r.uniformValues.get(e))}},f=t=>n=>e=>s=>c=>{if(!r.uniformMatrixTranspose.has(e)||r.uniformMatrixTranspose.get(e)!==s||!u(e)(c)){a(t)(e)(c),r.uniformMatrixTranspose.set(e,s);const u=o(e);i(u)&&n(u)(s)(r.uniformValues.get(e))}},l={uniform1f:s(t=>n=>e.uniform1f(t,n)),uniform1fv:c(Kt.FLOAT)(t=>n=>e.uniform1fv(t,n)),uniform1i:s(t=>n=>e.uniform1i(t,n)),uniform1iv:c(Kt.INT)(t=>n=>e.uniform1iv(t,n)),uniform2f:c(Kt.FLOAT)(t=>n=>e.uniform2f(t,n[0],n[1])),uniform2fv:c(Kt.FLOAT)(t=>n=>e.uniform2fv(t,n)),uniform2i:c(Kt.INT)(t=>n=>e.uniform2i(t,n[0],n[1])),uniform2iv:c(Kt.INT)(t=>n=>e.uniform2iv(t,n)),uniform3f:c(Kt.FLOAT)(t=>n=>e.uniform3f(t,n[0],n[1],n[2])),uniform3fv:c(Kt.FLOAT)(t=>n=>e.uniform3fv(t,n)),uniform3i:c(Kt.INT)(t=>n=>e.uniform3i(t,n[0],n[1],n[2])),uniform3iv:c(Kt.INT)(t=>n=>e.uniform3iv(t,n)),uniform4f:c(Kt.FLOAT)(t=>n=>e.uniform4f(t,n[0],n[1],n[2],n[3])),uniform4fv:c(Kt.FLOAT)(t=>n=>e.uniform4fv(t,n)),uniform4i:c(Kt.INT)(t=>n=>e.uniform4i(t,n[0],n[1],n[2],n[3])),uniform4iv:c(Kt.INT)(t=>n=>e.uniform4iv(t,n)),uniformMatrix2fv:f(Kt.FLOAT)(t=>n=>r=>e.uniformMatrix2fv(t,n,r)),uniformMatrix3fv:f(Kt.FLOAT)(t=>n=>r=>e.uniformMatrix3fv(t,n,r)),uniformMatrix4fv:f(Kt.FLOAT)(t=>n=>r=>e.uniformMatrix4fv(t,n,r))};return{cache:r,setters:l,getLocation:o,validLocation:i,hasLocation:t=>i(o(t))}};let Zt;const Qt=new Map,tn=t=>(Zt&&Zt.shaderId===t||(Zt=Qt.get(t)).gl.useProgram(Zt.program),Zt),nn=t=>tn(t),en=({renderer:t,shaderId:n,source:e})=>{const r=(({renderer:t,source:n})=>{let e,r;const{gl:o}=t,i=o.createProgram(),u=()=>{void 0!==e&&e instanceof WebGLShader&&o.deleteShader(e),void 0!==r&&r instanceof WebGLShader&&o.deleteShader(r),o.deleteProgram(i)},a=t=>n=>{const e=o.createShader(t);if(o.shaderSource(e,n),o.compileShader(e),!o.getShaderParameter(e,o.COMPILE_STATUS)){const n=`${(t=>t===o.VERTEX_SHADER?"vertex":"fragment")(t)} error: `+o.getShaderInfoLog(e);throw new Error(n)}return o.attachShader(i,e),e};if((e=a(o.VERTEX_SHADER)(n.vertex))instanceof Error)return u(),e;if((r=a(o.FRAGMENT_SHADER)(n.fragment))instanceof Error)return u(),r;let s=0;return t.attributes.globalLocations.forEach(t=>{o.bindAttribLocation(i,s,t),s++}),o.linkProgram(i),o.getProgramParameter(i,o.LINK_STATUS)?i:(u(),new Error("Unable to initialize the shader program: "+o.getProgramInfoLog(i)))})({source:e,renderer:t}),o={gl:t.gl,shaderId:n,program:r,uniforms:Jt({renderer:t,activateShader:()=>tn(n)})};return Qt.set(n,o),o},rn=new Uint8Array(18),on=new Uint8Array(30),un=new Uint8Array(30),an=new Uint8Array(30),sn=t=>{let n=1<<t.length;for(let e=0;e<t.length;e++)n|=t[e]<<t.length-e-1;return n},cn=t=>n=>e=>Bt.map(t=>t.getShaderSource).reduce((r,o)=>(r=o(t)(n)(e)(r),r),fn(t)(n)(e)),fn=t=>n=>e=>{t.original;const r=[];switch(e.hasNormalAttributes&&r.push("HAS_NORMALS"),e.hasTangentAttributes&&r.push("HAS_TANGENTS"),e.hasUvAttributes&&r.push("HAS_UV"),e.hasColorAttributes&&r.push("HAS_COLOR"),e.hasBaseColorMap&&r.push("HAS_BASECOLORMAP"),e.hasNormalMap&&r.push("HAS_NORMALMAP"),e.hasEmissiveMap&&r.push("HAS_EMISSIVEMAP"),e.hasMetalRoughnessMap&&r.push("HAS_METALROUGHNESSMAP"),e.hasOcclusionMap&&r.push("HAS_OCCLUSIONMAP"),e.manualSRGB&&r.push("MANUAL_SRGB"),e.fastSRGB&&r.push("SRGB_FAST_APPROXIMATION"),e.nSkinJoints&&r.push("HAS_SKIN"),e.alphaMode){case i.MASK:r.push("HAS_ALPHA_CUTOFF");break;case i.BLEND:r.push("HAS_ALPHA_BLEND")}const o=r.map(t=>`#define ${t} 1\n`).join("");return{vertex:ln(t)(n)(e)(o+"precision highp float;\nprecision highp int;\n\n%MORPH_VARS%\n\n#ifdef HAS_SKIN\nattribute vec4 a_Skin_Joint;\nattribute vec4 a_Skin_Weight;\nuniform mat4 u_Skin_Matrices[%SKIN_JOINT_COUNT%];\n#endif\n\nattribute vec4 a_Position;\n#ifdef HAS_NORMALS\nattribute vec4 a_Normal;\n#endif\n#ifdef HAS_TANGENTS\nattribute vec4 a_Tangent;\n#endif\n#ifdef HAS_UV\nattribute vec2 a_UV;\n#endif\n#ifdef HAS_COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\nuniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 v_Position;\nvarying vec2 v_UV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 v_TBN;\n#else\nvarying vec3 v_Normal;\n#endif\n#endif\n\n\nvoid main()\n{\n\n  \n\n  vec4 m_Position = a_Position;\n  #ifdef HAS_NORMALS\n    vec4 m_Normal = a_Normal;\n  #endif\n  #ifdef HAS_TANGENTS\n    vec4 m_Tangent = a_Tangent;\n  #endif\n\n#ifdef HAS_SKIN\n    mat4 skinMat = a_Skin_Weight[0] * u_Skin_Matrices[int(a_Skin_Joint[0])]\n        +   a_Skin_Weight[1] * u_Skin_Matrices[int(a_Skin_Joint[1])]\n        +   a_Skin_Weight[2] * u_Skin_Matrices[int(a_Skin_Joint[2])]\n        +   a_Skin_Weight[3] * u_Skin_Matrices[int(a_Skin_Joint[3])];\n\n    m_Position = skinMat * m_Position;\n#endif\n    %MORPH_FUNCS%\n\n\n  \n  vec4 pos = u_ModelMatrix * m_Position;\n  v_Position = vec3(pos.xyz) / pos.w;\n\n  #ifdef HAS_NORMALS\n  #ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(m_Normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(m_Tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * m_Tangent.w;\n  v_TBN = mat3(tangentW, bitangentW, normalW);\n  #else // HAS_TANGENTS != 1\n  v_Normal = normalize(vec3(u_ModelMatrix * vec4(m_Normal.xyz, 0.0)));\n  #endif\n  #endif\n\n  #ifdef HAS_UV\n  v_UV = a_UV;\n  #else\n  v_UV = vec2(0.,0.);\n  #endif\n\n    #ifdef HAS_COLOR\n    v_Color = a_Color;\n    #endif\n\n\n  gl_Position = u_MVPMatrix * m_Position; // needs w for proper perspective correction\n}\n\n"),fragment:o+"//\n// This fragment shader defines a reference implementation for Physically Based Shading of\n// a microfacet surface material defined by a glTF model.\n//\n// References:\n// [1] Real Shading in Unreal Engine 4\n//     http://blog.selfshadow.com/publications/s2013-shading-course/karis/s2013_pbs_epic_notes_v2.pdf\n// [2] Physically Based Shading at Disney\n//     http://blog.selfshadow.com/publications/s2012-shading-course/burley/s2012_pbs_disney_brdf_notes_v3.pdf\n// [3] README.md - Environment Maps\n//     https://github.com/KhronosGroup/glTF-WebGL-PBR/#environment-maps\n// [4] \"An Inexpensive BRDF Model for Physically based Rendering\" by Christophe Schlick\n//     https://www.cs.virginia.edu/~jdl/bib/appearance/analytic%20models/schlick94b.pdf\n\n///////////////////////////////\n// Quality settings \n///////////////////////////////\n\nprecision highp float;\nprecision highp int;\n\n///////////////////////////////\n// Extensions \n///////////////////////////////\n\n#extension GL_EXT_shader_texture_lod: enable\n#extension GL_OES_standard_derivatives : enable\n\n///////////////////////////////\n// Structs \n///////////////////////////////\n\nstruct Fragment \n{\n    vec3 normal; // fragment normal\n    vec3 vectorToCamera; //normalized vector from surface point to camera\n    vec3 reflection; //reflection vector\n    float NdotV; // cos angle between normal and view direction\n};\n\nstruct Pbr \n{\n    vec4 baseColor;\n    float perceptualRoughness;    // roughness value, as authored by the model creator (input to shader)\n    float metalness;              // metallic value at the surface\n    vec3 reflectance0;            // full reflectance color (normal incidence angle)\n    vec3 reflectance90;           // reflectance color at grazing angle\n    float alphaRoughness;         // roughness mapped to a more linear change in the roughness (proposed by [2])\n    vec3 diffuseColor;            // color contribution from diffuse lighting\n    vec3 specularColor;           // color contribution from specular lighting\n};\n\nstruct Light\n{\n    float NdotL;                  // cos angle between normal and light direction\n    float NdotH;                  // cos angle between normal and half vector\n    float LdotH;                  // cos angle between light direction and half vector\n    float VdotH;                  // cos angle between view direction and half vector\n    vec3 color;                   // attenuated color\n};\n\n///////////////////////////////\n// Constants \n///////////////////////////////\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\n\n///////////////////////////////\n// Uniforms and Attributes \n///////////////////////////////\n\n#ifdef USE_PUNCTUAL_LIGHTS\n%PUNCTUAL_LIGHTS_VARS%\n#endif\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\nuniform float u_AlphaCutoff; \n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef HAS_COLOR\nvarying vec4 v_Color;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n\n\n///////////////////////////////\n// Varyings \n///////////////////////////////\n\nvarying vec3 v_Position;\n\nvarying vec2 v_UV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 v_TBN;\n#else\nvarying vec3 v_Normal;\n#endif\n#endif\n\n///////////////////////////////\n// Pure functions\n///////////////////////////////\n\n// Convert color space\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n    #ifdef MANUAL_SRGB\n        #ifdef SRGB_FAST_APPROXIMATION\n            vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n        #else //SRGB_FAST_APPROXIMATION\n            vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n            vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n        #endif //SRGB_FAST_APPROXIMATION\n        \n        return vec4(linOut,srgbIn.w);\n    #else //MANUAL_SRGB\n        return srgbIn;\n    #endif //MANUAL_SRGB\n}\n\n\n// Basic Lambertian diffuse\n// Implementation from Lambert's Photometria https://archive.org/details/lambertsphotome00lambgoog\n// See also [1], Equation 1\nvec3 diffuse(Pbr pbr, Fragment fragment, Light light)\n{\n    return pbr.diffuseColor / M_PI;\n}\n\n// The following equation models the Fresnel reflectance term of the spec equation (aka F())\n// Implementation of fresnel from [4], Equation 15\nvec3 specularReflection(Pbr pbr, Fragment fragment, Light light)\n{\n    return pbr.reflectance0 + (pbr.reflectance90 - pbr.reflectance0) * pow(clamp(1.0 - light.VdotH, 0.0, 1.0), 5.0);\n}\n\n// This calculates the specular geometric attenuation (aka G()),\n// where rougher material will reflect less light back to the viewer.\n// This implementation is based on [1] Equation 4, and we adopt their modifications to\n// alphaRoughness as input as originally proposed in [2].\nfloat geometricOcclusion(Pbr pbr, Fragment fragment, Light light)\n{\n    float NdotL = light.NdotL;\n    float NdotV = fragment.NdotV;\n    float r = pbr.alphaRoughness;\n\n    float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n    float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n    return attenuationL * attenuationV;\n}\n\n// The following equation(s) model the distribution of microfacet normals across the area being drawn (aka D())\n// Implementation from \"Average Irregularity Representation of a Roughened Surface for Ray Reflection\" by T. S. Trowbridge, and K. P. Reitz\n// Follows the distribution function recommended in the SIGGRAPH 2013 course notes from EPIC Games [1], Equation 3.\nfloat microfacetDistribution(Pbr pbr, Fragment fragment, Light light)\n{\n    float roughnessSq = pbr.alphaRoughness * pbr.alphaRoughness;\n    float f = (light.NdotH * roughnessSq - light.NdotH) * light.NdotH + 1.0;\n    return roughnessSq / (M_PI * f * f);\n}\n\n///////////////////////////////\n// Data functions\n///////////////////////////////\n\n\n// Get the PBR info from uniforms and attributes\nPbr getPbr() {\n    // Metallic and Roughness material properties are packed together\n    // In glTF, these factors can be specified by fixed scalar values\n    // or from a metallic-roughness map\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n    #ifdef HAS_METALROUGHNESSMAP\n    // Roughness is stored in the 'g' channel, metallic is stored in the 'b' channel.\n    // This layout intentionally reserves the 'r' channel for (optional) occlusion map data\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, v_UV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n    #endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n    // Roughness is authored as perceptual roughness; as is convention,\n    // convert to material roughness by squaring the perceptual roughness [2].\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    // The albedo may be defined from a base texture or a flat color\n    #ifdef HAS_BASECOLORMAP\n    vec4 textureColor = texture2D(u_BaseColorSampler, v_UV);\n    vec4 baseColor = SRGBtoLINEAR(textureColor) * u_BaseColorFactor;\n    #else\n    vec4 baseColor = u_BaseColorFactor;\n    #endif\n\n    #ifdef HAS_ALPHA_CUTOFF\n    if(baseColor.a < u_AlphaCutoff) {\n        discard;\n    }\n\n    #endif\n\n    #ifndef HAS_ALPHA_BLEND\n    baseColor.a = 1.0;\n    #endif\n\n    vec3 f0 = vec3(0.04);\n    #ifdef HAS_COLOR\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0) * SRGBtoLINEAR(v_Color).rgb;\n    diffuseColor *= 1.0 - metallic;\n    #else\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    #endif\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n\n    // Compute reflectance.\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n    // For typical incident reflectance range (between 4% to 100%) set the grazing reflectance to 100% for typical fresnel effect.\n    // For very low reflectance range on highly diffuse objects (below 4%), incrementally reduce grazing reflecance to 0%.\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    return Pbr(\n            baseColor,\n            perceptualRoughness,\n            metallic,\n            specularEnvironmentR0,\n            specularEnvironmentR90,\n            alphaRoughness,\n            diffuseColor,\n            specularColor\n    );\n}\n\n// Find the normal for this fragment, pulling either from a predefined normal map\n// or from the interpolated mesh normal and tangent attributes.\n// used only by getFragment()\nvec3 getNormal()\n{\n    // Retrieve the tangent space matrix\n    #ifndef HAS_TANGENTS\n    vec3 pos_dx = dFdx(v_Position);\n    vec3 pos_dy = dFdy(v_Position);\n    vec3 tex_dx = dFdx(vec3(v_UV, 0.0));\n    vec3 tex_dy = dFdy(vec3(v_UV, 0.0));\n    vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n    #ifdef HAS_NORMALS\n    vec3 ng = normalize(v_Normal);\n    #else\n    vec3 ng = cross(pos_dx, pos_dy);\n    #endif\n\n    t = normalize(t - ng * dot(ng, t));\n    vec3 b = normalize(cross(ng, t));\n    mat3 tbn = mat3(t, b, ng);\n    #else // HAS_TANGENTS\n    mat3 tbn = v_TBN;\n    #endif\n\n    #ifdef HAS_NORMALMAP\n    vec3 n = texture2D(u_NormalSampler, v_UV).rgb;\n    n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n    #else\n    // The tbn matrix is linearly interpolated, so we need to re-normalize\n    vec3 n = normalize(tbn[2].xyz);\n    #endif\n\n    return n;\n}\n\n//Get Fragment info\nFragment getFragment() {\n    vec3 normal = getNormal();\n    vec3 vectorToCamera = normalize(u_Camera - v_Position); \n    vec3 reflection = -normalize(reflect(vectorToCamera, normal));\n    float NdotV = abs(dot(normal, vectorToCamera)) + 0.001;\n    return Fragment(normal, vectorToCamera, reflection, NdotV);\n}\n\n#ifdef USE_PUNCTUAL_LIGHTS\n//Directional light based on normal and dynamic light info\nLight getDirectionalLight(Fragment fragment, vec3 lightDirection, vec3 color, float intensity) {\n    vec3 N = fragment.normal;\n    vec3 V = fragment.vectorToCamera;\n    float NdotV = fragment.NdotV;\n\n    vec3 L = -normalize(lightDirection);   // Light Direction\n    vec3 H = normalize(L+V);                          // Half vector between both l and v\n\n    float NdotL = clamp(dot(N, L), 0.001, 1.0);\n    float NdotH = clamp(dot(N, H), 0.0, 1.0);\n    float LdotH = clamp(dot(L, H), 0.0, 1.0);\n    float VdotH = clamp(dot(V, H), 0.0, 1.0);\n\n    return Light(\n        NdotL,\n        NdotH,\n        LdotH,\n        VdotH,\n        color * intensity\n    );\n}\n\n//Point light\nLight getPointLight(Fragment fragment, vec3 lightPosition, vec3 color, float intensity) {\n\n    vec3 N = fragment.normal;\n    vec3 V = fragment.vectorToCamera;\n    float NdotV = fragment.NdotV;\n\n    vec3 L = normalize(lightPosition - v_Position);   // Light Direction \n    vec3 H = normalize(L+V);                          // Half vector between both l and v\n\n    float NdotL = clamp(dot(N, L), 0.001, 1.0);\n    float NdotH = clamp(dot(N, H), 0.0, 1.0);\n    float LdotH = clamp(dot(L, H), 0.0, 1.0);\n    float VdotH = clamp(dot(V, H), 0.0, 1.0);\n\n    float distance    = length(lightPosition - v_Position);\n    float attenuation = 1.0 / (distance * distance);\n\n    Light light = Light(\n        NdotL,\n        NdotH,\n        LdotH,\n        VdotH,\n        color * intensity * attenuation\n    );\n\n    return light;\n}\n\n\n//Spot light\nLight getSpotLight(Fragment fragment, vec3 lightPosition, vec3 lightDirection, float lightAngleScale, float lightAngleOffset, vec3 color, float intensity) {\n\n    vec3 N = fragment.normal;\n    vec3 V = fragment.vectorToCamera;\n    float NdotV = fragment.NdotV;\n\n    vec3 L = normalize(lightPosition - v_Position);   // Light Direction \n    vec3 H = normalize(L+V);                          // Half vector between both l and v\n\n    float NdotL = clamp(dot(N, L), 0.001, 1.0);\n    float NdotH = clamp(dot(N, H), 0.0, 1.0);\n    float LdotH = clamp(dot(L, H), 0.0, 1.0);\n    float VdotH = clamp(dot(V, H), 0.0, 1.0);\n\n    float distance    = length(lightPosition - v_Position);\n    float attenuation = 1.0 / (distance * distance);\n\n    float cd = dot(lightDirection, V);\n    float coneAttentuation = clamp(cd * lightAngleScale + lightAngleOffset, 0.0, 1.0);\n    coneAttentuation *= coneAttentuation;   \n    attenuation = attenuation * coneAttentuation;\n\n    Light light = Light(\n        NdotL,\n        NdotH,\n        LdotH,\n        VdotH,\n        color * intensity * attenuation\n    );\n\n    return light;\n}\n#endif\n\n// Calculation of the lighting contribution from an optional Image Based Light source.\n// Precomputed Environment Maps are required uniform inputs and are computed as outlined in [1].\n// See our README.md on Environment Maps [3] for additional discussion.\n#ifdef USE_IBL\nvec3 getIBLContribution(Pbr pbr, Fragment fragment)\n{\n    float mipCount = 9.0; // resolution of 512x512\n    float lod = (pbr.perceptualRoughness * mipCount);\n    // retrieve a scale and bias to F0. See [1], Figure 3\n    \n    vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT, vec2(fragment.NdotV, 1.0 - pbr.perceptualRoughness))).rgb;\n    vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, fragment.normal)).rgb;\n    \n\n    #ifdef USE_TEX_LOD\n    vec3 specularLight = SRGBtoLINEAR(textureCubeLodEXT(u_SpecularEnvSampler, fragment.reflection, lod)).rgb;\n    #else\n    vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, fragment.reflection)).rgb;\n    #endif\n\n    vec3 diffuse = diffuseLight * pbr.diffuseColor;\n    vec3 specular = specularLight * (pbr.specularColor * brdf.x + brdf.y);\n\n    return diffuse + specular;\n}\n#endif\n\n\nvec3 getColor(Pbr pbr, Fragment fragment, Light light) {\n\n    // Calculate the shading terms for the microfacet specular shading model\n    vec3 F = specularReflection(pbr, fragment, light);\n    float G = geometricOcclusion(pbr, fragment, light);\n    float D = microfacetDistribution(pbr, fragment, light);\n\n    // Calculation of analytical lighting contribution\n    vec3 diffuseContrib = (1.0 - F) * diffuse(pbr, fragment, light);\n    vec3 specContrib = F * G * D / (4.0 * light.NdotL * fragment.NdotV);\n    // Obtain final intensity as reflectance (BRDF) scaled by the energy of the light (cosine law)\n    vec3 color = light.NdotL * light.color * (diffuseContrib + specContrib);\n    \n\n    return color;\n}\n\nvoid main()\n{\n    Pbr pbr = getPbr();\n    Fragment fragment = getFragment();\n\n    vec3 color = vec3(0.0, 0.0, 0.0);\n    Light light;\n    #ifdef USE_PUNCTUAL_LIGHTS\n        //Actual implementation will dynamically write the code here\n        %PUNCTUAL_LIGHTS_FUNCS%\n\n    /*\n         light = getDirectionalLight(\n                    fragment,\n                    vec3(0,0,-1),\n                    vec3(1.0, 1.0, 1.0),\n                    100.0\n        );\n\n        color += getColor(pbr, fragment, light);\n      */  \n        //Manual example\n        /*\n        light = getDirectionalLight(\n                    fragment,\n                    vec3(-1,-1,-1),\n                    vec3(1.0, 0, 1.0),\n                    3.0\n        );\n\n        color += getColor(pbr, fragment, light);\n        light = getPointLight(\n                    fragment,\n                    vec3(-3,3,3),\n                    vec3(1.0, 1.0, 1.0),\n                    100.0\n        );\n\n        color += getColor(pbr, fragment, light);\n        */\n    #endif\n\n    #ifdef USE_IBL\n        // Calculate lighting contribution from image based lighting source (IBL)\n        color += getIBLContribution(pbr, fragment);\n    #endif\n\n    // Apply optional PBR terms for additional (optional) shading\n    #ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, v_UV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n    #endif\n\n    #ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, v_UV)).rgb * u_EmissiveFactor;\n    color += emissive;\n    #endif\n\n\n    \n    gl_FragColor = vec4(pow(color,vec3(1.0/2.2)), pbr.baseColor.a);\n}\n"}},ln=t=>t=>t=>n=>{let e="",r="",o=0,i=0;const u=t=>n=>{for(let u=0;u<t;u++){const t=`a_Morph_${o}`;e+=`attribute vec4 ${t};\n`,r+=`${n} += (u_MorphWeights[${i}] * ${t});\n`,o++}i++};t.nPositionMorphs&&u(t.nPositionMorphs)("m_Position"),t.nNormalMorphs&&u(t.nPositionMorphs)("m_Normal"),t.nTangentMorphs&&u(t.nPositionMorphs)("m_Tangent"),i&&(e+=`uniform float u_MorphWeights[${i}];\n`);let a="";return t.nSkinJoints&&(a=t.nSkinJoints.toString()),n.replace("%MORPH_VARS%",e).replace("%MORPH_FUNCS%",r).replace("%SKIN_JOINT_COUNT%",a)},pn=new Float64Array(3),hn={directional:[void 0],point:[void 0],spot:[void 0]};for(let t=1;t<A;t++)hn.directional.push({direction:new Float32Array(3*t),color:new Float32Array(3*t),intensity:new Float32Array(t)}),hn.point.push({position:new Float32Array(3*t),color:new Float32Array(3*t),intensity:new Float32Array(t)}),hn.spot.push({position:new Float32Array(3*t),direction:new Float32Array(3*t),color:new Float32Array(3*t),intensity:new Float32Array(t),angleScale:new Float32Array(t),angleOffset:new Float32Array(t)});const dn=t=>n=>e=>{const r=new Map,o=new Map,c=new Array,f=e.shaderConfig.lights?(t=>{const n={directional:hn.directional[t.shaderConfig.lights.nDirectionalLights],point:hn.point[t.shaderConfig.lights.nPointLights],spot:hn.spot[t.shaderConfig.lights.nSpotLights]};return n.directional&&(n.directional.offset=0),n.point&&(n.point.offset=0),n.spot&&(n.spot.offset=0),n})(e):void 0;nt(t=>{if(t.kind===u.MESH&&t.transform&&t.transform.modelViewProjectionMatrix)c.push(t);else if(t.kind===S.LIGHT){const n=t.light,e=(()=>{switch(n.kind){case N.Directional:return f.directional;case N.Point:return f.point;case N.Spot:return f.spot}})(),r=n.color,o=n.intensity,i=n.kind===N.Point||n.kind===N.Spot?s.mat4.getTranslation(pn,t.transform.modelMatrix):void 0,u=n.direction;for(let t=0;t<3;t++){const n=3*e.offset+t;void 0!==i&&(e.position[n]=i[t]),void 0!==u&&(e.direction[n]=u[t]),e.color[n]=r[t]}n.kind===N.Spot&&(e.angleScale[e.offset]=n.angleScale,e.angleOffset[e.offset]=n.angleOffset),e.intensity[e.offset]=o,e.offset++}})(e.nodes),c.forEach(u=>{let s;void 0!==u.skin&&u.skin.skinMatrices&&(s=u.skin.skinMatrices),u.primitives.forEach(c=>{const l=(({renderer:t,data:n})=>e=>{const r=(t=>n=>{if(rn.fill(0),on.fill(0),un.fill(0),an.fill(0),n.hasNormalAttributes&&(rn[0]=1),n.hasTangentAttributes&&(rn[1]=1),n.hasUvAttributes&&(rn[2]=1),n.hasColorAttributes&&(rn[3]=1),n.hasBaseColorMap&&(rn[4]=1),n.hasNormalMap&&(rn[5]=1),n.hasEmissiveMap&&(rn[6]=1),n.hasMetalRoughnessMap&&(rn[7]=1),n.hasOcclusionMap&&(rn[8]=1),n.manualSRGB&&(rn[9]=1),n.fastSRGB&&(rn[10]=1),rn[11]=n.alphaMode===i.BLEND?0:1,rn[12]=n.alphaMode===i.MASK?0:1,rn[13]=n.alphaMode===i.OPAQUE?0:1,t.ibl&&(rn[14]=1,t.ibl.useLod&&(rn[15]=1)),t.unlit&&(rn[16]=1),t.lights){rn[17]=1;for(let n=0;n<t.lights.nDirectionalLights;n++)an[n]=1;for(let n=0;n<t.lights.nPointLights;n++)an[10+n]=1;for(let n=0;n<t.lights.nSpotLights;n++)an[20+n]=1}for(let t=0;t<n.nPositionMorphs;t++);for(let t=0;t<n.nNormalMorphs;t++);for(let t=0;t<n.nTangentMorphs;t++);for(let t=0;t<n.nMorphWeights;t++);for(let t=0;t<n.nSkinJoints;t++)un[t]=1;const e=sn(rn).toString();return sn(on).toString(),sn(un).toString(),sn(an).toString(),e})(e.shaderConfig);return o=>{const i=r(o.shaderConfig);if(!n.shaders.has(i)){const r=cn(n)(e.shaderConfig)(o.shaderConfig),u=en({shaderId:Symbol(),renderer:t,source:r});n.shaders.set(i,u),console.log("new shader compiled",i)}return n.shaders.get(i)}})({renderer:t,data:n})(e)(c);o.has(l.shaderId)||o.set(l.shaderId,[]);const p=o.get(l.shaderId);p.push((t=>()=>{const{renderer:n,data:e,node:r,primitive:o,lightList:u,scene:s,shader:c,skinMatrices:f}=t,{camera:l}=s,{gl:p}=n,h=e.original,{material:d,drawMode:y}=o,{uniforms:m,shaderId:_}=c,{uniform1i:g,uniform1f:v,uniform1fv:E,uniform1iv:T,uniform2fv:b,uniform3fv:A,uniform4fv:M,uniformMatrix4fv:R}=m.setters,S=e.attributes.vaoIdLookup.get(o.vaoId);let N=0;nn(_),d&&d.doubleSided?n.glToggle(O.CULL_FACE)(!1):n.glToggle(O.CULL_FACE)(!0),s.shaderConfig.ibl&&(n.switchTexture(N)(e.extensions.ibl.brdf),g("u_brdfLUT")(N++),e.extensions.ibl.cubeMaps.diffuse&&(n.switchCubeTexture(N)(e.extensions.ibl.cubeMaps.diffuse),g("u_DiffuseEnvSampler")(N++)),e.extensions.ibl.cubeMaps.specular&&(n.switchCubeTexture(N)(e.extensions.ibl.cubeMaps.specular),g("u_SpecularEnvSampler")(N++)),A("u_Camera")(l.position)),u&&(u.directional&&(A("u_Light_Directional_Direction")(u.directional.direction),A("u_Light_Directional_Color")(u.directional.color),E("u_Light_Directional_Intensity")(u.directional.intensity)),u.point&&(A("u_Light_Point_Position")(u.point.position),A("u_Light_Point_Color")(u.point.color),E("u_Light_Point_Intensity")(u.point.intensity)),u.spot&&(A("u_Light_Spot_Position")(u.spot.position),A("u_Light_Spot_Direction")(u.spot.direction),E("u_Light_Spot_AngleScale")(u.spot.angleScale),E("u_Light_Spot_AngleOffset")(u.spot.angleOffset),A("u_Light_Spot_Color")(u.spot.color),E("u_Light_Spot_Intensity")(u.spot.intensity))),f&&R("u_Skin_Matrices")(!1)(f),R("u_MVPMatrix")(!1)(r.transform.modelViewProjectionMatrix),R("u_ModelMatrix")(!1)(r.transform.modelMatrix),r.transform.normalMatrix&&R("u_NormalMatrix")(!1)(r.transform.normalMatrix),r.morphWeights&&E("u_MorphWeights")(r.morphWeights);const I=t=>r=>{"number"==typeof r?n.switchTexture(N)(e.textures.get(r)):n.switchTexture(N)(r),g(t)(N++)};if(d&&(b("u_MetallicRoughnessValues")(d.metallicRoughnessValues),M("u_BaseColorFactor")(d.baseColorFactor),void 0!==d.baseColorSamplerIndex&&I("u_BaseColorSampler")(d.baseColorSamplerIndex),void 0!==d.metallicRoughnessSamplerIndex&&I("u_MetallicRoughnessSampler")(d.metallicRoughnessSamplerIndex),void 0!==d.normal&&(v("u_NormalScale")(d.normal.scale),I("u_NormalSampler")(d.normal.samplerIndex)),void 0!==d.occlusion&&(v("u_OcclusionStrength")(d.occlusion.strength),I("u_OcclusionSampler")(d.occlusion.samplerIndex)),void 0!==d.emissiveSamplerIndex&&I("u_EmissiveSampler")(d.emissiveSamplerIndex),void 0!==d.emissiveFactor&&A("u_EmissiveFactor")(d.emissiveFactor),d.alphaMode===i.MASK)){const t=d.alphaMode===i.MASK?d.alphaCutoff:1;v("u_AlphaCutoff")(t)}if(n.vertexArrays.activate(S),o.drawKind===a.ELEMENTS){const t=h.accessors[o.elementsId];p.drawElements(y,t.count,t.componentType,t.byteOffset||0)}else p.drawArrays(y,0,o.arrayCount)})({skinMatrices:s,renderer:t,data:n,node:u,primitive:c,lightList:f,scene:e,shader:l})),r.has(c.shaderConfig.alphaMode)||r.set(c.shaderConfig.alphaMode,new Set),r.get(c.shaderConfig.alphaMode).add(p)})}),t.glToggle(O.BLEND)(!1),t.glToggle(O.DEPTH_TEST)(!0),t.glDepthFunc(t.gl.LEQUAL),t.glBlendFunc(t.gl.SRC_ALPHA)(t.gl.ONE_MINUS_SRC_ALPHA);const l=yn(t)(r);l(i.OPAQUE),l(i.MASK),l(i.BLEND)},yn=t=>n=>e=>{n.has(e)&&(e===i.BLEND&&t.glToggle(O.BLEND)(!0),n.get(e).forEach(t=>{t.forEach(t=>t())}))},mn=t=>(t=(t=>{const n=Bt.map(t=>t.runtimeShaderConfig_Scene).reduce((n,e)=>(n=e(t)(n),n),t.shaderConfig);return Object.assign({},t,{shaderConfig:n})})(t),t=Object.assign({},t,{nodes:ft(n=>n.kind===u.MESH?Object.assign({},n,{primitives:n.primitives.map(n=>(t=>n=>{const e=Bt.map(t=>t.runtimeShaderConfig_Primitive).reduce((e,r)=>(e=r(t)(n)(e),e),n.shaderConfig);return Object.assign({},n,{shaderConfig:e})})(t)(n))}):n)(t.nodes)})),_n=({renderer:t,path:n,config:e,mapper:r})=>{const o=function(t){const n={};let e,r;const o={renderer:t,getAllNodes:()=>e,getData:()=>r,getOriginalScene:n=>o=>{return mn((({renderer:t,data:n,allNodes:e})=>t=>r=>{let o=[];if(r>=0&&n.original.scenes[r]){const t=n.original.scenes[r].nodes;nt(n=>{-1!==t.indexOf(n.originalNodeId)&&o.push(n)})(e)}else o=e,console.warn("no scene specified! Expect duplicate nodes...");const i=r>=0?n.original.scenes[r]:{nodes:n.original.nodes.map((t,n)=>n)},u=Bt.map(t=>t.createScene).reduce((t,e)=>t=e(n.original)(i)(t),{camera:t,nodes:pt({updateLocal:!0,updateModel:!0,updateView:!0,updateLightDirection:!0,camera:t})(null)(o)});return u.shaderConfig=(t=>n=>Bt.map(t=>t.initialShaderConfig_Scene).reduce((e,r)=>(e=r(t)(n)(e),e),{}))(n)(u),u})({renderer:t,data:r,allNodes:e})(n)(o))},getCameraNode:n=>{const r=ut(t=>t.kind===S.CAMERA&&t.cameraIndex===n)(e);if(!r)return;const o=K(r.transform)(Y(r.transform)(J(Object.assign({},r.camera.settings,{canvas:t.canvas}))(Object.assign({},r.camera))));return Object.assign({},r,{camera:o})},loadFile:t=>g(t).map(Ht),loadAssets:({gltf:t,basePath:n,glbBuffers:e})=>jt({basePath:n||"",gltf:t,glbBuffers:e}),start:({gltf:n,assets:o,config:i})=>{const u=Dt({gltf:n,renderer:t,assets:o,config:void 0===i?{}:i}),a=$t({renderer:t,data:u});r=u,e=Yt({gltf:n,primitives:a,data:u,assets:o})},renderScene:n=>{dn(t)(r)(n)}};return Object.assign(n,o),n}(t);return o.loadFile(n).chain(({gltf:t,glbBuffers:i})=>(t=r?r(t):t,o.loadAssets({gltf:t,glbBuffers:i,basePath:Ut(n)}).map(n=>({gltf:t,config:e,assets:n})))).map(o.start).map(()=>o)},gn=t=>n=>{const e=pt(t)(null)(n);return ft(En(e))(e)},vn=t=>n=>ut(n=>n.originalNodeId===t)(n),En=t=>n=>{if(n.kind===u.MESH&&n.skin){const e=Tn(t)(n),r=n=>{const r=e.find(t=>t.originalNodeId===n);return r?r.transform:vn(n)(t).transform};let o=0;const i=s.mat4.invert(s.mat4.create(),void 0===n.skin.skeletonRootId?n.transform.modelMatrix:r(n.skin.skeletonRootId).modelMatrix),u=e.reduce((t,n)=>{const e=s.mat4.create();s.mat4.multiply(e,n.transform.modelMatrix,n.inverseBindMatrix),i&&s.mat4.multiply(e,i,e);for(let n=0;n<e.length;n++)t[o++]=e[n];return t},new Float32Array(16*n.skin.joints.length));return Object.assign({},n,{skin:Object.assign({},n.skin,{skinMatrices:u})})}return n},Tn=t=>n=>{const e=new Map,r=n.skin.joints.map((t,n)=>(e.set(t.originalNodeId,n),{originalNodeId:t.originalNodeId,inverseBindMatrix:t.inverseBindMatrix}));return rt(t=>{if(e.has(t.originalNodeId)){const n=e.get(t.originalNodeId);if(r[n].transform=t.transform,e.delete(t.originalNodeId),!e.size)return!0}return!1})(t),r},bn=t=>n=>e=>mn(Object.assign({},e,{nodes:gn({updateLocal:!0,updateModel:!0,updateView:!0,updateLightDirection:!0,camera:e.camera})(t(n)(e.nodes))})),An=({gl:t,buffers:n})=>{let e,r;const o=new Set,i=new Map,u=new Map,a=o=>{const i=n.get(o);e===o&&r===i.target||(t.bindBuffer(i.target,i.buffer),e=o,r=i.target)};return{globalLocations:o,getLocationInShader:n=>e=>{i.has(n)||i.set(n,new Map);const r=i.get(n);return r.has(e)||r.set(e,t.getAttribLocation(n,e)),r.get(e)},getLocationInRenderer:t=>{if(!u.has(t)){let t=0;o.forEach(n=>{u.has(n)||u.set(n,t),t++})}return u.get(t)},activateElements:a,activateData:n=>e=>r=>{a(e),t.vertexAttribPointer(n,r.size,r.type,void 0!==r.normalized&&r.normalized,void 0===r.stride?0:r.stride,void 0===r.offset?0:r.offset),t.enableVertexAttribArray(n)}}},Mn=t=>{const n=new Map,e=e=>{const r=n.get(e);t.bindBuffer(r.target,r.buffer)};return{assign:r=>o=>{const i=n.has(r)?n.get(r):{buffer:t.createBuffer()};i.data=o.data,i.target=o.target,i.usagePattern=o.usagePattern,n.set(r,i),e(r),t.bufferData(i.target,i.data,i.usagePattern)},get:t=>n.get(t),bind:e}},Rn=t=>({width:n,height:e})=>{const r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,e,0,t.RGBA,t.UNSIGNED_BYTE,null);const o=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,o),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,n,e);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,o),t.bindTexture(t.TEXTURE_2D,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null);const u=()=>t.bindFramebuffer(t.FRAMEBUFFER,i),a=()=>t.bindFramebuffer(t.FRAMEBUFFER,null);return{bind:u,unbind:a,readPixel:({x:n,y:e})=>{const r=new Uint8Array(4);return u(),t.readPixels(n,e,1,1,t.RGBA,t.UNSIGNED_BYTE,r),a(),r},dispose:()=>{a(),t.deleteFramebuffer(i),t.deleteRenderbuffer(o),t.deleteTexture(r)},clear:n=>{u(),t.clear(n),a()}}},Sn=({getExtension:t,gl:n,version:e,buffers:r})=>{const o=new Map;let i;const u=r=>1===e?t("OES_vertex_array_object").bindVertexArrayOES(r):n.bindVertexArray(r),a=r=>a=>{(r||i!==a)&&(i=a,o.has(a)||o.set(a,1===e?t("OES_vertex_array_object").createVertexArrayOES():n.createVertexArray()),u(o.get(a)))},s=()=>{null!==i&&(i=null,u(null))};return{activate:a(!1),release:s,assign:t=>e=>{a(!0)(t),e.elementBufferId&&r.bind(e.elementBufferId),e.data.forEach(({location:t,usagePattern:e,bufferId:o,size:i,type:u,normalized:a,stride:s,offset:c})=>{r.get(o),r.bind(o),n.vertexAttribPointer(t,i,u,void 0!==a&&a,void 0===s?0:s,void 0===c?0:c),n.enableVertexAttribArray(t)}),s()}}},Nn=t=>t.getParameter(O.VERSION),On=t=>{switch(t){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return!0}return!1},In=t=>{const n=Nn(t);let e="";for(let t=0;t<n.length;t++){const r=n.charAt(t);if(On(r))e+=r;else if(e.length)break}return parseInt(e,10)},Fn=t=>{const{canvas:n,contextAttributes:e}=t,r=(()=>{if(void 0!==t.gl)return t.gl;let r;if(void 0===t.version||2===t.version){try{r=n.getContext("webgl2",e)}catch(t){r=void 0}if(r)return r;console.warn("Failed to initialize webgl2, trying webgl1 as a fallback...")}try{r=n.getContext("webgl",e)||n.getContext("experimental-webgl",e)}catch(t){r=void 0}return r||console.warn("Unable to initialize webgl1"),r})(),o=In(r),i={width:NaN,height:NaN},u=new Map,a=Mn(r),s=new Map,c=t=>{if(!s.has(t)){const n=r.getExtension(t);n||console.warn("Could not create extension",t),s.set(t,n)}return s.get(t)};let f,l,p;const h=It(r),d=An({gl:r,buffers:a}),y=Sn({getExtension:c,gl:r,version:o,buffers:a});return Object.assign({resize:({width:t,height:e})=>{i.width===t&&i.height===e||(n.setAttribute("width",t.toString()),n.setAttribute("height",e.toString()),r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight),i.width=t,i.height=e)},canvas:n,gl:r,buffers:a,attributes:d,vertexArrays:y},h,{glToggle:t=>n=>{u.has(t)&&u.get(t)===n||(u.set(t,n),n?r.enable(t):r.disable(t))},glDepthFunc:t=>{t!==f&&(r.depthFunc(t),f=t)},glBlendFunc:t=>n=>{t===l&&n===p||(r.blendFunc(t,n),l=t,p=n)},getExtension:c,version:o,extras:{}})}},function(t,n,e){(function(r){var o,i,u;!function(r){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=r(e(12),e(5),e(17),e(20),e(3),e(23),e(4)):null!=e(1)?(i=[e(12),e(5),e(17),e(20),e(3),e(23),e(4)],void 0===(u="function"==typeof(o=r)?o.apply(n,i):o)||(t.exports=u)):self.sanctuary=r(self.sanctuaryDef,self.sanctuaryEither,self.sanctuaryMaybe,self.sanctuaryPair,self.sanctuaryShow,self.sanctuaryTypeClasses,self.sanctuaryTypeIdentifiers)}(function(t,n,o,i,u,a,s){"use strict";if("undefined"!=typeof __doctest){var c=__doctest.require("sanctuary-descending"),f=(__doctest.require("./test/internal/List").Nil,__doctest.require("./test/internal/List").Cons,__doctest.require("./test/internal/Sum"));!function(n){var e=t.UnaryType("sanctuary/Descending")("")(b(c["@@type"]))(y($(Array))(a.extract));n.create({checkTypes:!0,env:n.env.concat([e(t.Unknown),__doctest.require("./test/internal/List").Type(t.Unknown),f.Type])}).env=n.env}(e(8))}var l=n.Left,p=n.Right,h=o.Nothing,d=o.Just;function y(t){return function(n){return function(e){return t(n(e))}}}function m(t){return function(n){return function(e){return t(e)(n)}}}function _(n){return function(e){return t.Function([n,e])}}function g(t){return y(function(n){return t in n?d(n[t]):h})(T)}function v(t){return function(n){return n[t]()}}function E(t){return function(n){return function(e){return e[t](n)}}}function T(t){return null==t?Object.create(null):Object(t)}function b(t){return function(n){return s(n)===t}}function A(t){return t.value}var M=t.TypeVariable("a"),R=t.TypeVariable("b"),S=t.TypeVariable("c"),N=t.TypeVariable("d"),O=t.TypeVariable("e"),I=t.TypeVariable("g"),F=t.TypeVariable("l"),L=t.TypeVariable("r"),x=t.UnaryTypeVariable("f"),C=t.UnaryTypeVariable("m"),P=t.UnaryTypeVariable("t"),w=t.UnaryTypeVariable("w"),U=t.BinaryTypeVariable("p"),B=t.BinaryTypeVariable("s"),j=t.BinaryType("sanctuary/Either")("https://github.com/sanctuary-js/sanctuary-either")(b("sanctuary-either/Either@1"))(ct($(Array))(K([])))(ct(K([]))($(Array))),D=t.UnaryType("sanctuary/Maybe")("https://github.com/sanctuary-js/sanctuary-maybe")(b("sanctuary-maybe/Maybe@1"))(rt([])($(Array))),k=t.BinaryType("sanctuary/Pair")("https://github.com/sanctuary-js/sanctuary-pair")(b("sanctuary-pair/Pair@1"))(function(t){return[t.fst]})(function(t){return[t.snd]}),V=t.UnaryType("sanctuary/TypeRep")("https://github.com/fantasyland/fantasy-land#type-representatives")(function(n){return t.AnyFunction._test(n)||null!=n&&t.String._test(n["@@type"])})(K([])),G=t.RecordType({checkTypes:t.Boolean,env:t.Array(t.Any)}),H={};function q(e){var r=t.create(e),i={env:e.env,is:r("is")({})([t.Type,t.Any,t.Boolean])(t.test(e.env)),MaybeType:D,Maybe:o,Nothing:h,EitherType:j,Either:n,PairType:k};return Object.keys(H).forEach(function(t){i[t]=r(t)(H[t].consts)(H[t].types)(H[t].impl)}),i.unchecked=e.checkTypes?q({checkTypes:!1,env:e.env}):i,i}function X(t){return function(n){return a.filter(t,n)}}function W(t){return function(n){return a.map(t,n)}}function z(t){return function(n){return function(e){return a.reduce(function(n,e){return t(n)(e)},n,e)}}}function $(t){return function(n){return a.of(t,n)}}function Y(t){return t}function K(t){return function(n){return t}}function J(t){return function(n){return n(t)}}function Z(t){return function(n){return function(e){return t(n,e)}}}function Q(t){return function(n){return function(e){return function(r){return t(n,e,r)}}}}function tt(t){return function(n){return function(e){return function(r){return function(o){return t(n,e,r,o)}}}}}function nt(t){return t.isJust}function et(t){return null==t?h:d(t)}function rt(t){return function(n){return function(e){return e.isJust?n(e.value):t}}}function ot(t){return function(n){return function(e){return e.isJust?n(e.value):t()}}}function it(t){return W(A)(X(nt)(t))}function ut(t){return y(ht)(ft(Y)(t))}function at(t){return t.isLeft}function st(t){return t.isRight}function ct(t){return function(n){return function(e){return(e.isLeft?t:n)(e.value)}}}function ft(t){return function(n){return function(e){try{return p(n(e))}catch(n){return l(t(n))}}}}function lt(t){return function(n){return function(e){return function(r){try{return p(n(e)(r))}catch(n){return l(t(n))}}}}}function pt(t){return function(n){return function(e){return function(r){return function(o){try{return p(n(e)(r)(o))}catch(n){return l(t(n))}}}}}}function ht(t){return t.isLeft?h:d(t.value)}function dt(t){return!t}function yt(t){return function(n){return function(e){return function(r){return(t(r)?n:e)(r)}}}}function mt(t){return function(n){for(var e=[],r=t(n);r.isJust;r=t(r.value.snd))e.push(r.value.fst);return e}}function _t(t){return function(n){return function(e){for(var r=[],o=Math.min(n.length,e.length),i=0;i<o;i+=1)r.push(t(n[i])(e[i]));return r}}}function gt(t){return function(n){var e={};return e[t]=n,e}}function vt(t){return function(n){return t+n}}function Et(t){return function(n){return t*n}}function Tt(t){return"(?:"+t.join("|")+")"}H.create={consts:{},types:[G,t.Object],impl:q},H.type={consts:{},types:[t.Any,t.RecordType({namespace:D(t.String),name:t.String,version:t.NonNegativeInteger})],impl:function(t){var n=s.parse(s(t));return n.namespace=et(n.namespace),n}},H.show={consts:{},types:[t.Any,t.String],impl:u},H.equals={consts:{a:[a.Setoid]},types:[M,M,t.Boolean],impl:Z(a.equals)},H.lt={consts:{a:[a.Ord]},types:[M,M,t.Boolean],impl:function(t){return function(n){return a.lt(n,t)}}},H.lte={consts:{a:[a.Ord]},types:[M,M,t.Boolean],impl:function(t){return function(n){return a.lte(n,t)}}},H.gt={consts:{a:[a.Ord]},types:[M,M,t.Boolean],impl:function(t){return function(n){return a.gt(n,t)}}},H.gte={consts:{a:[a.Ord]},types:[M,M,t.Boolean],impl:function(t){return function(n){return a.gte(n,t)}}},H.min={consts:{a:[a.Ord]},types:[M,M,M],impl:Z(a.min)},H.max={consts:{a:[a.Ord]},types:[M,M,M],impl:Z(a.max)},H.id={consts:{c:[a.Category]},types:[V(S),S],impl:a.id},H.concat={consts:{a:[a.Semigroup]},types:[M,M,M],impl:Z(a.concat)},H.empty={consts:{a:[a.Monoid]},types:[V(M),M],impl:a.empty},H.invert={consts:{g:[a.Group]},types:[I,I],impl:a.invert},H.filter={consts:{f:[a.Filterable]},types:[t.Predicate(M),x(M),x(M)],impl:X},H.reject={consts:{f:[a.Filterable]},types:[t.Predicate(M),x(M),x(M)],impl:Z(a.reject)},H.takeWhile={consts:{f:[a.Filterable]},types:[t.Predicate(M),x(M),x(M)],impl:Z(a.takeWhile)},H.dropWhile={consts:{f:[a.Filterable]},types:[t.Predicate(M),x(M),x(M)],impl:Z(a.dropWhile)},H.map={consts:{f:[a.Functor]},types:[_(M)(R),x(M),x(R)],impl:W},H.flip={consts:{f:[a.Functor]},types:[x(_(M)(R)),M,x(R)],impl:Z(a.flip)},H.bimap={consts:{p:[a.Bifunctor]},types:[_(M)(R),_(S)(N),U(M)(S),U(R)(N)],impl:Q(a.bimap)},H.mapLeft={consts:{p:[a.Bifunctor]},types:[_(M)(R),U(M)(S),U(R)(S)],impl:Z(a.mapLeft)},H.promap={consts:{p:[a.Profunctor]},types:[_(M)(R),_(S)(N),U(R)(S),U(M)(N)],impl:Q(a.promap)},H.alt={consts:{f:[a.Alt]},types:[x(M),x(M),x(M)],impl:Z(a.alt)},H.zero={consts:{f:[a.Plus]},types:[V(t.TypeVariable("f")),x(M)],impl:a.zero},H.reduce={consts:{f:[a.Foldable]},types:[_(M)(_(R)(M)),M,x(R),M],impl:z},H.traverse={consts:{f:[a.Applicative],t:[a.Traversable]},types:[V(t.TypeVariable("f")),_(M)(x(R)),P(M),x(P(R))],impl:Q(a.traverse)},H.sequence={consts:{f:[a.Applicative],t:[a.Traversable]},types:[V(t.TypeVariable("f")),P(x(M)),x(P(M))],impl:Z(a.sequence)},H.ap={consts:{f:[a.Apply]},types:[x(_(M)(R)),x(M),x(R)],impl:Z(a.ap)},H.lift2={consts:{f:[a.Apply]},types:[_(M)(_(R)(S)),x(M),x(R),x(S)],impl:Q(a.lift2)},H.lift3={consts:{f:[a.Apply]},types:[_(M)(_(R)(_(S)(N))),x(M),x(R),x(S),x(N)],impl:tt(a.lift3)},H.apFirst={consts:{f:[a.Apply]},types:[x(M),x(R),x(M)],impl:Z(a.apFirst)},H.apSecond={consts:{f:[a.Apply]},types:[x(M),x(R),x(R)],impl:Z(a.apSecond)},H.of={consts:{f:[a.Applicative]},types:[V(t.TypeVariable("f")),M,x(M)],impl:$},H.chain={consts:{m:[a.Chain]},types:[_(M)(C(R)),C(M),C(R)],impl:Z(a.chain)},H.join={consts:{m:[a.Chain]},types:[C(C(M)),C(M)],impl:a.join},H.chainRec={consts:{m:[a.ChainRec]},types:[V(t.TypeVariable("m")),_(M)(C(j(M)(R))),M,C(R)],impl:function(t){return function(n){return function(n){return a.chainRec(t,e,n)};function e(t,e,r){return a.map(ct(t)(e),n(r))}}}},H.extend={consts:{w:[a.Extend]},types:[_(w(M))(R),w(M),w(R)],impl:Z(a.extend)},H.duplicate={consts:{w:[a.Extend]},types:[w(M),w(w(M))],impl:a.duplicate},H.extract={consts:{w:[a.Comonad]},types:[w(M),M],impl:a.extract},H.contramap={consts:{f:[a.Contravariant]},types:[_(R)(M),x(M),x(R)],impl:Z(a.contramap)},H.I={consts:{},types:[M,M],impl:Y},H.K={consts:{},types:[M,R,M],impl:K},H.T={consts:{},types:[M,_(M)(R),R],impl:J},H.curry2={consts:{},types:[t.Function([M,R,S]),M,R,S],impl:Z},H.curry3={consts:{},types:[t.Function([M,R,S,N]),M,R,S,N],impl:Q},H.curry4={consts:{},types:[t.Function([M,R,S,N,O]),M,R,S,N,O],impl:tt},H.curry5={consts:{},types:[t.Function([M,R,S,N,O,L]),M,R,S,N,O,L],impl:function(t){return function(n){return function(e){return function(r){return function(o){return function(i){return t(n,e,r,o,i)}}}}}}},H.compose={consts:{s:[a.Semigroupoid]},types:[B(R)(S),B(M)(R),B(M)(S)],impl:Z(a.compose)},H.pipe={consts:{f:[a.Foldable]},types:[x(_(t.Any)(t.Any)),M,R],impl:function(t){return function(n){return z(J)(n)(t)}}},H.pipeK={consts:{f:[a.Foldable],m:[a.Chain]},types:[x(_(t.Any)(C(t.Any))),C(M),C(R)],impl:function(t){return function(n){return a.reduce(function(t,n){return a.chain(n,t)},n,t)}}},H.on={consts:{},types:[_(R)(_(R)(S)),_(M)(R),M,M,S],impl:function(t){return function(n){return function(e){return function(r){return t(n(e))(n(r))}}}}},H.Pair={consts:{},types:[M,R,k(M)(R)],impl:i},H.fst={consts:{},types:[k(M)(R),M],impl:i.fst},H.snd={consts:{},types:[k(M)(R),R],impl:i.snd},H.swap={consts:{},types:[k(M)(R),k(R)(M)],impl:i.swap},H.Just={consts:{},types:[M,D(M)],impl:d},H.isNothing={consts:{},types:[D(M),t.Boolean],impl:function(t){return t.isNothing}},H.isJust={consts:{},types:[D(M),t.Boolean],impl:nt},H.fromMaybe={consts:{},types:[M,D(M),M],impl:m(rt)(Y)},H.fromMaybe_={consts:{},types:[t.Thunk(M),D(M),M],impl:m(ot)(Y)},H.maybeToNullable={consts:{},types:[D(M),t.Nullable(M)],impl:function(t){return t.isJust?t.value:null}},H.toMaybe={consts:{},types:[M,D(M)],impl:et},H.maybe={consts:{},types:[R,_(M)(R),D(M),R],impl:rt},H.maybe_={consts:{},types:[t.Thunk(R),_(M)(R),D(M),R],impl:ot},H.justs={consts:{f:[a.Filterable,a.Functor]},types:[x(D(M)),x(M)],impl:it},H.mapMaybe={consts:{f:[a.Filterable,a.Functor]},types:[_(M)(D(R)),x(M),x(R)],impl:y(y(it))(W)},H.encase={consts:{},types:[_(M)(R),M,D(R)],impl:ut},H.encase2={consts:{},types:[_(M)(_(R)(S)),M,R,D(S)],impl:y(y(y(ht)))(lt(Y))},H.encase3={consts:{},types:[_(M)(_(R)(_(S)(N))),M,R,S,D(N)],impl:y(y(y(y(ht))))(pt(Y))},H.maybeToEither={consts:{},types:[M,D(R),j(M)(R)],impl:function(t){return rt(l(t))(p)}},H.Left={consts:{},types:[M,j(M)(R)],impl:l},H.Right={consts:{},types:[R,j(M)(R)],impl:p},H.isLeft={consts:{},types:[j(M)(R),t.Boolean],impl:at},H.isRight={consts:{},types:[j(M)(R),t.Boolean],impl:st},H.fromEither={consts:{},types:[R,j(M)(R),R],impl:function(t){return ct(K(t))(Y)}},H.toEither={consts:{},types:[M,R,j(M)(R)],impl:function(t){return function(n){return null==n?l(t):p(n)}}},H.either={consts:{},types:[_(M)(S),_(R)(S),j(M)(R),S],impl:ct},H.lefts={consts:{f:[a.Filterable,a.Functor]},types:[x(j(M)(R)),x(M)],impl:y(W(A))(X(at))},H.rights={consts:{f:[a.Filterable,a.Functor]},types:[x(j(M)(R)),x(R)],impl:y(W(A))(X(st))},H.tagBy={consts:{},types:[t.Predicate(M),M,j(M)(M)],impl:function(t){return yt(t)(p)(l)}},H.encaseEither={consts:{},types:[_(t.Error)(F),_(M)(L),M,j(F)(L)],impl:ft},H.encaseEither2={consts:{},types:[_(t.Error)(F),_(M)(_(R)(L)),M,R,j(F)(L)],impl:lt},H.encaseEither3={consts:{},types:[_(t.Error)(F),_(M)(_(R)(_(S)(L))),M,R,S,j(F)(L)],impl:pt},H.eitherToMaybe={consts:{},types:[j(M)(R),D(R)],impl:ht},H.and={consts:{},types:[t.Boolean,t.Boolean,t.Boolean],impl:function(t){return function(n){return t&&n}}},H.or={consts:{},types:[t.Boolean,t.Boolean,t.Boolean],impl:function(t){return function(n){return t||n}}},H.not={consts:{},types:[t.Boolean,t.Boolean],impl:dt},H.complement={consts:{},types:[t.Predicate(M),M,t.Boolean],impl:y(dt)},H.ifElse={consts:{},types:[t.Predicate(M),_(M)(R),_(M)(R),M,R],impl:yt},H.when={consts:{},types:[t.Predicate(M),_(M)(M),M,M],impl:function(t){return m(yt(t))(Y)}},H.unless={consts:{},types:[t.Predicate(M),_(M)(M),M,M],impl:function(t){return yt(t)(Y)}},H.allPass={consts:{f:[a.Foldable]},types:[x(t.Predicate(M)),M,t.Boolean],impl:function(t){return function(n){return a.reduce(function(t,e){return t&&e(n)},!0,t)}}},H.anyPass={consts:{f:[a.Foldable]},types:[x(t.Predicate(M)),M,t.Boolean],impl:function(t){return function(n){return a.reduce(function(t,e){return t||e(n)},!1,t)}}},H.slice={consts:{},types:[t.Integer,t.Integer,t.Array(M),D(t.Array(M))],impl:function(t){return function(n){return function(e){var r=t<0?t+e.length:t,o=n<0?n+e.length:n;return Math.abs(t)<=e.length&&Math.abs(n)<=e.length&&r<=o?d(e.slice(r,o)):h}}}},H.at={consts:{},types:[t.Integer,t.Array(M),D(M)],impl:function(t){return function(n){var e=t<0?n.length+t:t;return e<0||e>=n.length?h:d(n[e])}}},H.head={consts:{},types:[t.Array(M),D(M)],impl:function(t){return t.length>0?d(t[0]):h}},H.last={consts:{},types:[t.Array(M),D(M)],impl:function(t){return t.length>0?d(t[t.length-1]):h}},H.tail={consts:{},types:[t.Array(M),D(t.Array(M))],impl:function(t){return t.length>0?d(t.slice(1)):h}},H.init={consts:{},types:[t.Array(M),D(t.Array(M))],impl:function(t){return t.length>0?d(t.slice(0,-1)):h}},H.take={consts:{},types:[t.Integer,t.Array(M),D(t.Array(M))],impl:function(t){return function(n){return t>=0&&t<=n.length?d(n.slice(0,t)):h}}},H.takeLast={consts:{},types:[t.Integer,t.Array(M),D(t.Array(M))],impl:function(t){return function(n){return t>=0&&t<=n.length?d(n.slice(n.length-t)):h}}},H.drop={consts:{},types:[t.Integer,t.Array(M),D(t.Array(M))],impl:function(t){return function(n){return t>=0&&t<=n.length?d(n.slice(t)):h}}},H.dropLast={consts:{},types:[t.Integer,t.Array(M),D(t.Array(M))],impl:function(t){return function(n){return t>=0&&t<=n.length?d(n.slice(0,n.length-t)):h}}},H.size={consts:{f:[a.Foldable]},types:[x(M),t.Integer],impl:a.size},H.append={consts:{f:[a.Applicative,a.Semigroup]},types:[M,x(M),x(M)],impl:Z(a.append)},H.prepend={consts:{f:[a.Applicative,a.Semigroup]},types:[M,x(M),x(M)],impl:Z(a.prepend)},H.joinWith={consts:{},types:[t.String,t.Array(t.String),t.String],impl:E("join")},H.elem={consts:{a:[a.Setoid],f:[a.Foldable]},types:[M,x(M),t.Boolean],impl:Z(a.elem)},H.find={consts:{f:[a.Foldable]},types:[t.Predicate(M),x(M),D(M)],impl:function(t){return function(n){return a.reduce(function(n,e){return n.isJust?n:t(e)?d(e):h},h,n)}}},H.foldMap={consts:{b:[a.Monoid],f:[a.Foldable]},types:[V(R),_(M)(R),x(M),R],impl:Q(a.foldMap)},H.unfoldr={consts:{},types:[_(R)(D(k(M)(R))),R,t.Array(M)],impl:mt},H.range={consts:{},types:[t.Integer,t.Integer,t.Array(t.Integer)],impl:function(t){return function(n){for(var e=[],r=t;r<n;r+=1)e.push(r);return e}}},H.groupBy={consts:{},types:[_(M)(t.Predicate(M)),t.Array(M),t.Array(t.Array(M))],impl:function(t){return function(n){if(0===n.length)return[];for(var e=n[0],r=[e],o=[r],i=1;i<n.length;i+=1){var u=n[i];t(e)(u)?r.push(u):o.push(r=[e=u])}return o}}},H.reverse={consts:{f:[a.Applicative,a.Foldable,a.Monoid]},types:[x(M),x(M)],impl:a.reverse},H.sort={consts:{a:[a.Ord],m:[a.Applicative,a.Foldable,a.Monoid]},types:[C(M),C(M)],impl:a.sort},H.sortBy={consts:{b:[a.Ord],m:[a.Applicative,a.Foldable,a.Monoid]},types:[_(M)(R),C(M),C(M)],impl:Z(a.sortBy)},H.zip={consts:{},types:[t.Array(M),t.Array(R),t.Array(k(M)(R))],impl:_t(i)},H.zipWith={consts:{},types:[_(M)(_(R)(S)),t.Array(M),t.Array(R),t.Array(S)],impl:_t},H.prop={consts:{},types:[t.String,M,R],impl:function(t){return function(n){var e=T(n);if(t in e)return e[t];throw new TypeError("prop expected object to have a property named "+t+"; "+u(n)+" does not")}}},H.props={consts:{},types:[t.Array(t.String),M,R],impl:function(t){return function(n){return t.reduce(function(n,e){var r=T(n);if(e in r)return r[e];throw new TypeError("props expected object to have a property at "+u(t)+"; "+u(n)+" does not")},n)}}},H.get={consts:{},types:[t.Predicate(t.Any),t.String,M,D(R)],impl:function(t){return y(y(X(t)))(g)}},H.gets={consts:{},types:[t.Predicate(t.Any),t.Array(t.String),M,D(R)],impl:function(t){return function(n){return function(e){return a.filter(t,n.reduce(function(t,n){return a.chain(g(n),t)},d(e)))}}}},H.singleton={consts:{},types:[t.String,M,t.StrMap(M)],impl:gt},H.insert={consts:{},types:[t.String,M,t.StrMap(M),t.StrMap(M)],impl:function(t){return function(n){return function(e){return a.concat(e,gt(t)(n))}}}},H.remove={consts:{},types:[t.String,t.StrMap(M),t.StrMap(M)],impl:function(t){return function(n){var e=a.concat(n,{});return delete e[t],e}}},H.keys={consts:{},types:[t.StrMap(M),t.Array(t.String)],impl:Object.keys},H.values={consts:{},types:[t.StrMap(M),t.Array(M)],impl:function(t){return a.map(function(n){return t[n]},Object.keys(t))}},H.pairs={consts:{},types:[t.StrMap(M),t.Array(k(t.String)(M))],impl:function(t){return a.map(function(n){return i(n)(t[n])},Object.keys(t))}},H.fromPairs={consts:{f:[a.Foldable]},types:[x(k(t.String)(M)),t.StrMap(M)],impl:function(t){return a.reduce(function(t,n){return t[n.fst]=n.snd,t},{},t)}},H.negate={consts:{},types:[t.ValidNumber,t.ValidNumber],impl:function(t){return-t}},H.add={consts:{},types:[t.FiniteNumber,t.FiniteNumber,t.FiniteNumber],impl:vt},H.sum={consts:{f:[a.Foldable]},types:[x(t.FiniteNumber),t.FiniteNumber],impl:z(vt)(0)},H.sub={consts:{},types:[t.FiniteNumber,t.FiniteNumber,t.FiniteNumber],impl:function(t){return function(n){return n-t}}},H.mult={consts:{},types:[t.FiniteNumber,t.FiniteNumber,t.FiniteNumber],impl:Et},H.product={consts:{f:[a.Foldable]},types:[x(t.FiniteNumber),t.FiniteNumber],impl:z(Et)(1)},H.div={consts:{},types:[t.NonZeroFiniteNumber,t.FiniteNumber,t.FiniteNumber],impl:function(t){return function(n){return n/t}}},H.pow={consts:{},types:[t.FiniteNumber,t.FiniteNumber,t.FiniteNumber],impl:function(t){return function(n){return Math.pow(n,t)}}},H.mean={consts:{f:[a.Foldable]},types:[x(t.FiniteNumber),D(t.FiniteNumber)],impl:function(t){var n=a.reduce(function(t,n){return t.total+=n,t.count+=1,t},{total:0,count:0},t);return n.count>0?d(n.total/n.count):h}},H.even={consts:{},types:[t.Integer,t.Boolean],impl:function(t){return t%2==0}},H.odd={consts:{},types:[t.Integer,t.Boolean],impl:function(t){return t%2!=0}},H.parseDate={consts:{},types:[t.String,D(t.ValidDate)],impl:function(t){var n=new Date(t);return isNaN(n.valueOf())?h:d(n)}};var bt=new RegExp("^\\s*[+-]?"+Tt(["Infinity","NaN",Tt(["[0-9]+","[0-9]+[.][0-9]+","[0-9]+[.]","[.][0-9]+"])+(Tt(["[Ee][+-]?[0-9]+"])+"?")])+"\\s*$");H.parseFloat={consts:{},types:[t.String,D(t.Number)],impl:function(t){return bt.test(t)?d(parseFloat(t)):h}};var At=t.NullaryType("sanctuary/Radix")("")(function(n){return t.Integer._test(n)&&n>=2&&n<=36});H.parseInt={consts:{},types:[At,t.String,D(t.Integer)],impl:function(n){return function(e){var r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".slice(0,n),o=new RegExp("^["+r+"]+$","i"),i=e.replace(/^[+-]/,"");if(o.test(16===n?i.replace(/^0x/i,""):i)){var u=parseInt(e,n);if(t.Integer._test(u))return d(u)}return h}}},H.parseJson={consts:{},types:[t.Predicate(t.Any),t.String,D(M)],impl:function(t){return y(X(t))(ut(JSON.parse))}};var Mt=t.RecordType({match:t.String,groups:t.Array(D(t.String))});function Rt(t){return{match:t[0],groups:a.map(et,t.slice(1))}}function St(t,n){var e=t.lastIndex,r=n();return t.lastIndex=e,r}return H.regex={consts:{},types:[t.RegexFlags,t.String,t.RegExp],impl:function(t){return function(n){return new RegExp(n,t)}}},H.regexEscape={consts:{},types:[t.String,t.String],impl:function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}},H.test={consts:{},types:[t.RegExp,t.String,t.Boolean],impl:function(t){return function(n){return St(t,function(){return t.test(n)})}}},H.match={consts:{},types:[t.NonGlobalRegExp,t.String,D(Mt)],impl:function(t){return function(n){return a.map(Rt,et(n.match(t)))}}},H.matchAll={consts:{},types:[t.GlobalRegExp,t.String,t.Array(Mt)],impl:function(t){return function(n){return St(t,function(){return mt(function(e){return a.map(function(t){return i(Rt(t))(null)},et(t.exec(n)))})([])})}}},H.toUpper={consts:{},types:[t.String,t.String],impl:v("toUpperCase")},H.toLower={consts:{},types:[t.String,t.String],impl:v("toLowerCase")},H.trim={consts:{},types:[t.String,t.String],impl:v("trim")},H.stripPrefix={consts:{},types:[t.String,t.String,D(t.String)],impl:function(t){return function(n){var e=t.length;return n.slice(0,e)===t?d(n.slice(e)):h}}},H.stripSuffix={consts:{},types:[t.String,t.String,D(t.String)],impl:function(t){return function(n){var e=n.length-t.length;return n.slice(e)===t?d(n.slice(0,e)):h}}},H.words={consts:{},types:[t.String,t.Array(t.String)],impl:function(t){var n=t.split(/\s+/),e=n.length;return n.slice(""===n[0]?1:0,""===n[e-1]?e-1:e)}},H.unwords={consts:{},types:[t.Array(t.String),t.String],impl:E("join")(" ")},H.lines={consts:{},types:[t.String,t.Array(t.String)],impl:function(t){return""===t?[]:t.replace(/\r\n?/g,"\n").match(/^(?=[\s\S]).*/gm)}},H.unlines={consts:{},types:[t.Array(t.String),t.String],impl:function(t){return t.reduce(function(t,n){return t+n+"\n"},"")}},H.splitOn={consts:{},types:[t.String,t.String,t.Array(t.String)],impl:E("split")},H.splitOnRegex={consts:{},types:[t.GlobalRegExp,t.String,t.Array(t.String)],impl:function(t){return function(n){return St(t,function(){for(var e,r=[],o=0;null!=(e=t.exec(n));)if(t.lastIndex===o&&""===e[0]){if(t.lastIndex===n.length)return r;t.lastIndex+=1}else r.push(n.slice(o,e.index)),o=e.index+e[0].length;return r.push(n.slice(o)),r})}}},q({checkTypes:void 0===r||null==r||null==Object({NODE_ENV:"production",BROADCAST:void 0,BUILD_VERSION:"0.0.1-alpha"})||!1,env:a.concat(t.env,[t.FiniteNumber,t.NonZeroFiniteNumber,j(t.Unknown)(t.Unknown),_(t.Unknown)(t.Unknown),t.GlobalRegExp,t.NonGlobalRegExp,t.Integer,t.NonNegativeInteger,D(t.Unknown),t.Array2(t.Unknown)(t.Unknown),k(t.Unknown)(t.Unknown),t.RegexFlags,t.Type,t.TypeClass,t.ValidDate,t.ValidNumber])})})}).call(this,e(9))},function(t,n){var e,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(t){e=i}try{r="function"==typeof clearTimeout?clearTimeout:u}catch(t){r=u}}();var s,c=[],f=!1,l=-1;function p(){f&&s&&(f=!1,s.length?c=s.concat(c):l=-1,c.length&&h())}function h(){if(!f){var t=a(p);f=!0;for(var n=c.length;n;){for(s=c,c=[];++l<n;)s&&s[l].run();l=-1,n=c.length}s=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(n){try{return r.call(null,t)}catch(n){return r.call(this,t)}}}(t)}}function d(t,n){this.fun=t,this.array=n}function y(){}o.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];c.push(new d(t,n)),1!==c.length||f||a(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,n,e){var r,o,i;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u(e(11)):null!=e(1)?(o=[e(11)],void 0===(i="function"==typeof(r=u)?r.apply(n,o):r)||(t.exports=i)):self.sanctuaryTypeClasses=u(self.sanctuaryTypeIdentifiers)}(function(t){"use strict";if("undefined"!=typeof __doctest){__doctest.require("./test/Identity");var n=__doctest.require("./test/List"),e=__doctest.require("./test/Maybe");__doctest.require("./test/Sum"),__doctest.require("./test/Tuple"),n.Nil,n.Cons,e.Nothing,e.Just}function r(t){return function(n){return t.concat(n)}}function o(t){return function(n){return t}}function i(t,n){Object.keys(t).forEach(n,t)}function u(t,n){return Object.prototype.hasOwnProperty.call(n,t)}function a(t){return t}function s(t){return function(n){return[t,n]}}function c(n,e){return typeof n==typeof e&&t(n)===t(e)}function f(t){return{value:t,done:!1}}function l(t){return{value:t,done:!0}}function p(t,n,e,r){if(!(this instanceof p))return new p(t,n,e,r);this.name=t,this.url=n,this.test=function(t){return e.every(function(n){return n.test(t)})&&r(t)}}p["@@type"]="sanctuary-type-classes/TypeClass";var h="Constructor",d="Value";function y(t,n,e){for(var r=e,o=0;o<n.length;o+=1){var i=n[o];if(null==r||!t&&!u(i,r))return null;r=r[i]}return"function"==typeof r?r:null}function m(t,n){return y(!0,t,n)}function _(t){return y(!1,t,Y)}var g=u("name",function(){})?function(t){return t.name}:function(t){var n=/function (\w*)/.exec(t);return null==n?"":n[1]};function v(n,e,r){function o(n){var e="fantasy-land/"+n;return r[n]===h?function(t){var n=m([e],t);return null==n&&"function"==typeof t?_([g(t),e]):n}:function(n){var r=null;return null!=n&&null!=n.constructor&&n.constructor.prototype===n||(r=m([e],n)),null==r&&(r=_([t(n),"prototype",e])),r&&r.bind(n)}}var i=Object.keys(r),u=p("sanctuary-type-classes/"+n,"https://github.com/sanctuary-js/sanctuary-type-classes/tree/v9.0.0#"+n,e,function(t){return i.every(function(n){var e=r[n]===h?t.constructor:t;return null!=o(n)(e)})});return u.methods=i.reduce(function(t,n){return t[n]=o(n),t},{}),u}var E=v("Setoid",[],{equals:d}),T=v("Ord",[E],{lte:d}),b=v("Semigroupoid",[],{compose:d}),A=v("Category",[b],{id:h}),M=v("Semigroup",[],{concat:d}),R=v("Monoid",[M],{empty:h}),S=v("Group",[R],{invert:d}),N=v("Filterable",[],{filter:d}),O=v("Functor",[],{map:d}),I=v("Bifunctor",[O],{bimap:d}),F=v("Profunctor",[O],{promap:d}),L=v("Apply",[O],{ap:d}),x=v("Applicative",[L],{of:h}),C=v("Chain",[L],{chain:d}),P=v("ChainRec",[C],{chainRec:h}),w=v("Monad",[x,C],{}),U=v("Alt",[O],{alt:d}),B=v("Plus",[U],{zero:h}),j=v("Alternative",[x,B],{}),D=v("Foldable",[],{reduce:d}),k=v("Traversable",[O,D],{traverse:d}),V=v("Extend",[O],{extend:d}),G=v("Comonad",[V],{extract:d}),H=v("Contravariant",[],{contramap:d});function q(t){return[t]}function X(t){if(t.length!==this.length)return!1;for(var n=0;n<this.length;n+=1)if(!K(this[n],t[n]))return!1;return!0}function W(t){for(var n=0;;n+=1){if(n===this.length)return!0;if(n===t.length)return!1;if(!K(this[n],t[n]))return Z(this[n],t[n])}}function z(t){return this.concat(t)}function $(t){var n={};function e(t){n[t]=this[t]}return i(this,e),i(t,e),n}var Y={Null:{prototype:{"fantasy-land/equals":function(t){return!0},"fantasy-land/lte":function(t){return!0}}},Undefined:{prototype:{"fantasy-land/equals":function(t){return!0},"fantasy-land/lte":function(t){return!0}}},Boolean:{prototype:{"fantasy-land/equals":function(t){return"object"==typeof this?K(this.valueOf(),t.valueOf()):this===t},"fantasy-land/lte":function(t){return"object"==typeof this?Z(this.valueOf(),t.valueOf()):!1===this||!0===t}}},Number:{prototype:{"fantasy-land/equals":function(t){return"object"==typeof this?K(this.valueOf(),t.valueOf()):isNaN(this)&&isNaN(t)||this===t},"fantasy-land/lte":function(t){return"object"==typeof this?Z(this.valueOf(),t.valueOf()):isNaN(this)||this<=t}}},Date:{prototype:{"fantasy-land/equals":function(t){return K(this.valueOf(),t.valueOf())},"fantasy-land/lte":function(t){return Z(this.valueOf(),t.valueOf())}}},RegExp:{prototype:{"fantasy-land/equals":function(t){return t.source===this.source&&t.global===this.global&&t.ignoreCase===this.ignoreCase&&t.multiline===this.multiline&&t.sticky===this.sticky&&t.unicode===this.unicode}}},String:{"fantasy-land/empty":function(){return""},prototype:{"fantasy-land/equals":function(t){return"object"==typeof this?K(this.valueOf(),t.valueOf()):this===t},"fantasy-land/lte":function(t){return"object"==typeof this?Z(this.valueOf(),t.valueOf()):this<=t},"fantasy-land/concat":function(t){return this+t}}},Array:{"fantasy-land/empty":function(){return[]},"fantasy-land/of":q,"fantasy-land/chainRec":function(t,n){for(var e=[],r={},o={head:n,tail:r};o!==r;){for(var i=r,u=t(f,l,o.head),a=0;a<u.length;a+=1){var s=u[a];s.done?e.push(s.value):i={head:s.value,tail:i}}for(o=o.tail;i!==r;)o={head:i.head,tail:o},i=i.tail}return e},"fantasy-land/zero":function(){return[]},prototype:{"fantasy-land/equals":X,"fantasy-land/lte":W,"fantasy-land/concat":z,"fantasy-land/filter":function(t){return this.filter(function(n){return t(n)})},"fantasy-land/map":function(t){return this.map(function(n){return t(n)})},"fantasy-land/ap":function(t){for(var n=[],e=0;e<t.length;e+=1)for(var r=0;r<this.length;r+=1)n.push(t[e](this[r]));return n},"fantasy-land/chain":function(t){for(var n=[],e=0;e<this.length;e+=1)for(var r=0,o=t(this[e]);r<o.length;r+=1)n.push(o[r]);return n},"fantasy-land/alt":z,"fantasy-land/reduce":function(t,n){for(var e=n,r=0;r<this.length;r+=1)e=t(e,this[r]);return e},"fantasy-land/traverse":function(t,n){var e=this;function o(i,u){switch(u){case 0:return ut(t,[]);case 2:return it(s,n(e[i]),n(e[i+1]));default:var a=2*Math.floor(u/4);return it(r,o(i,a),o(i+a,u-a))}}return this.length%2==1?it(r,et(q,n(this[0])),o(1,this.length-1)):o(0,this.length)},"fantasy-land/extend":function(t){return this.map(function(n,e,r){return t(r.slice(e))})}}},Arguments:{prototype:{"fantasy-land/equals":function(t){return X.call(this,t)},"fantasy-land/lte":function(t){return W.call(this,t)}}},Error:{prototype:{"fantasy-land/equals":function(t){return K(this.name,t.name)&&K(this.message,t.message)}}},Object:{"fantasy-land/empty":function(){return{}},"fantasy-land/zero":function(){return{}},prototype:{"fantasy-land/equals":function(t){var n=this,e=Object.keys(this).sort();return K(e,Object.keys(t).sort())&&e.every(function(e){return K(n[e],t[e])})},"fantasy-land/lte":function(t){for(var n=Object.keys(this).sort(),e=Object.keys(t).sort();;){if(0===n.length)return!0;if(0===e.length)return!1;var r=n.shift(),o=e.shift();if(r<o)return!0;if(r>o)return!1;if(!K(this[r],t[r]))return Z(this[r],t[r])}},"fantasy-land/concat":$,"fantasy-land/filter":function(t){var n={};return i(this,function(e){t(this[e])&&(n[e]=this[e])}),n},"fantasy-land/map":function(t){var n={};return i(this,function(e){n[e]=t(this[e])}),n},"fantasy-land/ap":function(t){var n={};return i(this,function(e){u(e,t)&&(n[e]=t[e](this[e]))}),n},"fantasy-land/alt":$,"fantasy-land/reduce":function(t,n){var e=this;return Object.keys(this).sort().reduce(function(n,r){return t(n,e[r])},n)},"fantasy-land/traverse":function(t,n){var e=this;return Object.keys(this).reduce(function(t,r){return it(function(t){return function(n){var e={};return e[r]=n,$.call(t,e)}},t,n(e[r]))},ut(t,{}))}}},Function:{"fantasy-land/id":function(){return a},"fantasy-land/of":function(t){return function(n){return t}},"fantasy-land/chainRec":function(t,n){return function(e){for(var r=f(n);!r.done;)r=t(f,l,r.value)(e);return r.value}},prototype:{"fantasy-land/equals":function(t){return t===this},"fantasy-land/compose":function(t){var n=this;return function(e){return t(n(e))}},"fantasy-land/map":function(t){var n=this;return function(e){return t(n(e))}},"fantasy-land/promap":function(t,n){var e=this;return function(r){return n(e(t(r)))}},"fantasy-land/ap":function(t){var n=this;return function(e){return t(e)(n(e))}},"fantasy-land/chain":function(t){var n=this;return function(e){return t(n(e))(e)}},"fantasy-land/extend":function(t){var n=this;return function(e){return t(function(t){return n(Q(e,t))})}},"fantasy-land/contramap":function(t){var n=this;return function(e){return n(t(e))}}}}},K=function(){var t=[];return function(n,e){if(!c(n,e))return!1;if(t.some(function(t){return t[0]===n&&t[1]===e}))return!0;t.push([n,e]);try{return E.test(n)&&E.test(e)&&E.methods.equals(n)(e)}finally{t.pop()}}}();function J(t,n){return c(t,n)&&!Z(n,t)}var Z=function(){var t=[];return function(n,e){if(!c(n,e))return!1;if(t.some(function(t){return t[0]===n&&t[1]===e}))return K(n,e);t.push([n,e]);try{return T.test(n)&&T.test(e)&&T.methods.lte(n)(e)}finally{t.pop()}}}();function Q(t,n){return M.methods.concat(t)(n)}function tt(t){return R.methods.empty(t)()}function nt(t,n){return N.methods.filter(n)(t)}function et(t,n){return O.methods.map(n)(t)}function rt(t,n,e){return I.methods.bimap(e)(t,n)}function ot(t,n){return L.methods.ap(n)(t)}function it(t,n,e){return ot(et(t,n),e)}function ut(t,n){return x.methods.of(t)(n)}function at(t,n){return C.methods.chain(n)(t)}function st(t,n,e){return D.methods.reduce(e)(t,n)}function ct(t,n){var e=st(function(n,e){return n.push({idx:n.length,x:e,fx:t(e)}),n},[],n),r=function(t){switch(typeof(t&&t.fx)){case"number":return function(t,n){return t<=n||t!=t};case"string":return function(t,n){return t<=n};default:return Z}}(e[0]);if(e.sort(function(t,n){return r(t.fx,n.fx)?r(n.fx,t.fx)?t.idx-n.idx:-1:1}),Array.isArray(n)){for(var o=0;o<e.length;o+=1)e[o]=e[o].x;return e}var i=n.constructor,u=tt(i);for(o=0;o<e.length;o+=1)u=Q(u,ut(i,e[o].x));return u}function ft(t,n,e){return k.methods.traverse(e)(t,n)}function lt(t,n){return V.methods.extend(n)(t)}return{TypeClass:p,Setoid:E,Ord:T,Semigroupoid:b,Category:A,Semigroup:M,Monoid:R,Group:S,Filterable:N,Functor:O,Bifunctor:I,Profunctor:F,Apply:L,Applicative:x,Chain:C,ChainRec:P,Monad:w,Alt:U,Plus:B,Alternative:j,Foldable:D,Traversable:k,Extend:V,Comonad:G,Contravariant:H,equals:K,lt:J,lte:Z,gt:function(t,n){return J(n,t)},gte:function(t,n){return Z(n,t)},min:function(t,n){return Z(t,n)?t:n},max:function(t,n){return Z(t,n)?n:t},compose:function(t,n){return b.methods.compose(n)(t)},id:function(t){return A.methods.id(t)()},concat:Q,empty:tt,invert:function(t){return S.methods.invert(t)()},filter:nt,reject:function(t,n){return nt(function(n){return!t(n)},n)},map:et,flip:function(t,n){return O.methods.map(t)(function(t){return function(n){return n(t)}}(n))},bimap:rt,mapLeft:function(t,n){return rt(t,a,n)},promap:function(t,n,e){return F.methods.promap(e)(t,n)},ap:ot,lift2:it,lift3:function(t,n,e,r){return ot(ot(et(t,n),e),r)},apFirst:function(t,n){return it(o,t,n)},apSecond:function(t,n){return it(o(a),t,n)},of:ut,append:function(t,n){return Q(n,ut(n.constructor,t))},prepend:function(t,n){return Q(ut(n.constructor,t),n)},chain:at,join:function(t){return at(a,t)},chainRec:function(t,n,e){return P.methods.chainRec(t)(n,e)},alt:function(t,n){return U.methods.alt(t)(n)},zero:function(t){return B.methods.zero(t)()},reduce:st,size:function(t){return Array.isArray(t)?t.length:st(function(t,n){return t+1},0,t)},elem:function(t,n){return st(function(n,e){return n||K(t,e)},!1,n)},foldMap:function(t,n,e){return st(function(t,e){return Q(t,n(e))},tt(t),e)},reverse:function(t){if(Array.isArray(t))return t.slice().reverse();var n=t.constructor;return st(function(t,e){return Q(ut(n,e),t)},tt(n),t)},sort:function(t){return ct(a,t)},sortBy:ct,takeWhile:function(t,n){var e=!0;return nt(function(n){return e=e&&t(n)},n)},dropWhile:function(t,n){var e=!1;return nt(function(n){return e=e||!t(n)},n)},traverse:ft,sequence:function(t,n){return ft(t,a,n)},extend:lt,duplicate:function(t){return lt(a,t)},extract:function(t){return G.methods.extract(t)()},contramap:function(t,n){return H.methods.contramap(n)(t)}}})},function(t,n,e){var r,o,i;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u():null!=e(1)?(o=[],void 0===(i="function"==typeof(r=u)?r.apply(n,o):r)||(t.exports=i)):self.sanctuaryTypeIdentifiers=u()}(function(){"use strict";var t="@@type";return function(n){return null!=n&&null!=n.constructor&&n.constructor.prototype!==n&&"string"==typeof n.constructor[t]?n.constructor[t]:Object.prototype.toString.call(n).slice("[object ".length,-"]".length)}})},function(t,n,e){(function(r){var o,i,u;!function(r){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=r(e(5),e(3),e(15),e(4)):null!=e(1)?(i=[e(5),e(3),e(15),e(4)],void 0===(u="function"==typeof(o=r)?o.apply(n,i):o)||(t.exports=u)):self.sanctuaryDef=r(self.sanctuaryEither,self.sanctuaryShow,self.sanctuaryTypeClasses,self.sanctuaryTypeIdentifiers)}(function(n,o,i,u){"use strict";var a=Math.pow(2,53)-1,s=-a,c=Array.prototype.slice,f=Object.prototype.hasOwnProperty,l=Object.prototype.toString,p=function(){if("object"==typeof t&&"object"==typeof t.exports){var n=e(6);if("symbol"==typeof n.inspect.custom)return n.inspect.custom}return"inspect"}(),h=n.Left,d=n.Right;function y(t){return function(n){return t}}function m(t){return function(n,e){return t}}function _(t,n){return function(e){return t(n(e))}}function g(t){return t}function v(t){return t.slice(0,-1)}function E(t){return 0===t.length}function T(t){return function(n){if(t.length>n.length)return!1;for(var e=0;e<t.length;e+=1)if(t[e]!==n[e])return!1;return!0}}function b(t,n){return n.join(t)}function A(t){return t[t.length-1]}function M(t){return function(n){return t.some(function(t){return i.equals(t,n)})}}function R(t,n){return E(t)?n:t}function S(t,n){return b(t,Array(n+1))}function N(t){return function(n){return S(t,n.length)}}var O=N(" ");function I(t){return Object.keys(t).sort()}function F(t){return t.slice("(".length,-")".length)}function L(t,n,e,r){return E(r)?t:i.reduce(function(t,n){return t+"  - "+e(n)+"\n"},n,r)}function x(t){return t.replace(/[ ]+$/gm,"")}function C(t,n,e){return t?e:n(e)}function P(t,n,e){return t?n(e):e}function w(t){return function(n){return function(e){return t+e+n}}}var U=w("(")(")"),B=w("")("");function j(t){return t.slice(t.indexOf("/")+1)}function D(t,n,e,r,o,i,u){this._test=o,this.format=r,this.keys=i,this.name=n,this.type=t,this.types=u,this.url=e}D["@@type"]="sanctuary-def/Type",D.prototype["fantasy-land/equals"]=function(t){return i.equals(this.type,t.type)&&i.equals(this.name,t.name)&&i.equals(this.url,t.url)&&i.equals(this.keys,t.keys)&&this.keys.every(function(n){return i.equals(this.types[n].type,t.types[n].type)},this)},D.prototype.validate=function(t){if(!this._test(t))return h({value:t,propPath:[]});for(var n=0;n<this.keys.length;n+=1)for(var e=this.keys[n],r=this.types[e],o=0,u=r.extractor(t);o<u.length;o+=1){var a=r.type.validate(u[o]);if(a.isLeft){var s=a.value.value,c=i.concat([e],a.value.propPath);return h({value:s,propPath:c})}}return d(t)},D.prototype["@@show"]=function(){return this.format(g,y(g))};var k="BINARY",V="FUNCTION",G="INCONSISTENT",H="NO_ARGUMENTS",q="NULLARY",X="RECORD",W="UNARY",z="UNKNOWN",$="VARIABLE",Y=new D(G,"","",m("???"),y(!1),[],{}),K=new D(H,"","",m("()"),y(!0),[],{});function J(t){return function(n){return u(n)===t}}function Z(t){return function(n){return typeof n===t}}function Q(t){return"https://github.com/sanctuary-js/sanctuary-def/tree/v0.18.1#"+j(t)}function tt(t,n){return rn(t)(Q(t))(n)}function nt(t,n,e){return un(t)(Q(t))(n)(e)}var et=tt("sanctuary-def/Any",y(!0)),rt=tt("Function",Z("function")),ot=tt("Arguments",J("Arguments")),it=nt("Array",J("Array"),g),ut=tt("sanctuary-def/Array0",function(t){return J("Array")(t)&&0===t.length}),at=nt("sanctuary-def/Array1",function(t){return J("Array")(t)&&1===t.length},g),st=function(t,n,e,r){return cn(t)(Q(t))(function(t){return J("Array")(t)&&2===t.length})(function(t){return[t[0]]})(function(t){return[t[1]]})}("sanctuary-def/Array2"),ct=tt("Boolean",Z("boolean")),ft=tt("Date",J("Date")),lt=tt("Error",J("Error")),pt=tt("sanctuary-def/FiniteNumber",function(t){return qt._test(t)&&isFinite(t)});function ht(t){return 1===t.length?i.concat([K],t):t}function dt(t){var n=ht(t),e=rt._test,r=[],i={};return n.forEach(function(t,n){var e="$"+o(n+1);r.push(e),i[e]={extractor:y([]),type:t}}),new D(V,"","",function(t,e){var r=n.map(function(t,n){return C(t.type===X||E(t.keys),F,e("$"+o(n+1))(o(t)))}),i=w(t("("))(t(")"));return i(C(2===n.length,i,b(t(", "),v(r)))+t(" -> ")+A(r))},e,r,i)}var yt=tt("sanctuary-def/GlobalRegExp",function(t){return Pt._test(t)&&t.global}),mt=tt("sanctuary-def/HtmlElement",function(t){return/^\[object HTML.+Element\]$/.test(l.call(t))}),_t=tt("sanctuary-def/Integer",function(t){return qt._test(t)&&Math.floor(t)===t&&t>=s&&t<=a}),gt=tt("sanctuary-def/NegativeFiniteNumber",function(t){return pt._test(t)&&t<0}),vt=tt("sanctuary-def/NegativeInteger",function(t){return _t._test(t)&&t<0}),Et=tt("sanctuary-def/NegativeNumber",function(t){return It._test(t)&&t<0}),Tt=nt("sanctuary-def/NonEmpty",function(t){return i.Monoid.test(t)&&i.Setoid.test(t)&&!i.equals(t,i.empty(t.constructor))},function(t){return[t]}),bt=tt("sanctuary-def/NonGlobalRegExp",function(t){return Pt._test(t)&&!t.global}),At=tt("sanctuary-def/NonNegativeInteger",function(t){return _t._test(t)&&t>=0}),Mt=tt("sanctuary-def/NonZeroFiniteNumber",function(t){return pt._test(t)&&0!==t}),Rt=tt("sanctuary-def/NonZeroInteger",function(t){return _t._test(t)&&0!==t}),St=tt("sanctuary-def/NonZeroValidNumber",function(t){return qt._test(t)&&0!==t}),Nt=tt("Null",J("Null")),Ot=nt("sanctuary-def/Nullable",y(!0),function(t){return null===t?[]:[t]}),It=tt("Number",Z("number")),Ft=tt("Object",J("Object")),Lt=tt("sanctuary-def/PositiveFiniteNumber",function(t){return pt._test(t)&&t>0}),xt=tt("sanctuary-def/PositiveInteger",function(t){return _t._test(t)&&t>0}),Ct=tt("sanctuary-def/PositiveNumber",function(t){return It._test(t)&&t>0}),Pt=tt("RegExp",J("RegExp")),wt=function(t,n){return pn(t)(Q(t))(["","g","i","m","gi","gm","im","gim"])}("sanctuary-def/RegexFlags"),Ut=nt("sanctuary-def/StrMap",Ft._test,function(t){return i.reduce(function(t,n){return t.push(n),t},[],t)}),Bt=tt("String",Z("string")),jt=tt("Symbol",Z("symbol")),Dt=tt("Type",J("sanctuary-def/Type")),kt=tt("TypeClass",J("sanctuary-type-classes/TypeClass")),Vt=tt("Undefined",J("Undefined")),Gt=new D(z,"","",m("Unknown"),y(!0),[],{}),Ht=tt("sanctuary-def/ValidDate",function(t){return ft._test(t)&&!isNaN(t.valueOf())}),qt=tt("sanctuary-def/ValidNumber",function(t){return It._test(t)&&!isNaN(t)}),Xt=[rt,ot,it(Gt),ct,ft,lt,mt,Nt,It,Ft,Pt,Ut(Gt),Bt,jt,Vt];function Wt(t){return rn(t)("")(y(!0))}var zt=jn({checkTypes:!(void 0!==r&&null!=r&&null!=Object({NODE_ENV:"production",BROADCAST:void 0,BUILD_VERSION:"0.0.1-alpha"})),env:Xt}),$t=["zero","one","two","three","four","five","six","seven","eight","nine"];function Yt(t){return(t<$t.length?$t[t]:o(t))+" "+(1===t?"argument":"arguments")}function Kt(t,n,e,r){return r.type.type===z?Jt(t,n,r.extractor(e)):[r.type]}function Jt(t,n,e){return E(e)?[Gt]:R(i.reduce(function(e,r){var o;if("object"==typeof r&&null!=r||"function"==typeof r){if(n.indexOf(r)>=0)return[];o=i.concat(n,[r])}else o=n;return i.chain(function(n){return"sanctuary-def/Nullable"===n.name||n.validate(r).isLeft?[]:n.type===W?i.map(sn(n),Kt(t,o,r,n.types.$1)):n.type===k?ln(n,Kt(t,o,r,n.types.$1),Kt(t,o,r,n.types.$2)):[n]},e)},t,e),[Y])}function Zt(t){return t.type===W?Zt(t.types.$1.type):t.type===k?Zt(t.types.$1.type)&&Zt(t.types.$2.type):t.type!==G}function Qt(t,n){return i.reject(function(t){return t.type===G},Jt(t,[],n))}function tn(t,n,e,r,o,u){var a={};for(var s in n){var c=n[s],l={types:c.types.slice(),valuesByPath:{}};for(var p in c.valuesByPath)l.valuesByPath[p]=c.valuesByPath[p].slice();a[s]=l}f.call(a,e.name)||(a[e.name]={types:t.slice(),valuesByPath:{}});var h=JSON.stringify(i.concat([r],o));f.call(a[e.name].valuesByPath,h)||(a[e.name].valuesByPath[h]=[]);var d=E(e.keys),y=en(t);function m(n,e){return i.filter(Zt,Kt(t,[],n,e))}return u.forEach(function(t){a[e.name].valuesByPath[h].push(t),a[e.name].types=i.chain(function(n){return n.keys.length<e.keys.length||!y(n)(t)?[]:d&&n.type===W?i.map(sn(n),m(t,n.types.$1)):d&&n.type===k?ln(n,m(t,n.types.$1),m(t,n.types.$2)):[n]},a[e.name].types)}),a}function nn(t,n,e,r,o,u,a){for(var s=nn,c=0;c<a.length;c+=1){var l=r.validate(a[c]);if(l.isLeft)return h(function(){return wn(t,n,o,i.concat(u,l.value.propPath),l.value.value)})}switch(r.type){case $:var p=r.name,y=n.constraints;if(f.call(y,p)){var m=y[p];for(c=0;c<a.length;c+=1)for(var _=0;_<m.length;_+=1)if(!m[_].test(a[c]))return h(function(){return Cn(t,n,m[_],o,u,a[c],e)})}var g=tn(t,e,r,o,u,a),v=g[p].types;return E(v)?h(function(){return Pn(t,n,o,u,g[p].valuesByPath)}):i.reduce(function(e,c){return i.chain(function(e){var f=c.keys.length-r.keys.length;return r.keys.reduce(function(e,l,p){var h=c.types[c.keys[f+p]].extractor;return i.reduce(function(e,a){return i.chain(function(e){return s(t,n,e.typeVarMap,r.types[l].type,o,i.concat(u,[l]),[a])},e)},e,i.chain(h,a))},d(e))},e)},d({typeVarMap:g,types:v}),v);case W:return i.map(function(t){return{typeVarMap:t.typeVarMap,types:i.map(sn(r),R(t.types,[r.types.$1.type]))}},s(t,n,e,r.types.$1.type,o,i.concat(u,["$1"]),i.chain(r.types.$1.extractor,a)));case k:return i.chain(function(e){var c=e.types;return i.map(function(t){var n=t.types;return{typeVarMap:t.typeVarMap,types:ln(r,R(c,[r.types.$1.type]),R(n,[r.types.$2.type]))}},s(t,n,e.typeVarMap,r.types.$2.type,o,i.concat(u,["$2"]),i.chain(r.types.$2.extractor,a)))},s(t,n,e,r.types.$1.type,o,i.concat(u,["$1"]),i.chain(r.types.$1.extractor,a)));case X:return i.reduce(function(e,c){return i.chain(function(e){return s(t,n,e.typeVarMap,r.types[c].type,o,i.concat(u,[c]),i.chain(r.types[c].extractor,a))},e)},d({typeVarMap:e,types:[r]}),r.keys);default:return d({typeVarMap:e,types:[r]})}}function en(t){return function(n){return function(e){return nn(t,{name:"name",constraints:{},types:[n]},{},n,0,[],[e]).isRight}}}function rn(t){function n(n,e){return n(j(t))}return function(e){return function(r){return new D(q,t,e,n,r,[],{})}}}var on=zt("NullaryType")({})([Bt,Bt,dt([et,ct]),Dt])(rn);function un(t){return function(n){return function(e){return function(r){return function(i){return new D(W,t,n,function(n,e){return n("("+j(t)+" ")+e("$1")(o(i))+n(")")},e,["$1"],{$1:{extractor:r,type:i}})}}}}}var an=zt("UnaryType")({})([Bt,Bt,dt([et,ct]),dt([Wt("t a"),it(Wt("a"))]),rt])(function(t){return function(n){return function(e){return _(zt(j(t))({})([Dt,Dt]),un(t)(n)(e))}}});function sn(t){return un(t.name)(t.url)(t._test)(t.types.$1.extractor)}function cn(t){return function(n){return function(e){return function(r){return function(i){return function(u){return function(a){return new D(k,t,n,function(n,e){return n("("+j(t)+" ")+e("$1")(o(u))+n(" ")+e("$2")(o(a))+n(")")},e,["$1","$2"],{$1:{extractor:r,type:u},$2:{extractor:i,type:a}})}}}}}}}var fn=zt("BinaryType")({})([Bt,Bt,dt([et,ct]),dt([Wt("t a b"),it(Wt("a"))]),dt([Wt("t a b"),it(Wt("b"))]),rt])(function(t){return function(n){return function(e){return function(r){return function(o){return zt(j(t))({})([Dt,Dt,Dt])(cn(t)(n)(e)(r)(o))}}}}});function ln(t,n,e){return i.chain(function(t){return i.map(t,e)},i.map(cn(t.name)(t.url)(t._test)(t.types.$1.extractor)(t.types.$2.extractor),n))}function pn(t){return function(n){return _(rn(t)(n),M)}}var hn=zt("EnumType")({})([Bt,Bt,it(et),Dt])(pn);function dn(t){var n=I(t),e={};return n.forEach(function(n){e[n]={extractor:function(t){return[t[n]]},type:t[n]}}),new D(X,"","",function(e,r){if(E(n))return e("{}");var u=i.map(function(n){var i=t[n];return e(" ")+e(/^(?!\d)[$\w]+$/.test(n)?n:o(n))+e(" :: ")+C(i.type===X||E(i.keys),F,r(n)(o(i)))},n);return w(e("{"))(e(" }"))(b(e(","),u))},function(t){var e={};for(var r in n.forEach(function(t){e[t]=t}),t)delete e[r];return E(Object.keys(e))},n,e)}var yn=zt("RecordType")({})([Ut(Dt),Dt])(dn),mn=zt("TypeVariable")({})([Bt,Dt])(function(t){return new D($,t,"",m(t),y(!0),[],{})}),_n=zt("UnaryTypeVariable")({})([Bt,rt])(function(t){return zt(t)({})([Dt,Dt])(function(t){return function(n){var e={$1:{extractor:y([]),type:n}};return new D($,t,"",function(e,r){return e("("+t+" ")+r("$1")(o(n))+e(")")},y(!0),["$1"],e)}}(t))}),gn=zt("BinaryTypeVariable")({})([Bt,rt])(function(t){return zt(t)({})([Dt,Dt,Dt])(function(t){return function(n){return function(e){var r={$1:{extractor:y([]),type:n},$2:{extractor:y([]),type:e}};return new D($,t,"",function(r,i){return r("("+t+" ")+i("$1")(o(n))+r(" ")+i("$2")(o(e))+r(")")},y(!0),["$1","$2"],r)}}}(t))}),vn=zt("Thunk")({})([Dt,Dt])(function(t){return dt([t])}),En=zt("Predicate")({})([Dt,Dt])(function(t){return dt([t,ct])});function Tn(t,n,e,r){return new TypeError(x(B(t.name)+" applied to the wrong number of arguments\n\n"+In(t,y(y(O)),function(t){return function(e){return y(y(t===n?e:O))}})+"\nExpected "+Yt(e)+" but received "+Yt(r.length)+L(".\n",":\n\n",o,r)))}function bn(t,n,e){var r=[];return I(t).forEach(function(n){var o=e(n);t[n].forEach(function(t){r.push(o(t)(j(t.name)+" "+n))})}),P(r.length>0,function(t){return t+n(" => ")},P(r.length>1,w(n("("))(n(")")),b(n(", "),r)))}function An(t){return i.concat(t.type===$?[t.name]:[],i.chain(function(n){return An(t.types[n].type)},t.keys))}function Mn(t){var n=i.chain(An,t.types);return function(t){var e="a".charCodeAt(0);return C(t.type===V||t.type===X||E(t.keys),F,o(t).replace(/\bUnknown\b/g,function(){do{var t=String.fromCharCode(e++)}while(n.indexOf(t)>=0);return t}))}}function Rn(t){return B(C(t.type===X||E(t.keys),F,o(t)))}function Sn(t,n,e,r){var u=Mn(n);return o(r)+")  "+b("\n    ",i.map(function(n){var e=Qt(t,[n]);return o(n)+" :: "+b(", ",i.map(u,e))},e))}function Nn(t){var n=i.map(Mn(t),t.types),e=n.length-1;return t.name+" :: "+bn(t.constraints,g,y(y(g)))+P(0===e,U,b(" -> ",v(n)))+" -> "+A(n)}function On(t,n,e){return C(t.type===X||E(t.keys)||t.type===V&&E(n)||!E(n),F,e(t)(n)(t.format(O,function(r){return y(On(t.types[r].type,i.concat(n,[r]),e))})))}function In(t,n,e){var r=t.types.reduce(function(t,n,r){var i=e(r);return t.numbers.push(On(n,[],i(function(n){return function(t){return function(n){var e=n.length-t.length;return S(" ",Math.floor(e/2))+t+S(" ",Math.ceil(e/2))}}(o(t.counter+=1))(n)}))),t.carets.push(On(n,[],function(t){return function(t){var n=o(t),e=n.slice(0,1)+n.slice(-1)==="()";return i(function(t){return e&&"()"!==n&&t.length===n.length?O("(")+N("^")(t.slice(1,-1))+O(")"):N("^")(t)})}(t)(t)})),t},{carets:[],numbers:[],counter:0});return Nn(t)+"\n"+O(t.name+" :: ")+bn(t.constraints,O,n)+b(O(" -> "),r.carets)+"\n"+O(t.name+" :: ")+bn(t.constraints,O,y(y(O)))+b(O(" -> "),r.numbers)+"\n"}function Fn(t,n){return i.reduce(function(t,n){return t.types[n].type},t,n)}function Ln(t){return function(n){return function(e){return function(r){return function(r){var o=i.concat([n],r),u=T(o)(t),a=T(t)(o);return u&&a?e:u?g:O}}}}}function xn(t,n){return null==n.url||""===n.url?"":"\nSee "+n.url+" for information about the "+n.name+" "+t+".\n"}function Cn(t,n,e,r,o,u,a){var s=Fn(n.types[r],o);return new TypeError(x("Type-class constraint violation\n\n"+In(n,function(t){return function(n){return t===s.name&&n.name===e.name?N("^"):O}},Ln(i.concat([r],o)))+"\n"+Sn(t,n,[u],1)+"\n\n"+B(n.name)+" requires "+B(s.name)+" to satisfy the "+j(e.name)+" type-class constraint; the value at position 1 does not.\n"+xn("type class",e)))}function Pn(t,n,e,r,u){var a=JSON.stringify(i.concat([e],r)),s=u[a],c=i.filter(function(n){var e=u[n];return n===a||E(function(t,n){return i.filter(Zt,Jt(t,[],n))}(t,i.concat(s,e)))},I(u)),l=function(t,n){var e=i.map(JSON.parse,I(n));return In(t,y(y(O)),function(t){return function(r){return function(o){return function(o){var u=i.concat([t],o);return function(t){if(e.some(T(u))){var o=JSON.stringify(u);if(!f.call(n,o))return t;if(!E(n[o]))return r(t)}return O(t)}}}}})}(n,i.reduce(function(t,n){return t[n]=u[n],t},{},c));return new TypeError(x(1===s.length&&E(Qt(t,s))?"Unrecognized value\n\n"+l+"\n1)  "+o(s[0])+" :: (no types)\n\n"+L("The environment is empty! Polymorphic functions require a non-empty environment.\n","The value at position 1 is not a member of any type in the environment.\n\nThe environment contains the following types:\n\n",Mn(n),t):"Type-variable constraint violation\n\n"+l+"\n"+i.reduce(function(e,r){var o=u[r];return E(o)?e:{idx:e.idx+1,s:e.s+Sn(t,n,o,e.idx+1)+"\n\n"}},{idx:0,s:""},c).s+"Since there is no type of which all the above values are members, the type-variable constraint has been violated.\n"))}function wn(t,n,e,r,o){var u=Fn(n.types[e],r);return new TypeError(x("Invalid value\n\n"+In(n,y(y(O)),Ln(i.concat([e],r)))+"\n"+Sn(t,n,[o],1)+"\n\nThe value at position 1 is not a member of "+Rn(u)+".\n"+xn("type",u)))}function Un(t){if(t.isLeft)throw t.value();return t.value}function Bn(t,n,e){var r=n.types.length-1;function u(e,r,u){if(n.types[r].type!==V)return u;var a=n.types[r];function s(e,r,o,u){var s=[o],c=a.types[o].type;return c.type===$?i.chain(function(e){return E(e[c.name].types)?h(function(){return Pn(t,n,r,s,e[c.name].valuesByPath)}):d(e)},d(tn(t,e,c,r,s,[u]))):i.map(function(t){return t.typeVarMap},nn(t,n,e,c,r,s,[u]))}var f=a.types.$1.type.type===H?0:a.keys.length-1,l=e;return function(t){if(arguments.length!==f)throw function(t,n,e,r){return new TypeError(x(B(t.name)+" applied "+Rn(t.types[n])+" to the wrong number of arguments\n\n"+In(t,y(y(O)),function(t){return function(e){return function(r){return function(o){return function(o){return t===n?r.format(O,function(t){return"$1"===t?e:O}):O(o)}}}}})+"\nExpected "+Yt(e)+" but received "+Yt(r.length)+L(".\n",":\n\n",o,r)))}(n,r,f,c.call(arguments));var e=arguments;l=Un(v(a.keys).reduce(function(t,n,o){var u=e[o];return i.chain(function(t){return s(t,r,n,u)},t)},d(l)));var p=u.apply(this,arguments),h=A(a.keys);return l=Un(s(l,r,h,p)),p}}var a=n.types[0].type===H?function(){if(0!==arguments.length)throw Tn(n,0,0,c.call(arguments));var o=e();return u(Un(nn(t,n,{},n.types[r],r,[],[o])).typeVarMap,r,o)}:function o(a,s,f){return function(l){var p=c.call(arguments);if(1!==p.length)throw Tn(n,f,1,p);var h=Un(nn(t,n,a,n.types[f],f,[],p)).typeVarMap,d=i.concat(s,p);if(f+1===r){var y=d.reduce(function(t,n,e){return t(u(h,e,n))},e);return u(h=Un(nn(t,n,h,n.types[r],r,[],[y])).typeVarMap,r,y)}return o(h,d,f+1)}}({},[],0);return a[p]=a.toString=function(t){return function(){return t}}(Nn(n)),a}function jn(t){function n(n){return function(e){return function(r){return function(o){return t.checkTypes?Bn(t.env,{name:n,constraints:e,types:ht(r)},o):o}}}}return n(n.name)({})([Bt,Ut(it(kt)),Tt(it(Dt)),rt,rt])(n)}var Dn=zt("create")({})([dn({checkTypes:ct,env:it(et)}),rt])(jn);function kn(t){var n=t(Gt),e=n.types.$1.extractor;return an(n.name)(n.url)(n._test)(e)}return{Any:et,AnyFunction:rt,Arguments:ot,Array:kn(it),Array0:ut,Array1:kn(at),Array2:function(t){var n=st(Gt)(Gt),e=n.types.$1.extractor,r=n.types.$2.extractor;return fn(n.name)(n.url)(n._test)(e)(r)}(),Boolean:ct,Date:ft,Error:lt,FiniteNumber:pt,Function:zt("Function")({})([it(Dt),Dt])(dt),GlobalRegExp:yt,HtmlElement:mt,Integer:_t,NegativeFiniteNumber:gt,NegativeInteger:vt,NegativeNumber:Et,NonEmpty:Tt,NonGlobalRegExp:bt,NonNegativeInteger:At,NonZeroFiniteNumber:Mt,NonZeroInteger:Rt,NonZeroValidNumber:St,Null:Nt,Nullable:kn(Ot),Number:It,Object:Ft,PositiveFiniteNumber:Lt,PositiveInteger:xt,PositiveNumber:Ct,RegExp:Pt,RegexFlags:wt,StrMap:kn(Ut),String:Bt,Symbol:jt,Type:Dt,TypeClass:kt,Undefined:Vt,Unknown:Gt,ValidDate:Ht,ValidNumber:qt,env:Xt,create:Dn,test:zt("test")({})([it(Dt),Dt,et,ct])(en),NullaryType:on,UnaryType:an,BinaryType:fn,EnumType:hn,RecordType:yn,TypeVariable:mn,UnaryTypeVariable:_n,BinaryTypeVariable:gn,Thunk:vn,Predicate:En}})}).call(this,e(9))},function(t,n,e){var r,o,i;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u(e(14)):null!=e(1)?(o=[e(14)],void 0===(i="function"==typeof(r=u)?r.apply(n,o):r)||(t.exports=i)):self.sanctuaryTypeClasses=u(self.sanctuaryTypeIdentifiers)}(function(t){"use strict";if("undefined"!=typeof __doctest){__doctest.require("./test/Identity");var n=__doctest.require("./test/List"),e=__doctest.require("./test/Maybe");__doctest.require("./test/Sum"),__doctest.require("./test/Tuple"),n.Nil,n.Cons,e.Nothing,e.Just}function r(t){return function(n){return t.concat(n)}}function o(t){return function(n){return t}}function i(t,n){Object.keys(t).forEach(n,t)}function u(t,n){return Object.prototype.hasOwnProperty.call(n,t)}function a(t){return t}function s(t){return function(n){return[t,n]}}function c(n,e){return typeof n==typeof e&&t(n)===t(e)}function f(t){return{value:t,done:!1}}function l(t){return{value:t,done:!0}}function p(t,n,e,r){if(!(this instanceof p))return new p(t,n,e,r);this.name=t,this.url=n,this.test=function(t){return e.every(function(n){return n.test(t)})&&r(t)}}p["@@type"]="sanctuary-type-classes/TypeClass";var h="Constructor",d="Value";function y(t,n,e){for(var r=e,o=0;o<n.length;o+=1){var i=n[o];if(null==r||!t&&!u(i,r))return null;r=r[i]}return"function"==typeof r?r:null}function m(t,n){return y(!0,t,n)}function _(t){return y(!1,t,Y)}var g=u("name",function(){})?function(t){return t.name}:function(t){var n=/function (\w*)/.exec(t);return null==n?"":n[1]};function v(n,e,r){function o(n){var e="fantasy-land/"+n;return r[n]===h?function(t){var n=m([e],t);return null==n&&"function"==typeof t?_([g(t),e]):n}:function(n){var r=null;return null!=n&&null!=n.constructor&&n.constructor.prototype===n||(r=m([e],n)),null==r&&(r=_([t(n),"prototype",e])),r&&r.bind(n)}}var i=Object.keys(r),u=p("sanctuary-type-classes/"+n,"https://github.com/sanctuary-js/sanctuary-type-classes/tree/v9.0.0#"+n,e,function(t){return i.every(function(n){var e=r[n]===h?t.constructor:t;return null!=o(n)(e)})});return u.methods=i.reduce(function(t,n){return t[n]=o(n),t},{}),u}var E=v("Setoid",[],{equals:d}),T=v("Ord",[E],{lte:d}),b=v("Semigroupoid",[],{compose:d}),A=v("Category",[b],{id:h}),M=v("Semigroup",[],{concat:d}),R=v("Monoid",[M],{empty:h}),S=v("Group",[R],{invert:d}),N=v("Filterable",[],{filter:d}),O=v("Functor",[],{map:d}),I=v("Bifunctor",[O],{bimap:d}),F=v("Profunctor",[O],{promap:d}),L=v("Apply",[O],{ap:d}),x=v("Applicative",[L],{of:h}),C=v("Chain",[L],{chain:d}),P=v("ChainRec",[C],{chainRec:h}),w=v("Monad",[x,C],{}),U=v("Alt",[O],{alt:d}),B=v("Plus",[U],{zero:h}),j=v("Alternative",[x,B],{}),D=v("Foldable",[],{reduce:d}),k=v("Traversable",[O,D],{traverse:d}),V=v("Extend",[O],{extend:d}),G=v("Comonad",[V],{extract:d}),H=v("Contravariant",[],{contramap:d});function q(t){return[t]}function X(t){if(t.length!==this.length)return!1;for(var n=0;n<this.length;n+=1)if(!K(this[n],t[n]))return!1;return!0}function W(t){for(var n=0;;n+=1){if(n===this.length)return!0;if(n===t.length)return!1;if(!K(this[n],t[n]))return Z(this[n],t[n])}}function z(t){return this.concat(t)}function $(t){var n={};function e(t){n[t]=this[t]}return i(this,e),i(t,e),n}var Y={Null:{prototype:{"fantasy-land/equals":function(t){return!0},"fantasy-land/lte":function(t){return!0}}},Undefined:{prototype:{"fantasy-land/equals":function(t){return!0},"fantasy-land/lte":function(t){return!0}}},Boolean:{prototype:{"fantasy-land/equals":function(t){return"object"==typeof this?K(this.valueOf(),t.valueOf()):this===t},"fantasy-land/lte":function(t){return"object"==typeof this?Z(this.valueOf(),t.valueOf()):!1===this||!0===t}}},Number:{prototype:{"fantasy-land/equals":function(t){return"object"==typeof this?K(this.valueOf(),t.valueOf()):isNaN(this)&&isNaN(t)||this===t},"fantasy-land/lte":function(t){return"object"==typeof this?Z(this.valueOf(),t.valueOf()):isNaN(this)||this<=t}}},Date:{prototype:{"fantasy-land/equals":function(t){return K(this.valueOf(),t.valueOf())},"fantasy-land/lte":function(t){return Z(this.valueOf(),t.valueOf())}}},RegExp:{prototype:{"fantasy-land/equals":function(t){return t.source===this.source&&t.global===this.global&&t.ignoreCase===this.ignoreCase&&t.multiline===this.multiline&&t.sticky===this.sticky&&t.unicode===this.unicode}}},String:{"fantasy-land/empty":function(){return""},prototype:{"fantasy-land/equals":function(t){return"object"==typeof this?K(this.valueOf(),t.valueOf()):this===t},"fantasy-land/lte":function(t){return"object"==typeof this?Z(this.valueOf(),t.valueOf()):this<=t},"fantasy-land/concat":function(t){return this+t}}},Array:{"fantasy-land/empty":function(){return[]},"fantasy-land/of":q,"fantasy-land/chainRec":function(t,n){for(var e=[],r={},o={head:n,tail:r};o!==r;){for(var i=r,u=t(f,l,o.head),a=0;a<u.length;a+=1){var s=u[a];s.done?e.push(s.value):i={head:s.value,tail:i}}for(o=o.tail;i!==r;)o={head:i.head,tail:o},i=i.tail}return e},"fantasy-land/zero":function(){return[]},prototype:{"fantasy-land/equals":X,"fantasy-land/lte":W,"fantasy-land/concat":z,"fantasy-land/filter":function(t){return this.filter(function(n){return t(n)})},"fantasy-land/map":function(t){return this.map(function(n){return t(n)})},"fantasy-land/ap":function(t){for(var n=[],e=0;e<t.length;e+=1)for(var r=0;r<this.length;r+=1)n.push(t[e](this[r]));return n},"fantasy-land/chain":function(t){for(var n=[],e=0;e<this.length;e+=1)for(var r=0,o=t(this[e]);r<o.length;r+=1)n.push(o[r]);return n},"fantasy-land/alt":z,"fantasy-land/reduce":function(t,n){for(var e=n,r=0;r<this.length;r+=1)e=t(e,this[r]);return e},"fantasy-land/traverse":function(t,n){var e=this;function o(i,u){switch(u){case 0:return ut(t,[]);case 2:return it(s,n(e[i]),n(e[i+1]));default:var a=2*Math.floor(u/4);return it(r,o(i,a),o(i+a,u-a))}}return this.length%2==1?it(r,et(q,n(this[0])),o(1,this.length-1)):o(0,this.length)},"fantasy-land/extend":function(t){return this.map(function(n,e,r){return t(r.slice(e))})}}},Arguments:{prototype:{"fantasy-land/equals":function(t){return X.call(this,t)},"fantasy-land/lte":function(t){return W.call(this,t)}}},Error:{prototype:{"fantasy-land/equals":function(t){return K(this.name,t.name)&&K(this.message,t.message)}}},Object:{"fantasy-land/empty":function(){return{}},"fantasy-land/zero":function(){return{}},prototype:{"fantasy-land/equals":function(t){var n=this,e=Object.keys(this).sort();return K(e,Object.keys(t).sort())&&e.every(function(e){return K(n[e],t[e])})},"fantasy-land/lte":function(t){for(var n=Object.keys(this).sort(),e=Object.keys(t).sort();;){if(0===n.length)return!0;if(0===e.length)return!1;var r=n.shift(),o=e.shift();if(r<o)return!0;if(r>o)return!1;if(!K(this[r],t[r]))return Z(this[r],t[r])}},"fantasy-land/concat":$,"fantasy-land/filter":function(t){var n={};return i(this,function(e){t(this[e])&&(n[e]=this[e])}),n},"fantasy-land/map":function(t){var n={};return i(this,function(e){n[e]=t(this[e])}),n},"fantasy-land/ap":function(t){var n={};return i(this,function(e){u(e,t)&&(n[e]=t[e](this[e]))}),n},"fantasy-land/alt":$,"fantasy-land/reduce":function(t,n){var e=this;return Object.keys(this).sort().reduce(function(n,r){return t(n,e[r])},n)},"fantasy-land/traverse":function(t,n){var e=this;return Object.keys(this).reduce(function(t,r){return it(function(t){return function(n){var e={};return e[r]=n,$.call(t,e)}},t,n(e[r]))},ut(t,{}))}}},Function:{"fantasy-land/id":function(){return a},"fantasy-land/of":function(t){return function(n){return t}},"fantasy-land/chainRec":function(t,n){return function(e){for(var r=f(n);!r.done;)r=t(f,l,r.value)(e);return r.value}},prototype:{"fantasy-land/equals":function(t){return t===this},"fantasy-land/compose":function(t){var n=this;return function(e){return t(n(e))}},"fantasy-land/map":function(t){var n=this;return function(e){return t(n(e))}},"fantasy-land/promap":function(t,n){var e=this;return function(r){return n(e(t(r)))}},"fantasy-land/ap":function(t){var n=this;return function(e){return t(e)(n(e))}},"fantasy-land/chain":function(t){var n=this;return function(e){return t(n(e))(e)}},"fantasy-land/extend":function(t){var n=this;return function(e){return t(function(t){return n(Q(e,t))})}},"fantasy-land/contramap":function(t){var n=this;return function(e){return n(t(e))}}}}},K=function(){var t=[];return function(n,e){if(!c(n,e))return!1;if(t.some(function(t){return t[0]===n&&t[1]===e}))return!0;t.push([n,e]);try{return E.test(n)&&E.test(e)&&E.methods.equals(n)(e)}finally{t.pop()}}}();function J(t,n){return c(t,n)&&!Z(n,t)}var Z=function(){var t=[];return function(n,e){if(!c(n,e))return!1;if(t.some(function(t){return t[0]===n&&t[1]===e}))return K(n,e);t.push([n,e]);try{return T.test(n)&&T.test(e)&&T.methods.lte(n)(e)}finally{t.pop()}}}();function Q(t,n){return M.methods.concat(t)(n)}function tt(t){return R.methods.empty(t)()}function nt(t,n){return N.methods.filter(n)(t)}function et(t,n){return O.methods.map(n)(t)}function rt(t,n,e){return I.methods.bimap(e)(t,n)}function ot(t,n){return L.methods.ap(n)(t)}function it(t,n,e){return ot(et(t,n),e)}function ut(t,n){return x.methods.of(t)(n)}function at(t,n){return C.methods.chain(n)(t)}function st(t,n,e){return D.methods.reduce(e)(t,n)}function ct(t,n){var e=st(function(n,e){return n.push({idx:n.length,x:e,fx:t(e)}),n},[],n),r=function(t){switch(typeof(t&&t.fx)){case"number":return function(t,n){return t<=n||t!=t};case"string":return function(t,n){return t<=n};default:return Z}}(e[0]);if(e.sort(function(t,n){return r(t.fx,n.fx)?r(n.fx,t.fx)?t.idx-n.idx:-1:1}),Array.isArray(n)){for(var o=0;o<e.length;o+=1)e[o]=e[o].x;return e}var i=n.constructor,u=tt(i);for(o=0;o<e.length;o+=1)u=Q(u,ut(i,e[o].x));return u}function ft(t,n,e){return k.methods.traverse(e)(t,n)}function lt(t,n){return V.methods.extend(n)(t)}return{TypeClass:p,Setoid:E,Ord:T,Semigroupoid:b,Category:A,Semigroup:M,Monoid:R,Group:S,Filterable:N,Functor:O,Bifunctor:I,Profunctor:F,Apply:L,Applicative:x,Chain:C,ChainRec:P,Monad:w,Alt:U,Plus:B,Alternative:j,Foldable:D,Traversable:k,Extend:V,Comonad:G,Contravariant:H,equals:K,lt:J,lte:Z,gt:function(t,n){return J(n,t)},gte:function(t,n){return Z(n,t)},min:function(t,n){return Z(t,n)?t:n},max:function(t,n){return Z(t,n)?n:t},compose:function(t,n){return b.methods.compose(n)(t)},id:function(t){return A.methods.id(t)()},concat:Q,empty:tt,invert:function(t){return S.methods.invert(t)()},filter:nt,reject:function(t,n){return nt(function(n){return!t(n)},n)},map:et,flip:function(t,n){return O.methods.map(t)(function(t){return function(n){return n(t)}}(n))},bimap:rt,mapLeft:function(t,n){return rt(t,a,n)},promap:function(t,n,e){return F.methods.promap(e)(t,n)},ap:ot,lift2:it,lift3:function(t,n,e,r){return ot(ot(et(t,n),e),r)},apFirst:function(t,n){return it(o,t,n)},apSecond:function(t,n){return it(o(a),t,n)},of:ut,append:function(t,n){return Q(n,ut(n.constructor,t))},prepend:function(t,n){return Q(ut(n.constructor,t),n)},chain:at,join:function(t){return at(a,t)},chainRec:function(t,n,e){return P.methods.chainRec(t)(n,e)},alt:function(t,n){return U.methods.alt(t)(n)},zero:function(t){return B.methods.zero(t)()},reduce:st,size:function(t){return Array.isArray(t)?t.length:st(function(t,n){return t+1},0,t)},elem:function(t,n){return st(function(n,e){return n||K(t,e)},!1,n)},foldMap:function(t,n,e){return st(function(t,e){return Q(t,n(e))},tt(t),e)},reverse:function(t){if(Array.isArray(t))return t.slice().reverse();var n=t.constructor;return st(function(t,e){return Q(ut(n,e),t)},tt(n),t)},sort:function(t){return ct(a,t)},sortBy:ct,takeWhile:function(t,n){var e=!0;return nt(function(n){return e=e&&t(n)},n)},dropWhile:function(t,n){var e=!1;return nt(function(n){return e=e||!t(n)},n)},traverse:ft,sequence:function(t,n){return ft(t,a,n)},extend:lt,duplicate:function(t){return lt(a,t)},extract:function(t){return G.methods.extract(t)()},contramap:function(t,n){return H.methods.contramap(n)(t)}}})},function(t,n,e){var r,o,i;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u():null!=e(1)?(o=[],void 0===(i="function"==typeof(r=u)?r.apply(n,o):r)||(t.exports=i)):self.sanctuaryTypeIdentifiers=u()}(function(){"use strict";var t="@@type";return function(n){return null!=n&&null!=n.constructor&&n.constructor.prototype!==n&&"string"==typeof n.constructor[t]?n.constructor[t]:Object.prototype.toString.call(n).slice("[object ".length,-"]".length)}})},function(t,n,e){var r,o,i;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u(e(16)):null!=e(1)?(o=[e(16)],void 0===(i="function"==typeof(r=u)?r.apply(n,o):r)||(t.exports=i)):self.sanctuaryTypeClasses=u(self.sanctuaryTypeIdentifiers)}(function(t){"use strict";if("undefined"!=typeof __doctest){__doctest.require("./test/Identity");var n=__doctest.require("./test/List"),e=__doctest.require("./test/Maybe");__doctest.require("./test/Sum"),__doctest.require("./test/Tuple"),n.Nil,n.Cons,e.Nothing,e.Just}function r(t){return function(n){return t.concat(n)}}function o(t){return function(n){return t}}function i(t,n){Object.keys(t).forEach(n,t)}function u(t,n){return Object.prototype.hasOwnProperty.call(n,t)}function a(t){return t}function s(t){return function(n){return[t,n]}}function c(n,e){return typeof n==typeof e&&t(n)===t(e)}function f(t){return{value:t,done:!1}}function l(t){return{value:t,done:!0}}function p(t,n,e,r){if(!(this instanceof p))return new p(t,n,e,r);this.name=t,this.url=n,this.test=function(t){return e.every(function(n){return n.test(t)})&&r(t)}}p["@@type"]="sanctuary-type-classes/TypeClass";var h="Constructor",d="Value";function y(t,n,e){for(var r=e,o=0;o<n.length;o+=1){var i=n[o];if(null==r||!t&&!u(i,r))return null;r=r[i]}return"function"==typeof r?r:null}function m(t,n){return y(!0,t,n)}function _(t){return y(!1,t,Y)}var g=u("name",function(){})?function(t){return t.name}:function(t){var n=/function (\w*)/.exec(t);return null==n?"":n[1]};function v(n,e,r){function o(n){var e="fantasy-land/"+n;return r[n]===h?function(t){var n=m([e],t);return null==n&&"function"==typeof t?_([g(t),e]):n}:function(n){var r=null;return null!=n&&null!=n.constructor&&n.constructor.prototype===n||(r=m([e],n)),null==r&&(r=_([t(n),"prototype",e])),r&&r.bind(n)}}var i=Object.keys(r),u=p("sanctuary-type-classes/"+n,"https://github.com/sanctuary-js/sanctuary-type-classes/tree/v9.0.0#"+n,e,function(t){return i.every(function(n){var e=r[n]===h?t.constructor:t;return null!=o(n)(e)})});return u.methods=i.reduce(function(t,n){return t[n]=o(n),t},{}),u}var E=v("Setoid",[],{equals:d}),T=v("Ord",[E],{lte:d}),b=v("Semigroupoid",[],{compose:d}),A=v("Category",[b],{id:h}),M=v("Semigroup",[],{concat:d}),R=v("Monoid",[M],{empty:h}),S=v("Group",[R],{invert:d}),N=v("Filterable",[],{filter:d}),O=v("Functor",[],{map:d}),I=v("Bifunctor",[O],{bimap:d}),F=v("Profunctor",[O],{promap:d}),L=v("Apply",[O],{ap:d}),x=v("Applicative",[L],{of:h}),C=v("Chain",[L],{chain:d}),P=v("ChainRec",[C],{chainRec:h}),w=v("Monad",[x,C],{}),U=v("Alt",[O],{alt:d}),B=v("Plus",[U],{zero:h}),j=v("Alternative",[x,B],{}),D=v("Foldable",[],{reduce:d}),k=v("Traversable",[O,D],{traverse:d}),V=v("Extend",[O],{extend:d}),G=v("Comonad",[V],{extract:d}),H=v("Contravariant",[],{contramap:d});function q(t){return[t]}function X(t){if(t.length!==this.length)return!1;for(var n=0;n<this.length;n+=1)if(!K(this[n],t[n]))return!1;return!0}function W(t){for(var n=0;;n+=1){if(n===this.length)return!0;if(n===t.length)return!1;if(!K(this[n],t[n]))return Z(this[n],t[n])}}function z(t){return this.concat(t)}function $(t){var n={};function e(t){n[t]=this[t]}return i(this,e),i(t,e),n}var Y={Null:{prototype:{"fantasy-land/equals":function(t){return!0},"fantasy-land/lte":function(t){return!0}}},Undefined:{prototype:{"fantasy-land/equals":function(t){return!0},"fantasy-land/lte":function(t){return!0}}},Boolean:{prototype:{"fantasy-land/equals":function(t){return"object"==typeof this?K(this.valueOf(),t.valueOf()):this===t},"fantasy-land/lte":function(t){return"object"==typeof this?Z(this.valueOf(),t.valueOf()):!1===this||!0===t}}},Number:{prototype:{"fantasy-land/equals":function(t){return"object"==typeof this?K(this.valueOf(),t.valueOf()):isNaN(this)&&isNaN(t)||this===t},"fantasy-land/lte":function(t){return"object"==typeof this?Z(this.valueOf(),t.valueOf()):isNaN(this)||this<=t}}},Date:{prototype:{"fantasy-land/equals":function(t){return K(this.valueOf(),t.valueOf())},"fantasy-land/lte":function(t){return Z(this.valueOf(),t.valueOf())}}},RegExp:{prototype:{"fantasy-land/equals":function(t){return t.source===this.source&&t.global===this.global&&t.ignoreCase===this.ignoreCase&&t.multiline===this.multiline&&t.sticky===this.sticky&&t.unicode===this.unicode}}},String:{"fantasy-land/empty":function(){return""},prototype:{"fantasy-land/equals":function(t){return"object"==typeof this?K(this.valueOf(),t.valueOf()):this===t},"fantasy-land/lte":function(t){return"object"==typeof this?Z(this.valueOf(),t.valueOf()):this<=t},"fantasy-land/concat":function(t){return this+t}}},Array:{"fantasy-land/empty":function(){return[]},"fantasy-land/of":q,"fantasy-land/chainRec":function(t,n){for(var e=[],r={},o={head:n,tail:r};o!==r;){for(var i=r,u=t(f,l,o.head),a=0;a<u.length;a+=1){var s=u[a];s.done?e.push(s.value):i={head:s.value,tail:i}}for(o=o.tail;i!==r;)o={head:i.head,tail:o},i=i.tail}return e},"fantasy-land/zero":function(){return[]},prototype:{"fantasy-land/equals":X,"fantasy-land/lte":W,"fantasy-land/concat":z,"fantasy-land/filter":function(t){return this.filter(function(n){return t(n)})},"fantasy-land/map":function(t){return this.map(function(n){return t(n)})},"fantasy-land/ap":function(t){for(var n=[],e=0;e<t.length;e+=1)for(var r=0;r<this.length;r+=1)n.push(t[e](this[r]));return n},"fantasy-land/chain":function(t){for(var n=[],e=0;e<this.length;e+=1)for(var r=0,o=t(this[e]);r<o.length;r+=1)n.push(o[r]);return n},"fantasy-land/alt":z,"fantasy-land/reduce":function(t,n){for(var e=n,r=0;r<this.length;r+=1)e=t(e,this[r]);return e},"fantasy-land/traverse":function(t,n){var e=this;function o(i,u){switch(u){case 0:return ut(t,[]);case 2:return it(s,n(e[i]),n(e[i+1]));default:var a=2*Math.floor(u/4);return it(r,o(i,a),o(i+a,u-a))}}return this.length%2==1?it(r,et(q,n(this[0])),o(1,this.length-1)):o(0,this.length)},"fantasy-land/extend":function(t){return this.map(function(n,e,r){return t(r.slice(e))})}}},Arguments:{prototype:{"fantasy-land/equals":function(t){return X.call(this,t)},"fantasy-land/lte":function(t){return W.call(this,t)}}},Error:{prototype:{"fantasy-land/equals":function(t){return K(this.name,t.name)&&K(this.message,t.message)}}},Object:{"fantasy-land/empty":function(){return{}},"fantasy-land/zero":function(){return{}},prototype:{"fantasy-land/equals":function(t){var n=this,e=Object.keys(this).sort();return K(e,Object.keys(t).sort())&&e.every(function(e){return K(n[e],t[e])})},"fantasy-land/lte":function(t){for(var n=Object.keys(this).sort(),e=Object.keys(t).sort();;){if(0===n.length)return!0;if(0===e.length)return!1;var r=n.shift(),o=e.shift();if(r<o)return!0;if(r>o)return!1;if(!K(this[r],t[r]))return Z(this[r],t[r])}},"fantasy-land/concat":$,"fantasy-land/filter":function(t){var n={};return i(this,function(e){t(this[e])&&(n[e]=this[e])}),n},"fantasy-land/map":function(t){var n={};return i(this,function(e){n[e]=t(this[e])}),n},"fantasy-land/ap":function(t){var n={};return i(this,function(e){u(e,t)&&(n[e]=t[e](this[e]))}),n},"fantasy-land/alt":$,"fantasy-land/reduce":function(t,n){var e=this;return Object.keys(this).sort().reduce(function(n,r){return t(n,e[r])},n)},"fantasy-land/traverse":function(t,n){var e=this;return Object.keys(this).reduce(function(t,r){return it(function(t){return function(n){var e={};return e[r]=n,$.call(t,e)}},t,n(e[r]))},ut(t,{}))}}},Function:{"fantasy-land/id":function(){return a},"fantasy-land/of":function(t){return function(n){return t}},"fantasy-land/chainRec":function(t,n){return function(e){for(var r=f(n);!r.done;)r=t(f,l,r.value)(e);return r.value}},prototype:{"fantasy-land/equals":function(t){return t===this},"fantasy-land/compose":function(t){var n=this;return function(e){return t(n(e))}},"fantasy-land/map":function(t){var n=this;return function(e){return t(n(e))}},"fantasy-land/promap":function(t,n){var e=this;return function(r){return n(e(t(r)))}},"fantasy-land/ap":function(t){var n=this;return function(e){return t(e)(n(e))}},"fantasy-land/chain":function(t){var n=this;return function(e){return t(n(e))(e)}},"fantasy-land/extend":function(t){var n=this;return function(e){return t(function(t){return n(Q(e,t))})}},"fantasy-land/contramap":function(t){var n=this;return function(e){return n(t(e))}}}}},K=function(){var t=[];return function(n,e){if(!c(n,e))return!1;if(t.some(function(t){return t[0]===n&&t[1]===e}))return!0;t.push([n,e]);try{return E.test(n)&&E.test(e)&&E.methods.equals(n)(e)}finally{t.pop()}}}();function J(t,n){return c(t,n)&&!Z(n,t)}var Z=function(){var t=[];return function(n,e){if(!c(n,e))return!1;if(t.some(function(t){return t[0]===n&&t[1]===e}))return K(n,e);t.push([n,e]);try{return T.test(n)&&T.test(e)&&T.methods.lte(n)(e)}finally{t.pop()}}}();function Q(t,n){return M.methods.concat(t)(n)}function tt(t){return R.methods.empty(t)()}function nt(t,n){return N.methods.filter(n)(t)}function et(t,n){return O.methods.map(n)(t)}function rt(t,n,e){return I.methods.bimap(e)(t,n)}function ot(t,n){return L.methods.ap(n)(t)}function it(t,n,e){return ot(et(t,n),e)}function ut(t,n){return x.methods.of(t)(n)}function at(t,n){return C.methods.chain(n)(t)}function st(t,n,e){return D.methods.reduce(e)(t,n)}function ct(t,n){var e=st(function(n,e){return n.push({idx:n.length,x:e,fx:t(e)}),n},[],n),r=function(t){switch(typeof(t&&t.fx)){case"number":return function(t,n){return t<=n||t!=t};case"string":return function(t,n){return t<=n};default:return Z}}(e[0]);if(e.sort(function(t,n){return r(t.fx,n.fx)?r(n.fx,t.fx)?t.idx-n.idx:-1:1}),Array.isArray(n)){for(var o=0;o<e.length;o+=1)e[o]=e[o].x;return e}var i=n.constructor,u=tt(i);for(o=0;o<e.length;o+=1)u=Q(u,ut(i,e[o].x));return u}function ft(t,n,e){return k.methods.traverse(e)(t,n)}function lt(t,n){return V.methods.extend(n)(t)}return{TypeClass:p,Setoid:E,Ord:T,Semigroupoid:b,Category:A,Semigroup:M,Monoid:R,Group:S,Filterable:N,Functor:O,Bifunctor:I,Profunctor:F,Apply:L,Applicative:x,Chain:C,ChainRec:P,Monad:w,Alt:U,Plus:B,Alternative:j,Foldable:D,Traversable:k,Extend:V,Comonad:G,Contravariant:H,equals:K,lt:J,lte:Z,gt:function(t,n){return J(n,t)},gte:function(t,n){return Z(n,t)},min:function(t,n){return Z(t,n)?t:n},max:function(t,n){return Z(t,n)?n:t},compose:function(t,n){return b.methods.compose(n)(t)},id:function(t){return A.methods.id(t)()},concat:Q,empty:tt,invert:function(t){return S.methods.invert(t)()},filter:nt,reject:function(t,n){return nt(function(n){return!t(n)},n)},map:et,flip:function(t,n){return O.methods.map(t)(function(t){return function(n){return n(t)}}(n))},bimap:rt,mapLeft:function(t,n){return rt(t,a,n)},promap:function(t,n,e){return F.methods.promap(e)(t,n)},ap:ot,lift2:it,lift3:function(t,n,e,r){return ot(ot(et(t,n),e),r)},apFirst:function(t,n){return it(o,t,n)},apSecond:function(t,n){return it(o(a),t,n)},of:ut,append:function(t,n){return Q(n,ut(n.constructor,t))},prepend:function(t,n){return Q(ut(n.constructor,t),n)},chain:at,join:function(t){return at(a,t)},chainRec:function(t,n,e){return P.methods.chainRec(t)(n,e)},alt:function(t,n){return U.methods.alt(t)(n)},zero:function(t){return B.methods.zero(t)()},reduce:st,size:function(t){return Array.isArray(t)?t.length:st(function(t,n){return t+1},0,t)},elem:function(t,n){return st(function(n,e){return n||K(t,e)},!1,n)},foldMap:function(t,n,e){return st(function(t,e){return Q(t,n(e))},tt(t),e)},reverse:function(t){if(Array.isArray(t))return t.slice().reverse();var n=t.constructor;return st(function(t,e){return Q(ut(n,e),t)},tt(n),t)},sort:function(t){return ct(a,t)},sortBy:ct,takeWhile:function(t,n){var e=!0;return nt(function(n){return e=e&&t(n)},n)},dropWhile:function(t,n){var e=!1;return nt(function(n){return e=e||!t(n)},n)},traverse:ft,sequence:function(t,n){return ft(t,a,n)},extend:lt,duplicate:function(t){return lt(a,t)},extract:function(t){return G.methods.extract(t)()},contramap:function(t,n){return H.methods.contramap(n)(t)}}})},function(t,n,e){var r,o,i;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u():null!=e(1)?(o=[],void 0===(i="function"==typeof(r=u)?r.apply(n,o):r)||(t.exports=i)):self.sanctuaryTypeIdentifiers=u()}(function(){"use strict";var t="@@type";return function(n){return null!=n&&null!=n.constructor&&n.constructor.prototype!==n&&"string"==typeof n.constructor[t]?n.constructor[t]:Object.prototype.toString.call(n).slice("[object ".length,-"]".length)}})},function(t,n,e){var r,o,i;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u(e(3),e(18)):null!=e(1)?(o=[e(3),e(18)],void 0===(i="function"==typeof(r=u)?r.apply(n,o):r)||(t.exports=i)):self.sanctuaryMaybe=u(self.sanctuaryShow,self.sanctuaryTypeClasses)}(function(n,r){"use strict";if("undefined"!=typeof __doctest){var o=__doctest.require("sanctuary-def"),i=__doctest.require("sanctuary-type-identifiers");!function(){var t=__doctest.require("sanctuary"),n=o.UnaryType("sanctuary-maybe/Maybe")("")(function(t){return i(t)===u["@@type"]})(function(t){return t.isJust?[t.value]:[]}),e=r.concat(t.env,[o.TypeClass,n(o.Unknown)]);t.create({checkTypes:!0,env:e})}()}var u={},a={constructor:u,isNothing:!0,isJust:!1,"@@show":y,"fantasy-land/equals":function(t){return t.isNothing},"fantasy-land/lte":function(t){return!0},"fantasy-land/concat":function(t){return t},"fantasy-land/filter":function(t){return this},"fantasy-land/map":function(t){return this},"fantasy-land/ap":function(t){return this},"fantasy-land/chain":function(t){return this},"fantasy-land/alt":function(t){return t},"fantasy-land/reduce":function(t,n){return n},"fantasy-land/traverse":function(t,n){return r.of(t,this)},"fantasy-land/extend":function(t){return this}},s={constructor:u,isNothing:!1,isJust:!0,"@@show":m,"fantasy-land/filter":function(t){return t(this.value)?this:l},"fantasy-land/map":function(t){return p(t(this.value))},"fantasy-land/ap":function(t){return t.isJust?p(t.value(this.value)):t},"fantasy-land/chain":function(t){return t(this.value)},"fantasy-land/alt":function(t){return this},"fantasy-land/reduce":function(t,n){return t(n,this.value)},"fantasy-land/traverse":function(t,n){return r.map(p,n(this.value))},"fantasy-land/extend":function(t){return p(t(this))}},c="object"==typeof t&&"object"==typeof t.exports?e(6):{},f=null!=c.inspect&&"symbol"==typeof c.inspect.custom?c.inspect.custom:"inspect";a[f]=y,s[f]=m;var l=u.Nothing=Object.create(a),p=u.Just=function(t){var n=Object.create(s);return r.Setoid.test(t)&&(n["fantasy-land/equals"]=_,r.Ord.test(t)&&(n["fantasy-land/lte"]=g)),r.Semigroup.test(t)&&(n["fantasy-land/concat"]=v),n.value=t,n};function h(t){return{tag:h,value:t}}function d(t){return{tag:d,value:t}}function y(){return"Nothing"}function m(){return"Just ("+n(this.value)+")"}function _(t){return t.isJust&&r.equals(this.value,t.value)}function g(t){return t.isJust&&r.lte(this.value,t.value)}function v(t){return t.isJust?p(r.concat(this.value,t.value)):this}return u["@@type"]="sanctuary-maybe/Maybe@1",u["fantasy-land/empty"]=function(){return l},u["fantasy-land/of"]=p,u["fantasy-land/chainRec"]=function(t,n){for(var e=h(n);e.tag===h;){var r=t(h,d,e.value);if(r.isNothing)return r;e=r.value}return p(e.value)},u["fantasy-land/zero"]=function(){return l},u})},function(t,n,e){var r,o,i;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u(e(19)):null!=e(1)?(o=[e(19)],void 0===(i="function"==typeof(r=u)?r.apply(n,o):r)||(t.exports=i)):self.sanctuaryTypeClasses=u(self.sanctuaryTypeIdentifiers)}(function(t){"use strict";if("undefined"!=typeof __doctest){__doctest.require("./test/Identity");var n=__doctest.require("./test/List"),e=__doctest.require("./test/Maybe");__doctest.require("./test/Sum"),__doctest.require("./test/Tuple"),n.Nil,n.Cons,e.Nothing,e.Just}function r(t){return function(n){return t.concat(n)}}function o(t){return function(n){return t}}function i(t,n){Object.keys(t).forEach(n,t)}function u(t,n){return Object.prototype.hasOwnProperty.call(n,t)}function a(t){return t}function s(t){return function(n){return[t,n]}}function c(n,e){return typeof n==typeof e&&t(n)===t(e)}function f(t){return{value:t,done:!1}}function l(t){return{value:t,done:!0}}function p(t,n,e,r){if(!(this instanceof p))return new p(t,n,e,r);this.name=t,this.url=n,this.test=function(t){return e.every(function(n){return n.test(t)})&&r(t)}}p["@@type"]="sanctuary-type-classes/TypeClass";var h="Constructor",d="Value";function y(t,n,e){for(var r=e,o=0;o<n.length;o+=1){var i=n[o];if(null==r||!t&&!u(i,r))return null;r=r[i]}return"function"==typeof r?r:null}function m(t,n){return y(!0,t,n)}function _(t){return y(!1,t,Y)}var g=u("name",function(){})?function(t){return t.name}:function(t){var n=/function (\w*)/.exec(t);return null==n?"":n[1]};function v(n,e,r){function o(n){var e="fantasy-land/"+n;return r[n]===h?function(t){var n=m([e],t);return null==n&&"function"==typeof t?_([g(t),e]):n}:function(n){var r=null;return null!=n&&null!=n.constructor&&n.constructor.prototype===n||(r=m([e],n)),null==r&&(r=_([t(n),"prototype",e])),r&&r.bind(n)}}var i=Object.keys(r),u=p("sanctuary-type-classes/"+n,"https://github.com/sanctuary-js/sanctuary-type-classes/tree/v9.0.0#"+n,e,function(t){return i.every(function(n){var e=r[n]===h?t.constructor:t;return null!=o(n)(e)})});return u.methods=i.reduce(function(t,n){return t[n]=o(n),t},{}),u}var E=v("Setoid",[],{equals:d}),T=v("Ord",[E],{lte:d}),b=v("Semigroupoid",[],{compose:d}),A=v("Category",[b],{id:h}),M=v("Semigroup",[],{concat:d}),R=v("Monoid",[M],{empty:h}),S=v("Group",[R],{invert:d}),N=v("Filterable",[],{filter:d}),O=v("Functor",[],{map:d}),I=v("Bifunctor",[O],{bimap:d}),F=v("Profunctor",[O],{promap:d}),L=v("Apply",[O],{ap:d}),x=v("Applicative",[L],{of:h}),C=v("Chain",[L],{chain:d}),P=v("ChainRec",[C],{chainRec:h}),w=v("Monad",[x,C],{}),U=v("Alt",[O],{alt:d}),B=v("Plus",[U],{zero:h}),j=v("Alternative",[x,B],{}),D=v("Foldable",[],{reduce:d}),k=v("Traversable",[O,D],{traverse:d}),V=v("Extend",[O],{extend:d}),G=v("Comonad",[V],{extract:d}),H=v("Contravariant",[],{contramap:d});function q(t){return[t]}function X(t){if(t.length!==this.length)return!1;for(var n=0;n<this.length;n+=1)if(!K(this[n],t[n]))return!1;return!0}function W(t){for(var n=0;;n+=1){if(n===this.length)return!0;if(n===t.length)return!1;if(!K(this[n],t[n]))return Z(this[n],t[n])}}function z(t){return this.concat(t)}function $(t){var n={};function e(t){n[t]=this[t]}return i(this,e),i(t,e),n}var Y={Null:{prototype:{"fantasy-land/equals":function(t){return!0},"fantasy-land/lte":function(t){return!0}}},Undefined:{prototype:{"fantasy-land/equals":function(t){return!0},"fantasy-land/lte":function(t){return!0}}},Boolean:{prototype:{"fantasy-land/equals":function(t){return"object"==typeof this?K(this.valueOf(),t.valueOf()):this===t},"fantasy-land/lte":function(t){return"object"==typeof this?Z(this.valueOf(),t.valueOf()):!1===this||!0===t}}},Number:{prototype:{"fantasy-land/equals":function(t){return"object"==typeof this?K(this.valueOf(),t.valueOf()):isNaN(this)&&isNaN(t)||this===t},"fantasy-land/lte":function(t){return"object"==typeof this?Z(this.valueOf(),t.valueOf()):isNaN(this)||this<=t}}},Date:{prototype:{"fantasy-land/equals":function(t){return K(this.valueOf(),t.valueOf())},"fantasy-land/lte":function(t){return Z(this.valueOf(),t.valueOf())}}},RegExp:{prototype:{"fantasy-land/equals":function(t){return t.source===this.source&&t.global===this.global&&t.ignoreCase===this.ignoreCase&&t.multiline===this.multiline&&t.sticky===this.sticky&&t.unicode===this.unicode}}},String:{"fantasy-land/empty":function(){return""},prototype:{"fantasy-land/equals":function(t){return"object"==typeof this?K(this.valueOf(),t.valueOf()):this===t},"fantasy-land/lte":function(t){return"object"==typeof this?Z(this.valueOf(),t.valueOf()):this<=t},"fantasy-land/concat":function(t){return this+t}}},Array:{"fantasy-land/empty":function(){return[]},"fantasy-land/of":q,"fantasy-land/chainRec":function(t,n){for(var e=[],r={},o={head:n,tail:r};o!==r;){for(var i=r,u=t(f,l,o.head),a=0;a<u.length;a+=1){var s=u[a];s.done?e.push(s.value):i={head:s.value,tail:i}}for(o=o.tail;i!==r;)o={head:i.head,tail:o},i=i.tail}return e},"fantasy-land/zero":function(){return[]},prototype:{"fantasy-land/equals":X,"fantasy-land/lte":W,"fantasy-land/concat":z,"fantasy-land/filter":function(t){return this.filter(function(n){return t(n)})},"fantasy-land/map":function(t){return this.map(function(n){return t(n)})},"fantasy-land/ap":function(t){for(var n=[],e=0;e<t.length;e+=1)for(var r=0;r<this.length;r+=1)n.push(t[e](this[r]));return n},"fantasy-land/chain":function(t){for(var n=[],e=0;e<this.length;e+=1)for(var r=0,o=t(this[e]);r<o.length;r+=1)n.push(o[r]);return n},"fantasy-land/alt":z,"fantasy-land/reduce":function(t,n){for(var e=n,r=0;r<this.length;r+=1)e=t(e,this[r]);return e},"fantasy-land/traverse":function(t,n){var e=this;function o(i,u){switch(u){case 0:return ut(t,[]);case 2:return it(s,n(e[i]),n(e[i+1]));default:var a=2*Math.floor(u/4);return it(r,o(i,a),o(i+a,u-a))}}return this.length%2==1?it(r,et(q,n(this[0])),o(1,this.length-1)):o(0,this.length)},"fantasy-land/extend":function(t){return this.map(function(n,e,r){return t(r.slice(e))})}}},Arguments:{prototype:{"fantasy-land/equals":function(t){return X.call(this,t)},"fantasy-land/lte":function(t){return W.call(this,t)}}},Error:{prototype:{"fantasy-land/equals":function(t){return K(this.name,t.name)&&K(this.message,t.message)}}},Object:{"fantasy-land/empty":function(){return{}},"fantasy-land/zero":function(){return{}},prototype:{"fantasy-land/equals":function(t){var n=this,e=Object.keys(this).sort();return K(e,Object.keys(t).sort())&&e.every(function(e){return K(n[e],t[e])})},"fantasy-land/lte":function(t){for(var n=Object.keys(this).sort(),e=Object.keys(t).sort();;){if(0===n.length)return!0;if(0===e.length)return!1;var r=n.shift(),o=e.shift();if(r<o)return!0;if(r>o)return!1;if(!K(this[r],t[r]))return Z(this[r],t[r])}},"fantasy-land/concat":$,"fantasy-land/filter":function(t){var n={};return i(this,function(e){t(this[e])&&(n[e]=this[e])}),n},"fantasy-land/map":function(t){var n={};return i(this,function(e){n[e]=t(this[e])}),n},"fantasy-land/ap":function(t){var n={};return i(this,function(e){u(e,t)&&(n[e]=t[e](this[e]))}),n},"fantasy-land/alt":$,"fantasy-land/reduce":function(t,n){var e=this;return Object.keys(this).sort().reduce(function(n,r){return t(n,e[r])},n)},"fantasy-land/traverse":function(t,n){var e=this;return Object.keys(this).reduce(function(t,r){return it(function(t){return function(n){var e={};return e[r]=n,$.call(t,e)}},t,n(e[r]))},ut(t,{}))}}},Function:{"fantasy-land/id":function(){return a},"fantasy-land/of":function(t){return function(n){return t}},"fantasy-land/chainRec":function(t,n){return function(e){for(var r=f(n);!r.done;)r=t(f,l,r.value)(e);return r.value}},prototype:{"fantasy-land/equals":function(t){return t===this},"fantasy-land/compose":function(t){var n=this;return function(e){return t(n(e))}},"fantasy-land/map":function(t){var n=this;return function(e){return t(n(e))}},"fantasy-land/promap":function(t,n){var e=this;return function(r){return n(e(t(r)))}},"fantasy-land/ap":function(t){var n=this;return function(e){return t(e)(n(e))}},"fantasy-land/chain":function(t){var n=this;return function(e){return t(n(e))(e)}},"fantasy-land/extend":function(t){var n=this;return function(e){return t(function(t){return n(Q(e,t))})}},"fantasy-land/contramap":function(t){var n=this;return function(e){return n(t(e))}}}}},K=function(){var t=[];return function(n,e){if(!c(n,e))return!1;if(t.some(function(t){return t[0]===n&&t[1]===e}))return!0;t.push([n,e]);try{return E.test(n)&&E.test(e)&&E.methods.equals(n)(e)}finally{t.pop()}}}();function J(t,n){return c(t,n)&&!Z(n,t)}var Z=function(){var t=[];return function(n,e){if(!c(n,e))return!1;if(t.some(function(t){return t[0]===n&&t[1]===e}))return K(n,e);t.push([n,e]);try{return T.test(n)&&T.test(e)&&T.methods.lte(n)(e)}finally{t.pop()}}}();function Q(t,n){return M.methods.concat(t)(n)}function tt(t){return R.methods.empty(t)()}function nt(t,n){return N.methods.filter(n)(t)}function et(t,n){return O.methods.map(n)(t)}function rt(t,n,e){return I.methods.bimap(e)(t,n)}function ot(t,n){return L.methods.ap(n)(t)}function it(t,n,e){return ot(et(t,n),e)}function ut(t,n){return x.methods.of(t)(n)}function at(t,n){return C.methods.chain(n)(t)}function st(t,n,e){return D.methods.reduce(e)(t,n)}function ct(t,n){var e=st(function(n,e){return n.push({idx:n.length,x:e,fx:t(e)}),n},[],n),r=function(t){switch(typeof(t&&t.fx)){case"number":return function(t,n){return t<=n||t!=t};case"string":return function(t,n){return t<=n};default:return Z}}(e[0]);if(e.sort(function(t,n){return r(t.fx,n.fx)?r(n.fx,t.fx)?t.idx-n.idx:-1:1}),Array.isArray(n)){for(var o=0;o<e.length;o+=1)e[o]=e[o].x;return e}var i=n.constructor,u=tt(i);for(o=0;o<e.length;o+=1)u=Q(u,ut(i,e[o].x));return u}function ft(t,n,e){return k.methods.traverse(e)(t,n)}function lt(t,n){return V.methods.extend(n)(t)}return{TypeClass:p,Setoid:E,Ord:T,Semigroupoid:b,Category:A,Semigroup:M,Monoid:R,Group:S,Filterable:N,Functor:O,Bifunctor:I,Profunctor:F,Apply:L,Applicative:x,Chain:C,ChainRec:P,Monad:w,Alt:U,Plus:B,Alternative:j,Foldable:D,Traversable:k,Extend:V,Comonad:G,Contravariant:H,equals:K,lt:J,lte:Z,gt:function(t,n){return J(n,t)},gte:function(t,n){return Z(n,t)},min:function(t,n){return Z(t,n)?t:n},max:function(t,n){return Z(t,n)?n:t},compose:function(t,n){return b.methods.compose(n)(t)},id:function(t){return A.methods.id(t)()},concat:Q,empty:tt,invert:function(t){return S.methods.invert(t)()},filter:nt,reject:function(t,n){return nt(function(n){return!t(n)},n)},map:et,flip:function(t,n){return O.methods.map(t)(function(t){return function(n){return n(t)}}(n))},bimap:rt,mapLeft:function(t,n){return rt(t,a,n)},promap:function(t,n,e){return F.methods.promap(e)(t,n)},ap:ot,lift2:it,lift3:function(t,n,e,r){return ot(ot(et(t,n),e),r)},apFirst:function(t,n){return it(o,t,n)},apSecond:function(t,n){return it(o(a),t,n)},of:ut,append:function(t,n){return Q(n,ut(n.constructor,t))},prepend:function(t,n){return Q(ut(n.constructor,t),n)},chain:at,join:function(t){return at(a,t)},chainRec:function(t,n,e){return P.methods.chainRec(t)(n,e)},alt:function(t,n){return U.methods.alt(t)(n)},zero:function(t){return B.methods.zero(t)()},reduce:st,size:function(t){return Array.isArray(t)?t.length:st(function(t,n){return t+1},0,t)},elem:function(t,n){return st(function(n,e){return n||K(t,e)},!1,n)},foldMap:function(t,n,e){return st(function(t,e){return Q(t,n(e))},tt(t),e)},reverse:function(t){if(Array.isArray(t))return t.slice().reverse();var n=t.constructor;return st(function(t,e){return Q(ut(n,e),t)},tt(n),t)},sort:function(t){return ct(a,t)},sortBy:ct,takeWhile:function(t,n){var e=!0;return nt(function(n){return e=e&&t(n)},n)},dropWhile:function(t,n){var e=!1;return nt(function(n){return e=e||!t(n)},n)},traverse:ft,sequence:function(t,n){return ft(t,a,n)},extend:lt,duplicate:function(t){return lt(a,t)},extract:function(t){return G.methods.extract(t)()},contramap:function(t,n){return H.methods.contramap(n)(t)}}})},function(t,n,e){var r,o,i;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u():null!=e(1)?(o=[],void 0===(i="function"==typeof(r=u)?r.apply(n,o):r)||(t.exports=i)):self.sanctuaryTypeIdentifiers=u()}(function(){"use strict";var t="@@type";return function(n){return null!=n&&null!=n.constructor&&n.constructor.prototype!==n&&"string"==typeof n.constructor[t]?n.constructor[t]:Object.prototype.toString.call(n).slice("[object ".length,-"]".length)}})},function(t,n,e){var r,o,i;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u(e(3),e(21)):null!=e(1)?(o=[e(3),e(21)],void 0===(i="function"==typeof(r=u)?r.apply(n,o):r)||(t.exports=i)):self.sanctuaryPair=u(self.sanctuaryShow,self.sanctuaryTypeClasses)}(function(n,r){"use strict";if("undefined"!=typeof __doctest){var o=__doctest.require("sanctuary-def"),i=__doctest.require("sanctuary-type-identifiers");!function(){var t=__doctest.require("sanctuary"),n=o.BinaryType("sanctuary-pair/Pair")("")(function(t){return i(t)===s["@@type"]})(function(t){return[t.fst]})(function(t){return[t.snd]}),e=r.concat(t.env,[o.TypeClass,n(o.Unknown)(o.Unknown)]);t.create({checkTypes:!0,env:e})}()}var u={constructor:s,"@@show":c,"fantasy-land/compose":function(t){return s(this.fst)(t.snd)},"fantasy-land/map":function(t){return s(this.fst)(t(this.snd))},"fantasy-land/bimap":function(t,n){return s(t(this.fst))(n(this.snd))},"fantasy-land/reduce":function(t,n){return t(n,this.snd)},"fantasy-land/traverse":function(t,n){return r.map(s(this.fst),n(this.snd))},"fantasy-land/extend":function(t){return s(this.fst)(t(this))},"fantasy-land/extract":function(){return this.snd}},a="object"==typeof t&&"object"==typeof t.exports?e(6):{};function s(t){return function(n){var e=Object.create(u);return r.Setoid.test(t)&&r.Setoid.test(n)&&(e["fantasy-land/equals"]=f,r.Ord.test(t)&&r.Ord.test(n)&&(e["fantasy-land/lte"]=l)),r.Semigroup.test(t)&&(r.Semigroup.test(n)&&(e["fantasy-land/concat"]=p),e["fantasy-land/ap"]=h,e["fantasy-land/chain"]=d),e.fst=t,e.snd=n,e}}function c(){return"Pair ("+n(this.fst)+") ("+n(this.snd)+")"}function f(t){return r.equals(this.fst,t.fst)&&r.equals(this.snd,t.snd)}function l(t){return r.equals(this.fst,t.fst)?r.lte(this.snd,t.snd):r.lte(this.fst,t.fst)}function p(t){return s(r.concat(this.fst,t.fst))(r.concat(this.snd,t.snd))}function h(t){return s(r.concat(t.fst,this.fst))(t.snd(this.snd))}function d(t){var n=t(this.snd);return s(r.concat(this.fst,n.fst))(n.snd)}return u[null!=a.inspect&&"symbol"==typeof a.inspect.custom?a.inspect.custom:"inspect"]=c,"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(u[Symbol.iterator]=function(){return[this.fst,this.snd][Symbol.iterator]()}),s.fst=function(t){return t.fst},s.snd=function(t){return t.snd},s.swap=function(t){return s(t.snd)(t.fst)},s["@@type"]="sanctuary-pair/Pair@1",s})},function(t,n,e){var r,o,i;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u(e(22)):null!=e(1)?(o=[e(22)],void 0===(i="function"==typeof(r=u)?r.apply(n,o):r)||(t.exports=i)):self.sanctuaryTypeClasses=u(self.sanctuaryTypeIdentifiers)}(function(t){"use strict";if("undefined"!=typeof __doctest){__doctest.require("./test/Identity");var n=__doctest.require("./test/List"),e=__doctest.require("./test/Maybe");__doctest.require("./test/Sum"),__doctest.require("./test/Tuple"),n.Nil,n.Cons,e.Nothing,e.Just}function r(t){return function(n){return t.concat(n)}}function o(t){return function(n){return t}}function i(t,n){Object.keys(t).forEach(n,t)}function u(t,n){return Object.prototype.hasOwnProperty.call(n,t)}function a(t){return t}function s(t){return function(n){return[t,n]}}function c(n,e){return typeof n==typeof e&&t(n)===t(e)}function f(t){return{value:t,done:!1}}function l(t){return{value:t,done:!0}}function p(t,n,e,r){if(!(this instanceof p))return new p(t,n,e,r);this.name=t,this.url=n,this.test=function(t){return e.every(function(n){return n.test(t)})&&r(t)}}p["@@type"]="sanctuary-type-classes/TypeClass";var h="Constructor",d="Value";function y(t,n,e){for(var r=e,o=0;o<n.length;o+=1){var i=n[o];if(null==r||!t&&!u(i,r))return null;r=r[i]}return"function"==typeof r?r:null}function m(t,n){return y(!0,t,n)}function _(t){return y(!1,t,Y)}var g=u("name",function(){})?function(t){return t.name}:function(t){var n=/function (\w*)/.exec(t);return null==n?"":n[1]};function v(n,e,r){function o(n){var e="fantasy-land/"+n;return r[n]===h?function(t){var n=m([e],t);return null==n&&"function"==typeof t?_([g(t),e]):n}:function(n){var r=null;return null!=n&&null!=n.constructor&&n.constructor.prototype===n||(r=m([e],n)),null==r&&(r=_([t(n),"prototype",e])),r&&r.bind(n)}}var i=Object.keys(r),u=p("sanctuary-type-classes/"+n,"https://github.com/sanctuary-js/sanctuary-type-classes/tree/v9.0.0#"+n,e,function(t){return i.every(function(n){var e=r[n]===h?t.constructor:t;return null!=o(n)(e)})});return u.methods=i.reduce(function(t,n){return t[n]=o(n),t},{}),u}var E=v("Setoid",[],{equals:d}),T=v("Ord",[E],{lte:d}),b=v("Semigroupoid",[],{compose:d}),A=v("Category",[b],{id:h}),M=v("Semigroup",[],{concat:d}),R=v("Monoid",[M],{empty:h}),S=v("Group",[R],{invert:d}),N=v("Filterable",[],{filter:d}),O=v("Functor",[],{map:d}),I=v("Bifunctor",[O],{bimap:d}),F=v("Profunctor",[O],{promap:d}),L=v("Apply",[O],{ap:d}),x=v("Applicative",[L],{of:h}),C=v("Chain",[L],{chain:d}),P=v("ChainRec",[C],{chainRec:h}),w=v("Monad",[x,C],{}),U=v("Alt",[O],{alt:d}),B=v("Plus",[U],{zero:h}),j=v("Alternative",[x,B],{}),D=v("Foldable",[],{reduce:d}),k=v("Traversable",[O,D],{traverse:d}),V=v("Extend",[O],{extend:d}),G=v("Comonad",[V],{extract:d}),H=v("Contravariant",[],{contramap:d});function q(t){return[t]}function X(t){if(t.length!==this.length)return!1;for(var n=0;n<this.length;n+=1)if(!K(this[n],t[n]))return!1;return!0}function W(t){for(var n=0;;n+=1){if(n===this.length)return!0;if(n===t.length)return!1;if(!K(this[n],t[n]))return Z(this[n],t[n])}}function z(t){return this.concat(t)}function $(t){var n={};function e(t){n[t]=this[t]}return i(this,e),i(t,e),n}var Y={Null:{prototype:{"fantasy-land/equals":function(t){return!0},"fantasy-land/lte":function(t){return!0}}},Undefined:{prototype:{"fantasy-land/equals":function(t){return!0},"fantasy-land/lte":function(t){return!0}}},Boolean:{prototype:{"fantasy-land/equals":function(t){return"object"==typeof this?K(this.valueOf(),t.valueOf()):this===t},"fantasy-land/lte":function(t){return"object"==typeof this?Z(this.valueOf(),t.valueOf()):!1===this||!0===t}}},Number:{prototype:{"fantasy-land/equals":function(t){return"object"==typeof this?K(this.valueOf(),t.valueOf()):isNaN(this)&&isNaN(t)||this===t},"fantasy-land/lte":function(t){return"object"==typeof this?Z(this.valueOf(),t.valueOf()):isNaN(this)||this<=t}}},Date:{prototype:{"fantasy-land/equals":function(t){return K(this.valueOf(),t.valueOf())},"fantasy-land/lte":function(t){return Z(this.valueOf(),t.valueOf())}}},RegExp:{prototype:{"fantasy-land/equals":function(t){return t.source===this.source&&t.global===this.global&&t.ignoreCase===this.ignoreCase&&t.multiline===this.multiline&&t.sticky===this.sticky&&t.unicode===this.unicode}}},String:{"fantasy-land/empty":function(){return""},prototype:{"fantasy-land/equals":function(t){return"object"==typeof this?K(this.valueOf(),t.valueOf()):this===t},"fantasy-land/lte":function(t){return"object"==typeof this?Z(this.valueOf(),t.valueOf()):this<=t},"fantasy-land/concat":function(t){return this+t}}},Array:{"fantasy-land/empty":function(){return[]},"fantasy-land/of":q,"fantasy-land/chainRec":function(t,n){for(var e=[],r={},o={head:n,tail:r};o!==r;){for(var i=r,u=t(f,l,o.head),a=0;a<u.length;a+=1){var s=u[a];s.done?e.push(s.value):i={head:s.value,tail:i}}for(o=o.tail;i!==r;)o={head:i.head,tail:o},i=i.tail}return e},"fantasy-land/zero":function(){return[]},prototype:{"fantasy-land/equals":X,"fantasy-land/lte":W,"fantasy-land/concat":z,"fantasy-land/filter":function(t){return this.filter(function(n){return t(n)})},"fantasy-land/map":function(t){return this.map(function(n){return t(n)})},"fantasy-land/ap":function(t){for(var n=[],e=0;e<t.length;e+=1)for(var r=0;r<this.length;r+=1)n.push(t[e](this[r]));return n},"fantasy-land/chain":function(t){for(var n=[],e=0;e<this.length;e+=1)for(var r=0,o=t(this[e]);r<o.length;r+=1)n.push(o[r]);return n},"fantasy-land/alt":z,"fantasy-land/reduce":function(t,n){for(var e=n,r=0;r<this.length;r+=1)e=t(e,this[r]);return e},"fantasy-land/traverse":function(t,n){var e=this;function o(i,u){switch(u){case 0:return ut(t,[]);case 2:return it(s,n(e[i]),n(e[i+1]));default:var a=2*Math.floor(u/4);return it(r,o(i,a),o(i+a,u-a))}}return this.length%2==1?it(r,et(q,n(this[0])),o(1,this.length-1)):o(0,this.length)},"fantasy-land/extend":function(t){return this.map(function(n,e,r){return t(r.slice(e))})}}},Arguments:{prototype:{"fantasy-land/equals":function(t){return X.call(this,t)},"fantasy-land/lte":function(t){return W.call(this,t)}}},Error:{prototype:{"fantasy-land/equals":function(t){return K(this.name,t.name)&&K(this.message,t.message)}}},Object:{"fantasy-land/empty":function(){return{}},"fantasy-land/zero":function(){return{}},prototype:{"fantasy-land/equals":function(t){var n=this,e=Object.keys(this).sort();return K(e,Object.keys(t).sort())&&e.every(function(e){return K(n[e],t[e])})},"fantasy-land/lte":function(t){for(var n=Object.keys(this).sort(),e=Object.keys(t).sort();;){if(0===n.length)return!0;if(0===e.length)return!1;var r=n.shift(),o=e.shift();if(r<o)return!0;if(r>o)return!1;if(!K(this[r],t[r]))return Z(this[r],t[r])}},"fantasy-land/concat":$,"fantasy-land/filter":function(t){var n={};return i(this,function(e){t(this[e])&&(n[e]=this[e])}),n},"fantasy-land/map":function(t){var n={};return i(this,function(e){n[e]=t(this[e])}),n},"fantasy-land/ap":function(t){var n={};return i(this,function(e){u(e,t)&&(n[e]=t[e](this[e]))}),n},"fantasy-land/alt":$,"fantasy-land/reduce":function(t,n){var e=this;return Object.keys(this).sort().reduce(function(n,r){return t(n,e[r])},n)},"fantasy-land/traverse":function(t,n){var e=this;return Object.keys(this).reduce(function(t,r){return it(function(t){return function(n){var e={};return e[r]=n,$.call(t,e)}},t,n(e[r]))},ut(t,{}))}}},Function:{"fantasy-land/id":function(){return a},"fantasy-land/of":function(t){return function(n){return t}},"fantasy-land/chainRec":function(t,n){return function(e){for(var r=f(n);!r.done;)r=t(f,l,r.value)(e);return r.value}},prototype:{"fantasy-land/equals":function(t){return t===this},"fantasy-land/compose":function(t){var n=this;return function(e){return t(n(e))}},"fantasy-land/map":function(t){var n=this;return function(e){return t(n(e))}},"fantasy-land/promap":function(t,n){var e=this;return function(r){return n(e(t(r)))}},"fantasy-land/ap":function(t){var n=this;return function(e){return t(e)(n(e))}},"fantasy-land/chain":function(t){var n=this;return function(e){return t(n(e))(e)}},"fantasy-land/extend":function(t){var n=this;return function(e){return t(function(t){return n(Q(e,t))})}},"fantasy-land/contramap":function(t){var n=this;return function(e){return n(t(e))}}}}},K=function(){var t=[];return function(n,e){if(!c(n,e))return!1;if(t.some(function(t){return t[0]===n&&t[1]===e}))return!0;t.push([n,e]);try{return E.test(n)&&E.test(e)&&E.methods.equals(n)(e)}finally{t.pop()}}}();function J(t,n){return c(t,n)&&!Z(n,t)}var Z=function(){var t=[];return function(n,e){if(!c(n,e))return!1;if(t.some(function(t){return t[0]===n&&t[1]===e}))return K(n,e);t.push([n,e]);try{return T.test(n)&&T.test(e)&&T.methods.lte(n)(e)}finally{t.pop()}}}();function Q(t,n){return M.methods.concat(t)(n)}function tt(t){return R.methods.empty(t)()}function nt(t,n){return N.methods.filter(n)(t)}function et(t,n){return O.methods.map(n)(t)}function rt(t,n,e){return I.methods.bimap(e)(t,n)}function ot(t,n){return L.methods.ap(n)(t)}function it(t,n,e){return ot(et(t,n),e)}function ut(t,n){return x.methods.of(t)(n)}function at(t,n){return C.methods.chain(n)(t)}function st(t,n,e){return D.methods.reduce(e)(t,n)}function ct(t,n){var e=st(function(n,e){return n.push({idx:n.length,x:e,fx:t(e)}),n},[],n),r=function(t){switch(typeof(t&&t.fx)){case"number":return function(t,n){return t<=n||t!=t};case"string":return function(t,n){return t<=n};default:return Z}}(e[0]);if(e.sort(function(t,n){return r(t.fx,n.fx)?r(n.fx,t.fx)?t.idx-n.idx:-1:1}),Array.isArray(n)){for(var o=0;o<e.length;o+=1)e[o]=e[o].x;return e}var i=n.constructor,u=tt(i);for(o=0;o<e.length;o+=1)u=Q(u,ut(i,e[o].x));return u}function ft(t,n,e){return k.methods.traverse(e)(t,n)}function lt(t,n){return V.methods.extend(n)(t)}return{TypeClass:p,Setoid:E,Ord:T,Semigroupoid:b,Category:A,Semigroup:M,Monoid:R,Group:S,Filterable:N,Functor:O,Bifunctor:I,Profunctor:F,Apply:L,Applicative:x,Chain:C,ChainRec:P,Monad:w,Alt:U,Plus:B,Alternative:j,Foldable:D,Traversable:k,Extend:V,Comonad:G,Contravariant:H,equals:K,lt:J,lte:Z,gt:function(t,n){return J(n,t)},gte:function(t,n){return Z(n,t)},min:function(t,n){return Z(t,n)?t:n},max:function(t,n){return Z(t,n)?n:t},compose:function(t,n){return b.methods.compose(n)(t)},id:function(t){return A.methods.id(t)()},concat:Q,empty:tt,invert:function(t){return S.methods.invert(t)()},filter:nt,reject:function(t,n){return nt(function(n){return!t(n)},n)},map:et,flip:function(t,n){return O.methods.map(t)(function(t){return function(n){return n(t)}}(n))},bimap:rt,mapLeft:function(t,n){return rt(t,a,n)},promap:function(t,n,e){return F.methods.promap(e)(t,n)},ap:ot,lift2:it,lift3:function(t,n,e,r){return ot(ot(et(t,n),e),r)},apFirst:function(t,n){return it(o,t,n)},apSecond:function(t,n){return it(o(a),t,n)},of:ut,append:function(t,n){return Q(n,ut(n.constructor,t))},prepend:function(t,n){return Q(ut(n.constructor,t),n)},chain:at,join:function(t){return at(a,t)},chainRec:function(t,n,e){return P.methods.chainRec(t)(n,e)},alt:function(t,n){return U.methods.alt(t)(n)},zero:function(t){return B.methods.zero(t)()},reduce:st,size:function(t){return Array.isArray(t)?t.length:st(function(t,n){return t+1},0,t)},elem:function(t,n){return st(function(n,e){return n||K(t,e)},!1,n)},foldMap:function(t,n,e){return st(function(t,e){return Q(t,n(e))},tt(t),e)},reverse:function(t){if(Array.isArray(t))return t.slice().reverse();var n=t.constructor;return st(function(t,e){return Q(ut(n,e),t)},tt(n),t)},sort:function(t){return ct(a,t)},sortBy:ct,takeWhile:function(t,n){var e=!0;return nt(function(n){return e=e&&t(n)},n)},dropWhile:function(t,n){var e=!1;return nt(function(n){return e=e||!t(n)},n)},traverse:ft,sequence:function(t,n){return ft(t,a,n)},extend:lt,duplicate:function(t){return lt(a,t)},extract:function(t){return G.methods.extract(t)()},contramap:function(t,n){return H.methods.contramap(n)(t)}}})},function(t,n,e){var r,o,i;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u():null!=e(1)?(o=[],void 0===(i="function"==typeof(r=u)?r.apply(n,o):r)||(t.exports=i)):self.sanctuaryTypeIdentifiers=u()}(function(){"use strict";var t="@@type";return function(n){return null!=n&&null!=n.constructor&&n.constructor.prototype!==n&&"string"==typeof n.constructor[t]?n.constructor[t]:Object.prototype.toString.call(n).slice("[object ".length,-"]".length)}})},function(t,n,e){var r,o,i;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u(e(24)):null!=e(1)?(o=[e(24)],void 0===(i="function"==typeof(r=u)?r.apply(n,o):r)||(t.exports=i)):self.sanctuaryTypeClasses=u(self.sanctuaryTypeIdentifiers)}(function(t){"use strict";if("undefined"!=typeof __doctest){__doctest.require("./test/Identity");var n=__doctest.require("./test/List"),e=__doctest.require("./test/Maybe");__doctest.require("./test/Sum"),__doctest.require("./test/Tuple"),n.Nil,n.Cons,e.Nothing,e.Just}function r(t){return function(n){return t.concat(n)}}function o(t){return function(n){return t}}function i(t,n){Object.keys(t).forEach(n,t)}function u(t,n){return Object.prototype.hasOwnProperty.call(n,t)}function a(t){return t}function s(t){return function(n){return[t,n]}}function c(n,e){return typeof n==typeof e&&t(n)===t(e)}function f(t){return{value:t,done:!1}}function l(t){return{value:t,done:!0}}function p(t,n,e,r){if(!(this instanceof p))return new p(t,n,e,r);this.name=t,this.url=n,this.test=function(t){return e.every(function(n){return n.test(t)})&&r(t)}}p["@@type"]="sanctuary-type-classes/TypeClass";var h="Constructor",d="Value";function y(t,n,e){for(var r=e,o=0;o<n.length;o+=1){var i=n[o];if(null==r||!t&&!u(i,r))return null;r=r[i]}return"function"==typeof r?r:null}function m(t,n){return y(!0,t,n)}function _(t){return y(!1,t,Y)}var g=u("name",function(){})?function(t){return t.name}:function(t){var n=/function (\w*)/.exec(t);return null==n?"":n[1]};function v(n,e,r){function o(n){var e="fantasy-land/"+n;return r[n]===h?function(t){var n=m([e],t);return null==n&&"function"==typeof t?_([g(t),e]):n}:function(n){var r=null;return null!=n&&null!=n.constructor&&n.constructor.prototype===n||(r=m([e],n)),null==r&&(r=_([t(n),"prototype",e])),r&&r.bind(n)}}var i=Object.keys(r),u=p("sanctuary-type-classes/"+n,"https://github.com/sanctuary-js/sanctuary-type-classes/tree/v9.0.0#"+n,e,function(t){return i.every(function(n){var e=r[n]===h?t.constructor:t;return null!=o(n)(e)})});return u.methods=i.reduce(function(t,n){return t[n]=o(n),t},{}),u}var E=v("Setoid",[],{equals:d}),T=v("Ord",[E],{lte:d}),b=v("Semigroupoid",[],{compose:d}),A=v("Category",[b],{id:h}),M=v("Semigroup",[],{concat:d}),R=v("Monoid",[M],{empty:h}),S=v("Group",[R],{invert:d}),N=v("Filterable",[],{filter:d}),O=v("Functor",[],{map:d}),I=v("Bifunctor",[O],{bimap:d}),F=v("Profunctor",[O],{promap:d}),L=v("Apply",[O],{ap:d}),x=v("Applicative",[L],{of:h}),C=v("Chain",[L],{chain:d}),P=v("ChainRec",[C],{chainRec:h}),w=v("Monad",[x,C],{}),U=v("Alt",[O],{alt:d}),B=v("Plus",[U],{zero:h}),j=v("Alternative",[x,B],{}),D=v("Foldable",[],{reduce:d}),k=v("Traversable",[O,D],{traverse:d}),V=v("Extend",[O],{extend:d}),G=v("Comonad",[V],{extract:d}),H=v("Contravariant",[],{contramap:d});function q(t){return[t]}function X(t){if(t.length!==this.length)return!1;for(var n=0;n<this.length;n+=1)if(!K(this[n],t[n]))return!1;return!0}function W(t){for(var n=0;;n+=1){if(n===this.length)return!0;if(n===t.length)return!1;if(!K(this[n],t[n]))return Z(this[n],t[n])}}function z(t){return this.concat(t)}function $(t){var n={};function e(t){n[t]=this[t]}return i(this,e),i(t,e),n}var Y={Null:{prototype:{"fantasy-land/equals":function(t){return!0},"fantasy-land/lte":function(t){return!0}}},Undefined:{prototype:{"fantasy-land/equals":function(t){return!0},"fantasy-land/lte":function(t){return!0}}},Boolean:{prototype:{"fantasy-land/equals":function(t){return"object"==typeof this?K(this.valueOf(),t.valueOf()):this===t},"fantasy-land/lte":function(t){return"object"==typeof this?Z(this.valueOf(),t.valueOf()):!1===this||!0===t}}},Number:{prototype:{"fantasy-land/equals":function(t){return"object"==typeof this?K(this.valueOf(),t.valueOf()):isNaN(this)&&isNaN(t)||this===t},"fantasy-land/lte":function(t){return"object"==typeof this?Z(this.valueOf(),t.valueOf()):isNaN(this)||this<=t}}},Date:{prototype:{"fantasy-land/equals":function(t){return K(this.valueOf(),t.valueOf())},"fantasy-land/lte":function(t){return Z(this.valueOf(),t.valueOf())}}},RegExp:{prototype:{"fantasy-land/equals":function(t){return t.source===this.source&&t.global===this.global&&t.ignoreCase===this.ignoreCase&&t.multiline===this.multiline&&t.sticky===this.sticky&&t.unicode===this.unicode}}},String:{"fantasy-land/empty":function(){return""},prototype:{"fantasy-land/equals":function(t){return"object"==typeof this?K(this.valueOf(),t.valueOf()):this===t},"fantasy-land/lte":function(t){return"object"==typeof this?Z(this.valueOf(),t.valueOf()):this<=t},"fantasy-land/concat":function(t){return this+t}}},Array:{"fantasy-land/empty":function(){return[]},"fantasy-land/of":q,"fantasy-land/chainRec":function(t,n){for(var e=[],r={},o={head:n,tail:r};o!==r;){for(var i=r,u=t(f,l,o.head),a=0;a<u.length;a+=1){var s=u[a];s.done?e.push(s.value):i={head:s.value,tail:i}}for(o=o.tail;i!==r;)o={head:i.head,tail:o},i=i.tail}return e},"fantasy-land/zero":function(){return[]},prototype:{"fantasy-land/equals":X,"fantasy-land/lte":W,"fantasy-land/concat":z,"fantasy-land/filter":function(t){return this.filter(function(n){return t(n)})},"fantasy-land/map":function(t){return this.map(function(n){return t(n)})},"fantasy-land/ap":function(t){for(var n=[],e=0;e<t.length;e+=1)for(var r=0;r<this.length;r+=1)n.push(t[e](this[r]));return n},"fantasy-land/chain":function(t){for(var n=[],e=0;e<this.length;e+=1)for(var r=0,o=t(this[e]);r<o.length;r+=1)n.push(o[r]);return n},"fantasy-land/alt":z,"fantasy-land/reduce":function(t,n){for(var e=n,r=0;r<this.length;r+=1)e=t(e,this[r]);return e},"fantasy-land/traverse":function(t,n){var e=this;function o(i,u){switch(u){case 0:return ut(t,[]);case 2:return it(s,n(e[i]),n(e[i+1]));default:var a=2*Math.floor(u/4);return it(r,o(i,a),o(i+a,u-a))}}return this.length%2==1?it(r,et(q,n(this[0])),o(1,this.length-1)):o(0,this.length)},"fantasy-land/extend":function(t){return this.map(function(n,e,r){return t(r.slice(e))})}}},Arguments:{prototype:{"fantasy-land/equals":function(t){return X.call(this,t)},"fantasy-land/lte":function(t){return W.call(this,t)}}},Error:{prototype:{"fantasy-land/equals":function(t){return K(this.name,t.name)&&K(this.message,t.message)}}},Object:{"fantasy-land/empty":function(){return{}},"fantasy-land/zero":function(){return{}},prototype:{"fantasy-land/equals":function(t){var n=this,e=Object.keys(this).sort();return K(e,Object.keys(t).sort())&&e.every(function(e){return K(n[e],t[e])})},"fantasy-land/lte":function(t){for(var n=Object.keys(this).sort(),e=Object.keys(t).sort();;){if(0===n.length)return!0;if(0===e.length)return!1;var r=n.shift(),o=e.shift();if(r<o)return!0;if(r>o)return!1;if(!K(this[r],t[r]))return Z(this[r],t[r])}},"fantasy-land/concat":$,"fantasy-land/filter":function(t){var n={};return i(this,function(e){t(this[e])&&(n[e]=this[e])}),n},"fantasy-land/map":function(t){var n={};return i(this,function(e){n[e]=t(this[e])}),n},"fantasy-land/ap":function(t){var n={};return i(this,function(e){u(e,t)&&(n[e]=t[e](this[e]))}),n},"fantasy-land/alt":$,"fantasy-land/reduce":function(t,n){var e=this;return Object.keys(this).sort().reduce(function(n,r){return t(n,e[r])},n)},"fantasy-land/traverse":function(t,n){var e=this;return Object.keys(this).reduce(function(t,r){return it(function(t){return function(n){var e={};return e[r]=n,$.call(t,e)}},t,n(e[r]))},ut(t,{}))}}},Function:{"fantasy-land/id":function(){return a},"fantasy-land/of":function(t){return function(n){return t}},"fantasy-land/chainRec":function(t,n){return function(e){for(var r=f(n);!r.done;)r=t(f,l,r.value)(e);return r.value}},prototype:{"fantasy-land/equals":function(t){return t===this},"fantasy-land/compose":function(t){var n=this;return function(e){return t(n(e))}},"fantasy-land/map":function(t){var n=this;return function(e){return t(n(e))}},"fantasy-land/promap":function(t,n){var e=this;return function(r){return n(e(t(r)))}},"fantasy-land/ap":function(t){var n=this;return function(e){return t(e)(n(e))}},"fantasy-land/chain":function(t){var n=this;return function(e){return t(n(e))(e)}},"fantasy-land/extend":function(t){var n=this;return function(e){return t(function(t){return n(Q(e,t))})}},"fantasy-land/contramap":function(t){var n=this;return function(e){return n(t(e))}}}}},K=function(){var t=[];return function(n,e){if(!c(n,e))return!1;if(t.some(function(t){return t[0]===n&&t[1]===e}))return!0;t.push([n,e]);try{return E.test(n)&&E.test(e)&&E.methods.equals(n)(e)}finally{t.pop()}}}();function J(t,n){return c(t,n)&&!Z(n,t)}var Z=function(){var t=[];return function(n,e){if(!c(n,e))return!1;if(t.some(function(t){return t[0]===n&&t[1]===e}))return K(n,e);t.push([n,e]);try{return T.test(n)&&T.test(e)&&T.methods.lte(n)(e)}finally{t.pop()}}}();function Q(t,n){return M.methods.concat(t)(n)}function tt(t){return R.methods.empty(t)()}function nt(t,n){return N.methods.filter(n)(t)}function et(t,n){return O.methods.map(n)(t)}function rt(t,n,e){return I.methods.bimap(e)(t,n)}function ot(t,n){return L.methods.ap(n)(t)}function it(t,n,e){return ot(et(t,n),e)}function ut(t,n){return x.methods.of(t)(n)}function at(t,n){return C.methods.chain(n)(t)}function st(t,n,e){return D.methods.reduce(e)(t,n)}function ct(t,n){var e=st(function(n,e){return n.push({idx:n.length,x:e,fx:t(e)}),n},[],n),r=function(t){switch(typeof(t&&t.fx)){case"number":return function(t,n){return t<=n||t!=t};case"string":return function(t,n){return t<=n};default:return Z}}(e[0]);if(e.sort(function(t,n){return r(t.fx,n.fx)?r(n.fx,t.fx)?t.idx-n.idx:-1:1}),Array.isArray(n)){for(var o=0;o<e.length;o+=1)e[o]=e[o].x;return e}var i=n.constructor,u=tt(i);for(o=0;o<e.length;o+=1)u=Q(u,ut(i,e[o].x));return u}function ft(t,n,e){return k.methods.traverse(e)(t,n)}function lt(t,n){return V.methods.extend(n)(t)}return{TypeClass:p,Setoid:E,Ord:T,Semigroupoid:b,Category:A,Semigroup:M,Monoid:R,Group:S,Filterable:N,Functor:O,Bifunctor:I,Profunctor:F,Apply:L,Applicative:x,Chain:C,ChainRec:P,Monad:w,Alt:U,Plus:B,Alternative:j,Foldable:D,Traversable:k,Extend:V,Comonad:G,Contravariant:H,equals:K,lt:J,lte:Z,gt:function(t,n){return J(n,t)},gte:function(t,n){return Z(n,t)},min:function(t,n){return Z(t,n)?t:n},max:function(t,n){return Z(t,n)?n:t},compose:function(t,n){return b.methods.compose(n)(t)},id:function(t){return A.methods.id(t)()},concat:Q,empty:tt,invert:function(t){return S.methods.invert(t)()},filter:nt,reject:function(t,n){return nt(function(n){return!t(n)},n)},map:et,flip:function(t,n){return O.methods.map(t)(function(t){return function(n){return n(t)}}(n))},bimap:rt,mapLeft:function(t,n){return rt(t,a,n)},promap:function(t,n,e){return F.methods.promap(e)(t,n)},ap:ot,lift2:it,lift3:function(t,n,e,r){return ot(ot(et(t,n),e),r)},apFirst:function(t,n){return it(o,t,n)},apSecond:function(t,n){return it(o(a),t,n)},of:ut,append:function(t,n){return Q(n,ut(n.constructor,t))},prepend:function(t,n){return Q(ut(n.constructor,t),n)},chain:at,join:function(t){return at(a,t)},chainRec:function(t,n,e){return P.methods.chainRec(t)(n,e)},alt:function(t,n){return U.methods.alt(t)(n)},zero:function(t){return B.methods.zero(t)()},reduce:st,size:function(t){return Array.isArray(t)?t.length:st(function(t,n){return t+1},0,t)},elem:function(t,n){return st(function(n,e){return n||K(t,e)},!1,n)},foldMap:function(t,n,e){return st(function(t,e){return Q(t,n(e))},tt(t),e)},reverse:function(t){if(Array.isArray(t))return t.slice().reverse();var n=t.constructor;return st(function(t,e){return Q(ut(n,e),t)},tt(n),t)},sort:function(t){return ct(a,t)},sortBy:ct,takeWhile:function(t,n){var e=!0;return nt(function(n){return e=e&&t(n)},n)},dropWhile:function(t,n){var e=!1;return nt(function(n){return e=e||!t(n)},n)},traverse:ft,sequence:function(t,n){return ft(t,a,n)},extend:lt,duplicate:function(t){return lt(a,t)},extract:function(t){return G.methods.extract(t)()},contramap:function(t,n){return H.methods.contramap(n)(t)}}})},function(t,n,e){var r,o,i;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u():null!=e(1)?(o=[],void 0===(i="function"==typeof(r=u)?r.apply(n,o):r)||(t.exports=i)):self.sanctuaryTypeIdentifiers=u()}(function(){"use strict";var t="@@type";return function(n){return null!=n&&null!=n.constructor&&n.constructor.prototype!==n&&"string"==typeof n.constructor[t]?n.constructor[t]:Object.prototype.toString.call(n).slice("[object ".length,-"]".length)}})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.MESSAGE="message",function(t){t[t.INIT=0]="INIT",t[t.READY=1]="READY"}(n.WorkerLoaderCommand||(n.WorkerLoaderCommand={})),function(t){t[t.SCENE_PING=0]="SCENE_PING",t[t.SCENE_PONG=1]="SCENE_PONG",t[t.TICK=2]="TICK",t[t.RENDER=3]="RENDER"}(n.WorkerCommand||(n.WorkerCommand={}))},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(27),o=e(7),i=e(33),u=e(25),a=e(37),s=e(38),c=e(2),f=i.getCompileFlags(),l=(f.buildMode,f.buildVersion),p=f.isProduction;console.log("%c Purescript Hello World "+l+" (productionMode: "+p+")",'color: #4286f4; font-size: large; font-family: "Comic Sans MS", cursive, sans-serif');var h=a.createRenderer();c.parallel(1/0)([i.loadWorker(new r),o.gltf_load({renderer:h,path:"static/hello-world/HelloWorld.glb"})]).fork(console.error,function(t){var n=t[0],e=t[1],r=function(t){switch(t.data.cmd){case u.WorkerCommand.SCENE_PONG:n.removeEventListener(u.MESSAGE,r),d([n,e])}};n.addEventListener(u.MESSAGE,r),n.postMessage({cmd:u.WorkerCommand.SCENE_PING,scene:s.prepScene(e),animations:e.getData().animations})});var d=function(t){var n=t[0],e=t[1],r=!0;n.addEventListener(u.MESSAGE,function(t){switch(t.data.cmd){case u.WorkerCommand.RENDER:e.renderScene(t.data.scene),r=!0}});var o=function(t){r&&(r=!1,n.postMessage({cmd:u.WorkerCommand.TICK,frameTs:t})),requestAnimationFrame(o)};requestAnimationFrame(o)}},function(t,n,e){t.exports=function(){return new Worker(e.p+"f44f3665effb2b8298e2.worker.js")}},function(t,n,e){"use strict";function r(t){this._head=0,this._tail=0,this._capacityMask=3,this._list=new Array(4),Array.isArray(t)&&this._fromArray(t)}r.prototype.peekAt=function(t){var n=t;if(n===(0|n)){var e=this.size();if(!(n>=e||n<-e))return n<0&&(n+=e),n=this._head+n&this._capacityMask,this._list[n]}},r.prototype.get=function(t){return this.peekAt(t)},r.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},r.prototype.peekFront=function(){return this.peek()},r.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(r.prototype,"length",{get:function(){return this.size()}}),r.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},r.prototype.unshift=function(t){if(void 0===t)return this.size();var n=this._list.length;return this._head=this._head-1+n&this._capacityMask,this._list[this._head]=t,this._tail===this._head&&this._growArray(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},r.prototype.shift=function(){var t=this._head;if(t!==this._tail){var n=this._list[t];return this._list[t]=void 0,this._head=t+1&this._capacityMask,t<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),n}},r.prototype.push=function(t){if(void 0===t)return this.size();var n=this._tail;return this._list[n]=t,this._tail=n+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},r.prototype.pop=function(){var t=this._tail;if(t!==this._head){var n=this._list.length;this._tail=t-1+n&this._capacityMask;var e=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&t>1e4&&t<=n>>>2&&this._shrinkArray(),e}},r.prototype.removeOne=function(t){var n=t;if(n===(0|n)&&this._head!==this._tail){var e=this.size(),r=this._list.length;if(!(n>=e||n<-e)){n<0&&(n+=e),n=this._head+n&this._capacityMask;var o,i=this._list[n];if(t<e/2){for(o=t;o>0;o--)this._list[n]=this._list[n=n-1+r&this._capacityMask];this._list[n]=void 0,this._head=this._head+1+r&this._capacityMask}else{for(o=e-1-t;o>0;o--)this._list[n]=this._list[n=n+1+r&this._capacityMask];this._list[n]=void 0,this._tail=this._tail-1+r&this._capacityMask}return i}}},r.prototype.remove=function(t,n){var e,r=t,o=n;if(r===(0|r)&&this._head!==this._tail){var i=this.size(),u=this._list.length;if(!(r>=i||r<-i||n<1)){if(r<0&&(r+=i),1===n||!n)return(e=new Array(1))[0]=this.removeOne(r),e;if(0===r&&r+n>=i)return e=this.toArray(),this.clear(),e;var a;for(r+n>i&&(n=i-r),e=new Array(n),a=0;a<n;a++)e[a]=this._list[this._head+r+a&this._capacityMask];if(r=this._head+r&this._capacityMask,t+n===i){for(this._tail=this._tail-n+u&this._capacityMask,a=n;a>0;a--)this._list[r=r+1+u&this._capacityMask]=void 0;return e}if(0===t){for(this._head=this._head+n+u&this._capacityMask,a=n-1;a>0;a--)this._list[r=r+1+u&this._capacityMask]=void 0;return e}if(t<i/2){for(this._head=this._head+t+n+u&this._capacityMask,a=t;a>0;a--)this.unshift(this._list[r=r-1+u&this._capacityMask]);for(r=this._head-1+u&this._capacityMask;o>0;)this._list[r=r-1+u&this._capacityMask]=void 0,o--}else{for(this._tail=r,r=r+n+u&this._capacityMask,a=i-(n+t);a>0;a--)this.push(this._list[r++]);for(r=this._tail;o>0;)this._list[r=r+1+u&this._capacityMask]=void 0,o--}return this._head<2&&this._tail>1e4&&this._tail<=u>>>2&&this._shrinkArray(),e}}},r.prototype.splice=function(t,n){var e=t;if(e===(0|e)){var r=this.size();if(e<0&&(e+=r),!(e>r)){if(arguments.length>2){var o,i,u,a=arguments.length,s=this._list.length,c=2;if(!r||e<r/2){for(i=new Array(e),o=0;o<e;o++)i[o]=this._list[this._head+o&this._capacityMask];for(0===n?(u=[],e>0&&(this._head=this._head+e+s&this._capacityMask)):(u=this.remove(e,n),this._head=this._head+e+s&this._capacityMask);a>c;)this.unshift(arguments[--a]);for(o=e;o>0;o--)this.unshift(i[o-1])}else{var f=(i=new Array(r-(e+n))).length;for(o=0;o<f;o++)i[o]=this._list[this._head+e+n+o&this._capacityMask];for(0===n?(u=[],e!=r&&(this._tail=this._head+e+s&this._capacityMask)):(u=this.remove(e,n),this._tail=this._tail-f+s&this._capacityMask);c<a;)this.push(arguments[c++]);for(o=0;o<f;o++)this.push(i[o])}return u}return this.remove(e,n)}}},r.prototype.clear=function(){this._head=0,this._tail=0},r.prototype.isEmpty=function(){return this._head===this._tail},r.prototype.toArray=function(){return this._copyArray(!1)},r.prototype._fromArray=function(t){for(var n=0;n<t.length;n++)this.push(t[n])},r.prototype._copyArray=function(t){var n,e=[],r=this._list,o=r.length;if(t||this._head>this._tail){for(n=this._head;n<o;n++)e.push(r[n]);for(n=0;n<this._tail;n++)e.push(r[n])}else for(n=this._head;n<this._tail;n++)e.push(r[n]);return e},r.prototype._growArray=function(){this._head&&(this._list=this._copyArray(!0),this._head=0),this._tail=this._list.length,this._list.length*=2,this._capacityMask=this._capacityMask<<1|1},r.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},t.exports=r},function(t,n,e){!function(n){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=n(e(3),e(10),e(4)):self.concurrify=n(self.sanctuaryShow,self.sanctuaryTypeClasses,self.sanctuaryTypeIdentifiers)}(function(t,n,e){"use strict";var r="@@type",o=["first","second","third","fourth","fifth"];function i(t){return"function"==typeof t}function u(t){return t.length>=2}function a(n,e,r,i){throw new TypeError(n+" expects its "+o[e]+" argument to "+r+"\n  Actual: "+t(i))}function s(n,e,r){throw new TypeError(n+" was invoked outside the context of a "+r+". \n  Called on: "+t(e))}return function(o,c,f,l){var p=function(t){return t[r]||t.name||"Anonymous"}(o),h=function(t){var n=e.parse(t);return(n.namespace||"concurrify")+"/Concurrent"+n.name+"@"+n.version}(p),d=e.parse(p).name,y=e.parse(h).name;function m(t){this.sequential=t}function _(t){return t instanceof o||Boolean(t)&&t.constructor===o||e(t)===o[r]}function g(t){return t instanceof m||Boolean(t)&&t.constructor===m||e(t)===h}function v(t){return _(t)||a(y,0,'be of type "'+d+'"',t),new m(t)}(function(t){try{return n.Applicative.test(n.of(t))}catch(t){return!1}})(o)||a("concurrify",0,"represent an Applicative",o),_(c)||a("concurrify",1,'be of type "'+d+'"',c),i(f)||a("concurrify",2,"be a function",f),u(f)||a("concurrify",2,"be binary",f),i(l)||a("concurrify",3,"be a function",l),u(l)||a("concurrify",3,"be binary",l);var E=m.prototype=v.prototype={constructor:v};v[r]=h;var T=new m(c);return v["fantasy-land/zero"]=function(){return T},v["fantasy-land/of"]=function(t){return new m(n.of(o,t))},E["fantasy-land/map"]=function(t){return g(this)||s(y+"#map",this,y),i(t)||a(y+"#map",0,"be a function",t),new m(n.map(t,this.sequential))},E["fantasy-land/ap"]=function(t){return g(this)||s(y+"#ap",this,y),g(t)||a(y+"#ap",0,"be a "+y,t),new m(l(this.sequential,t.sequential))},E["fantasy-land/alt"]=function(t){return g(this)||s(y+"#alt",this,y),g(t)||a(y+"#alt",0,"be a "+y,t),new m(f(this.sequential,t.sequential))},E["@@show"]=function(){return y+"("+t(this.sequential)+")"},E.toString=function(){return g(this)||s(y+"#toString",this,y),this["@@show"]()},v}})},function(t,n){var e;e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,n){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,n){"function"==typeof Object.create?t.exports=function(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,n){t.super_=n;var e=function(){};e.prototype=n.prototype,t.prototype=new e,t.prototype.constructor=t}},function(t,n,e){"use strict";function r(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),r(e(34)),r(e(35)),r(e(36))},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getCompileFlags=function(){return{buildMode:"production",buildVersion:"0.0.1-alpha",isProduction:!0}}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(2),o=e(25);n.loadWorker=function(t){return r.Future(function(n,e){var r=function(n){n.data.cmd===o.WorkerLoaderCommand.READY&&(t.removeEventListener(o.MESSAGE,r),e(t))};t.addEventListener(o.MESSAGE,r),t.postMessage({cmd:o.WorkerLoaderCommand.INIT})})},n.initWorker=function(){return r.Future(function(t,n){var e=function(t){t.data.cmd===o.WorkerLoaderCommand.INIT&&(self.removeEventListener(o.MESSAGE,e),self.postMessage({cmd:o.WorkerLoaderCommand.READY}),n(self))};self.addEventListener(o.MESSAGE,e)})}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.maybe=function(t){return function(n){return function(e){return void 0===e.value0?t():n(e.value0)}}},n.getMaybeValue=n.maybe(function(){})(function(t){return t})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(7);n.createRenderer=function(){var t=document.createElement("canvas");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.width="100%",t.style.height="100%",t.style.backgroundColor="#2a2a2a",document.getElementById("app").appendChild(t);var n=r.createWebGlRenderer({canvas:t,version:1});return n.gl.clearColor(.2,.2,.2,1),n.resize({width:window.innerWidth,height:window.innerHeight}),n}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(7),o=e(39);n.prepScene=function(t){var n=t.getOriginalScene(o.createCamera())(0),e={name:"MyLight",kind:r.NodeKind.LIGHT,light:{kind:r.LightKind.Point,color:[1,1,1],intensity:100},transform:r.createTransform(null)({translation:[-5,5,3]})};return n.nodes.push(e),n}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(7),o=e(0);n.createCamera=function(){var t={kind:r.CameraKind.PERSPECTIVE,yfov:45*Math.PI/180,aspectRatio:window.innerWidth/window.innerHeight,znear:.01,zfar:1e3},n=Float64Array.from([0,0,5]),e=Float64Array.from([0,0,0]),i=Float64Array.from([0,1,0]),u=r.getCameraProjection(t);return{settings:t,position:n,view:o.mat4.lookAt(r.createMat4(),n,e,i),projection:u}}}]);
//# sourceMappingURL=io.bundle.map